\documentclass[uplatex,dvipdfmx]{jsreport}
\title{今日の代数学}
\author{}
\pagestyle{headings} \setcounter{secnumdepth}{4}
\input{/Users/hirofumi.shiba48/Desktop/数理科学/preamble_no_fonts.tex}
\usepackage[math]{anttor}
\begin{document}
\tableofcontents

\chapter{Group}

\begin{quotation}\mbox{}
    \begin{itemize}
        \item 測度が面積・確率の代数構造の抽出，多様体が座標の代数構造の抽出だとしたら，群は対称性の代数構造の抽出である．これは\textbf{可逆}な射ということである．ということで，群は作用（外算法）を中心に捉え，その内算法でさえ作用として捉えるのが良い．これは表現論の考え方に繋がる．
        \item \textbf{内算法$G\times G\to G$も作用と捉える視点}が肝要となる．これはcurryingとも呼ばれるが，ともかく直積空間ではなく同型群という関数空間を考えるのである．射が大事だという圏論的世界観で駆動するのが代数学である．
        \item すると，\textbf{部分群$H$とは，$H$自体が，左移動による$H$の$G$への作用$H\times G\to G$による$H$-軌道そのものになる場合}：$x\in H$を上手くとれば$Hx=H$となる，すなわち，任意の$a,b\in H$に対して$a\in Hb\Leftrightarrow ab^{-1}\in H$となることをいう．
        巡回群とは，「$x$を含む最小の部分群が$G$である」を満たす$x\in G$が存在する群，すなわち，
        １つの元からの作用$\{x\}\times G\to G$による$\{x\}$-軌道がすでに$G$全体となるような群のことである．\footnote{単項イデアルみたいな}
        \item 部分群$H$の左移動による作用$H\times G\to G$による軌道分解を剰余類という．これは，$\abs{G}=\abs{H\backslash G}\abs{H}$を満たす\ref{thm-Lagrange}．各軌道の代表元$x$に対して，$H$の各元を掛ける行為は，必ず違う結果を生む（群の可逆性）ので，各軌道は$H$と同じ個数だけある．これはまるで絶対値の性質である：$\Abs{\frac{G}{H}}=\frac{\abs{G}}{\abs{H}}$．ちなみに$\abs{GH}=\frac{\abs{G}\abs{H}}{\abs{G\cap H}}$も成り立つ．軌道を考えそう\ref{cor-isomorphism-2}．
        \item こうして，「差を考える」ことの肝心性を，「作用」という言葉で捉えることができた．「差が$H$に入る」とは「同じ$H$-軌道に属する」ことをいうのである：$ab^{-1}\in H\Leftrightarrow a\in Hb\Leftrightarrow Ha=Hb$．\textbf{イデアルにも共通する$HN$などの記法は，暗黙のうちに作用を考えていたのである}．
        \item 各軌道$Gx$は，$G/\Stab_G(x)$と一対一対応する\ref{prop-orbit-and-stabilizer}．$x$を動かさない移動を定める元が$\Stab_G(x)$とあるなら，$x$を$g$と同様に動かすものは$g\Stab_G(x)$だけあるためである（$g\Stab_G(x)$の元は$x$に対する恒等変換と$g\cdot$との合成なので結局$g$移動）．こうして，$X$の様子を調べる代わりに$G$の様子を調べれば良い．群論の結果でさえこのスキームの下にまとまる．結局はこのスキームの下で，Lagrangeの定理は左移動による作用についての結果で，
        Sylowの定理も共役作用による結果である．
        \item 正則表現とは群の演算が定める作用が定める表現であるが（左移動が定めるのが左正則表現という），これは軌道がただ一つで安定化群が自明な集合上の表現として特徴付けられる\footnote{\url{https://ja.wikipedia.org/wiki/正則表現_(数学)}}．$\Ad:G\to\Aut_\Grp(G)\subset\Aut_\Set(G)$と定まるのもこの場合のみだろうか．
        \item 中心とは左移動と右移動の合成$\Ad:G\to\Aut(G)$の核である．左移動と右移動だけは特別な作用で，これを１つにまとめた双関手的な対象が共役写像である．「迂回道がもとの道と可換か？」という問題をAdjunctionというのであった．
        共役作用の安定化群は特に中心化群という，部分群$\Stab_G(x)$の中では$x$は中心となる．
        共役作用の定める軌道分解は共役類分解といい，各共役類の位数は中心化群の位数からわかる．\textbf{中心化群は，$x$と可換な元を集めた集合なので，機械的な計算で決定できる}．
        この手続きにしたがって，計算して得る，群の位数の共役類分解についての等式を類等式と言う．
        \item 類等式の考え方より，$p$群の中心が自明でないことがわかる．中心の各元は単独で共役類をなす（$\Ad$についての軌道が一見集合）から，類等式は$\abs{G}=\abs{Z(G)}+(pの倍数)$という形になる．したがって，$\abs{Z(G)}\ne 1$である（$Z(G)$は$G$の正規（特に特性）部分群であるから，位数は$p$の倍数である）．
        \item 部分群のうち，共役類でもあるようなもの：$\Ad(G)(N)=\cup_{g\in G}\;gNg^{-1}=N$を正規部分群という．この時，共役類の間に自然に演算が持ち上がる．こうして商群が定義できる．
        \item 部分群の正規性はコンパクト性に似ていて，核と像の両方について保たれ，商について全単射を保った対応$\pi^*,\pi_*$が存在する．この点はイデアルと同様である．
        \item Abel群ではない群のうち，次に扱いやすいクラスは半直積の概念で捉えられる．半直積とは，部分群$H\subset G$に対する系統だった可換性の破れ$\forall_{g\in G}\;hg=\varphi(g)h$を射$\varphi:H\to\Aut_\Set(G)$として捉えることで，直積の一般化された構造$G\rtimes_\varphi H$を捉える概念である．これは中心拡大の例になっている．例えば，一般の対称群は$S_n=A_n\rtimes_\varphi\Z/2\Z$で，$\varphi_\tau(\sigma)=\sigma^{n-1}$．
        \item ここで半直積の手法をさらに一般化することで，組成列の概念を得る（この考え方はfiltrationにも通じる）．こうして正規部分群から完全列へと対象が移り，Abel圏の概念へと向かう．すると，有限群には必ず組成列が存在し，その長さは不変量で(Jordan-Hölderの定理\ref{thm-Jordan-Hölder})，群に「次元」の概念の萌芽が与えられる（この手法は一般のAbel圏で通用する）．こうして対称群が明快に掴める視座まで到達する\ref{exp-composition-series-of-symmetry-group}．
        \item 同様の正規鎖を用いた手法の変種を考えると，隣同士が単純群だと「部分群の構造を解明する」ための組成列の概念を得るが，隣同士をAbel群とすると「方程式の可解性を解明する可解群」というクラスを考えられる．すると，$S_n$は$n\le 4$のとき可解（組成因子が全てAbel群からなる）で，$n\ge 5$のとき可解でない．
        \item ここで半直積の考え方に「差を捉える方法」を復活させて融合させる．$ab(ba)^{-1}$がどんな群に入るかを見るのである．すなわち，$ab=aba^{-1}b^{-1}ba=[a,b]ba$となるので，半直積の$\varphi:H\times G\to G$を一般化した事になる．導来群＝交換子部分群は正規どころか特性になる．これも確実に作用的な見方があるだろうがさらに深淵で，$G^\Ab=G/[G,G]$は$G$の部分群でAbelであるようなもので最大なものになる（普遍性）．この方法を使えば，導来列が有限停止するという可解群の特徴付けを得る．
        \item Abel化は忘却関手$\Ab\to\Grp$の随伴関手となる．自由群が忘却関手$\Grp\to\Set$の随伴関手となるように．
        \item 可解群とはAbel群の有限回の拡大によって作れる群のことをいうと捉えたら，それが特に中心拡大によるとき（自明群から初めて，拡大として$G_i$を挿入すると，これが出来上がった群の中で中心になる\footnote{後から中心拡大されて入ってきた群はさらに大きな群の中で中心になるので，昔の中心も中心のままであることに注意．}），特に冪零群という．正規鎖$(G_i)$があって，どこで切っても$G_i/G_{i+1}\le Z(G/G_{i+1})$と中心に入っている「（階層さえ守れば）ほとんどアーベル群」をいう．すると$p$群はここで捕まえることができる．
        \item すると，「中心」とは，「他の$G$の元全てとの可換性」だから，可解群の導来群の概念をさらに強く用いて定義される降中心列$C^n(G)=[G,C^{n-1}(G)]$が有限停止することとして特徴付けられる．
        \item Sylowの定理は本当に綺麗な消息で，群の位数の素因数分解から，群の骨格だけは定まる．その上，$p$-Sylow部分群の集合への$G$の共役作用を考えることで，その個数についても概ね確定する．
    \end{itemize}
\end{quotation}

\section{群の圏}

\subsection{内部群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white, breakable ,colbacktitle=ForestGreen!40!white, coltitle=black,fonttitle=\bfseries\sffamily,
    title=]
    GroupをInternalizationの言葉で，一般の圏（ただし有限積を持つもの\footnote{Any category with finite products can be considered as a cartesian monoidal category (as long as we have either (1) a specified product for each pair of objects, (2) a global axiom of choice, or (3) we allow the monoidal product to be an anafunctor).\url{https://ncatlab.org/nlab/show/cartesian+monoidal+category}}）で定義する．
    群の特徴は，対合$\inv:G\to G$である．そもそも元として対消滅する組$(g,g^{-1})$を定めた時点で対合的な概念をうみ，
    これが対称性としての意味論に的確であり，群論独自の幾何学が始まる．\footnote{部分群の特徴付け}
\end{tcolorbox}

\begin{definition}[group object]\mbox{}
    \begin{enumerate}
        \item 有限積を備えた圏$C$について，次の３図式を可換にする対象$G$と射$\mult:G\times G\to G,\;\inv:G\to G,\;\id:1\to G$の組
        \[\xymatrix{
            G\times G\ar[r]^-{\mult}&G&G\ar[l]_-{\inv}\\&1\ar[u]^-{\id}
        }\]
        を\textbf{群対象}という．
        \[\xymatrix{
            G\times G\times G\ar[rr]^-{{\scriptsize\id_{G\times G}\times\mult}}\ar[d]_-{\mult\times\id_{G\times G}}&&G\times G\ar[d]^-{\mult}&G\times G\ar[dr]_-{\mult}&G\ar[l]_-{(\id_G,\id!)}\ar[d]^-{\id_G}\ar[r]^-{(\id!,\id_G)}&G\times G\ar[dl]^-{\mult}&G\times G\ar[d]_-{\id_G\times\inv}&G\ar[l]_-{\Delta}\ar[r]^-{\Delta}\ar[d]_-{\id!}&G\times G\ar[d]^-{\inv\times\id_G}\\
            G\times G\ar[rr]_-{\mult}&&G&&G&&G\times G\ar[r]^-{\mult}&G&G\times G\ar[l]_-{\mult}
        }\]
        ただし，$\id!=\id\circ !:G\to G$とし，$\Delta=(\id_G,\id_G)$を対角射とした．
        \item これは，反変関手$F:C^\op\to\Grp$であって，台関手$C^\op\to\Set$が表現可能であるようなものに他ならない．\footnote{全ての公理が$F$から生成されるから，logicの用語では$F$を指標(signature)と呼ぶ．}
    \end{enumerate}
\end{definition}
\begin{remark}
    このように，対角射が必要であるから，monoidal圏のdoctrineには群対象が存在するとは限らない．
\end{remark}

\begin{definition}[group, Lie group, topological group, Hopf algebra]\mbox{}
    \begin{enumerate}
        \item 集合の圏$\Set$内の群対象を\textbf{群}という．
        \item 滑らかな多様体の圏$\Diff$内の群対象を\textbf{Lie群}という．
        \item 位相空間の圏$\Top$内の群対象を\textbf{連続群}という．
        \item 可換代数の反対圏$\CAlg^\op$内の群対象を\textbf{Hopf代数}という．
    \end{enumerate}
\end{definition}

\begin{definition}[monoid, semigroup, loop, quasigroup, magma, groupoid]
    群$G=(G,\mult,\id,\inv)$について，\footnote{このような概念群を考察する試みはcentipede mathematicsという．Centipede mathematics in the context of foundations is often called reverse mathematics. From Mathematical Apocrypha Redux: ‘You take a centipede and pull off ninety-nine of its legs and see what it can do.’良い圏を作るのがアーベル群で，アーベル圏をなし，cohomologyが展開できるが，一般の群でも何とかなる．表現としてはモノイド作用で十分でこれが代数を作るがloopだとダメである．}
    \begin{enumerate}
        \item 射$\inv:G\to G$を除くと，これを\textbf{単系}という．さらに$\id:1\to G$の構造を除くと\textbf{半群}（結合的なマグマ）という．
        \item $\mult:G\times G\to G$結合性の条件を除くと，これを\textbf{ループ}という．さらに$\id:1\to G$の構造を除くと\textbf{擬群}という．即ち，全ての元が可逆なマグマであり，単位元が存在すればループという．
        \item 全てを除いた構造$G=(G,\mult)$を，\textbf{マグマ}または二項代数系という．
        \item $\mult$を部分写像であることを認め，小さい圏であって全ての射が可逆であるものを\textbf{亜群}という．\footnote{この観点から見れば，群とは，pointedな単一対象亜群のことである．pointed objectとは，対象$X$と$X$-値点$!:1\to X$との組をいう．}
        \item 群$G$を，一点のみを持つgroupoid $\B G$だと思うことを，Homotopy theoryからdelooping of a group to groupoidという．
    \end{enumerate}
\end{definition}

\subsection{群の射の性質}

\begin{definition}[group homomorphism]
    写像$f:G\to H$であって，$\forall_{x,y\in G}\;f(x\cdot y)=f(x)\cdot f(y)$を満たすものを群準同型という．
\end{definition}

\begin{proposition}[演算を保つなら単位元と逆元も保つ]
    $f:G\to H$を群準同型とする．
    \begin{enumerate}
        \item $f(e)=e'$．
        \item $f(g^{-1})=f(g)^{-1}$．
        \item 群準同型の合成は群準同型である．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $f(1)=f(1\cdot 1)=f(1)\cdot f(1)$である．$f(1)\in H$の逆元$f(1)^{-1}$を両辺に左から掛けて，\[1=f(1)^{-1}(f(1)f(1))=(f(1)^{-1}f(1))f(1)=1\cdot f(1)=f(1).\]
        \item $1=f(1)=f(gg^{-1})=f(g)f(g^{-1})$である．$f(g)\in H$の逆元$f(g)^{-1}$を両辺に左から掛けて，\[f(g)^{-1}=f(g^{-1}).\]
    \end{enumerate}
\end{proof}

\begin{proposition}\label{prop-Grp-is-balanced}
    群の射$f:G\to G'$が可逆であるためには，$f$が全単射であることが必要十分である．
\end{proposition}
\begin{proof}
    群の射$f:G\to G'$の逆写像$f':G'\to G$が群準同型であることを示せば良い．
    任意の$g',h'\in G'$について，$f(g)=g',f(h)=h'$を満たす$h,g\in G$が存在し，
    $f(gh)=f(g)f(h)=g'h'$より，$gh=f'(g)f'(h)=f'(g'h')$．
\end{proof}

\begin{proposition}[単射性の特徴付け]
    $f:G\to G'$が単射であることと，$\Ker f=\{e\}$であることは同値である．
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[$\Rightarrow$] $\Ker\ne\{e\}$とすると，$\{e\}\subsetneq\Ker f$である．相異なる２元$x,y\in\Ker f$について，$f(x)=f(y)=e$が従うので単射性に矛盾．
        \item[$\Leftrightarrow$] $f(x)=f(y)$を満たす$x\ne y\in G$が存在するとすると，$xy^{-1}\ne e$である．これについて$f(xy^{-1})=f(x)f(y)^{-1}=f(y)f(y)^{-1}=e$より，$\Ker f=\{e\}$に矛盾．
    \end{description}
\end{proof}

\subsection{balanced}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    Grpは\footnote{\url{https://ncatlab.org/nlab/show/Grp}}．
    $\Ab\simeq\Mod_\Z$．
\end{tcolorbox}

\begin{proposition}
    任意のモノ射は等化子である．
\end{proposition}

\begin{corollary}
    任意のepic monoは可逆である．
\end{corollary}

\begin{corollary}
    任意のエピ射は余等化子である．
\end{corollary}

\section{群の例}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    \begin{itemize}
        \item 強い可逆性：群の集合論的使用感の特徴は，$\mult$と$\inv$の組み合わせにより，自由に「移項」出来る点にある．
        $\mult,\inv$がSetで奏でる協奏曲は部分群の特徴づけ（命題\ref{prop-characterization-of-subgroup}）などで現れ，特に作用が軌道分解を定める直接の理由になっている．
        \item 可逆性とそれの高階化による弱化が代数学の道具だと思えば，categoryとgroupoidが２つの基本的な概念の両極であることが容易に想像がつく．モノイドと群はその退化した形である．
        \item pointed category：Grp, Ab, Vect（いずれもアーベル圏）には零対象$0$が存在する．ただの終対象$1$があるならば，それはglobal pointとして使えるが，その役割は$\Z$が担い，\footnote{この場合$\Z$は終対象ではないので，global pointという用語法はnLabでは避けるように言われている．}実際Ringでは２つは分離し，$\Z$は始対象，零環$0$が終対象となる．
    \end{itemize}
\end{tcolorbox}

\subsection{より大きな代数的構造の単位として}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    より高級な代数系では，剰余を取る際に正規部分群だとかの議論が必要ないことも多い．
\end{tcolorbox}

\begin{example}[環の部分代数：addiitive group, group of unit]\mbox{}
    \begin{enumerate}
        \item 環$R$は加法について可換群になる．これを\textbf{体の加法群}と呼ぶ．
        \item $R\setminus\{0\}$は乗法について可換群である．これを\textbf{体の乗法群}と呼び，$(R\setminus\{0\},\cdot)=R^\times$または$\GL_1(R)$と表す．
        \item 一般に単元＝可逆元のみを選び出すことによって，環から乗法群を抽出できる：${}^\times:\Ring\to\Grp$．
    \end{enumerate}
\end{example}

\begin{example}[整数環の部分群]
    整数環の部分群は特徴付けられる\ref{prop-Z-classification-of-subgroup}．
\end{example}

\subsection{有限群}

\begin{example}[zero object]
    自明群$\{e\}=\Z_1=\F_1=1$は零対象である．\footnote{Abel群として見た時の自明群は$0=\{0\}$と書くこともある．}アーベル群の圏，環上の加群の圏，体上の線型空間の圏と同様の消息である．
    終対象であるだけでなく，始対象である，その理由はただ一つの射$e:\{e\}\to G$が出るからである．
\end{example}

\begin{example}[cyclic group]
    一番単純な対象が巡回群で，簡明な分類ができる（定理\ref{thm-classification-of-cyclic-groups}）．
\end{example}

\begin{example}
    有限群の分類は，位数によってはAbel群の構造定理を用いてできるが，少し技巧的\ref{exp-classification-by-the-structure-theorem-of-Abelian-group}．
    またはSylowの定理によっても出来る．
    $p,q$を$p<q$かつ$q\not\equiv1\mod p$を満たす素数とする．このとき，位数$pq$の群（$15,33$など）$G$は$\Z/p\Z\times\Z/q\Z$と同型なAbel群である（命題\ref{prop-order-pq}）．
    位数$2p$の群$G$は次のいずれかである（命題\ref{prop-group-of-order-2p}）．
    \begin{enumerate}
        \item 巡回群$G\simeq\Z/p\Z\times\Z/2\Z\simeq\Z/2p\Z$．
        \item 二面体群$G\simeq D_p$．
    \end{enumerate}
\end{example}

\begin{example}[the group of order two]
    位数２の群は同型を除いて一意である．２倍写像$\cdot 2:\Z\to\Z$の余核（像による商）であるため，$\Z/2\Z$と表す．$\F_2$とも表す．
\end{example}

\begin{example}[the groups of order four]
    位数４の群は，巡回群$C_4=\Z/4\Z$と，Klein群\ref{exp-Klein-four-group}$\Z/2\Z\times\Z/2\Z$の２つである．
    Kleinの４群の直積による表示は$\Z/2\Z\times\Z/2\Z$\ref{exp-decomposition-of-Klein-four-group}となる．
    これは２次元の$\bF_2$-線型空間とみなせるから，$\Aut(V)=M_2(\bF_2)$．
    長方形の変換群など，作用としての理解もできる\ref{exp-Klein-four-group}．
    これより，$S_4/V\simeq S_3$も分かる．
\end{example}

\subsection{有限生成群：群の位数と捩れ}

\subsubsection{ねじれ群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
    title=]
        ねじれ群は有限群の拡張概念であり，有限生成というクラスに繋がる．
        有限生成なねじれ群は有限群であるか？という問題はBurnsideの問題と呼ばれ1902に提起された．
        これは1964に反例となる$p$-群が構成された．
\end{tcolorbox}

\begin{definition}[order, torsion subgroup / periodic group, torsion-free]\mbox{}\label{def-torsion}
    \begin{enumerate}
        \item 群の位数：群の台集合の濃度を位数と呼ぶ．
        \item 元の位数：群の元$g\in G$について，$\exists_{n\in\N}\;g^n=e$を満たす最小の自然数を\textbf{元の位数}という．位数が存在する元を位数有限，または捩れ元と呼び，位数が存在しない元を位数無限という．
        \item ある群$G$の中で，位数有限な元は部分群$T(G)$をなす．これを\textbf{捩れ部分群}といい，これが自明である群をねじれがない群という．
        \item 任意の元が有限位数であるような群を一般に\textbf{捩れ群}または\textbf{周期群}と呼ぶ．
        \item ねじれ群は有限群とは限らないが，任意の有限群は捩れ群である．
        \item ねじれ群とその群準同型は群Torをなす．\footnote{基礎論の結果「アーベル群の言語$\{+,-,0\}$上の有限個の閉論理式が全てのねじれがないアーベル群で正しければ，それらの閉論理式は，ねじれのあるアーベル群でも正しい．」}
    \end{enumerate}
\end{definition}
\begin{remark}[元の位数と群の位数]
    元の位数は内部自己同型によって保存される．なぜなら圏論的な不変量だからである．
    元の位数は$\Ker g:\Z\to G$の位数を介して定義できる（命題\ref{prop-characterization-of-additive-group-Z}）．
    $n$次巡回群からの射を使えば，位数$n$の元を観測できる（系\ref{cor-morphism-from-cyclic-group}）．
\end{remark}
\begin{remark}[Abel圏でのねじれ群]
    特にAbel群に対して，ねじれ部分群の対応$T:\Ab\to\Tor$は実は関手的である．
    また$T(G)\rsub G$は特性部分群である．圏Abを捩れ群とねじれのない群とに分けて研究する
    理論をtorsion theoryと言う．
\end{remark}

\begin{definition}[exponent]
    ねじれ群について，その元の位数の全ての最小公倍数を，存在すれば\textbf{冪数}という．
\end{definition}
\begin{example}[非有限なねじれ群]
    群の全ての元は有限位数を持つが，群としては位数有限でない例がある．
    \begin{enumerate}
        \item 回転群$\Q/\Z$（例\ref{example-circle-group}）．
        \item 有限体上の多項式の加法群．
        \item 全ての二面体群の合併．
        \item Prüferの$p$-群（例\ref{example-Prüfer-p-group}）．
    \end{enumerate}
\end{example}
\begin{remark}
    ねじれ群の興味深い性質の一つは、それが一階述語論理で定式化できないことである。
\end{remark}

\subsubsection{$p$-群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $p$-群とAbel群が，群の分類で中心となる．
    $p$-群は捩れ群であるが，有限群とは限らない．
\end{tcolorbox}

\begin{definition}[$p$-primary group / $p$-group / primary group]\mbox{}
    \begin{enumerate}
        \item 群$G$の任意の元$g\in G$が，位数$p^{n(g)}$を持つとき，これを\textbf{$p$-群}または\textbf{$p$-準素群}という．$n:G\to\N$が有界とは限らないことに注意．
        \item 群$G$が有限群であるとき，冪数が存在するから，群の位数$\abs{G}$が$p$の冪であることと，$G$が$p$-群であることは同値．
    \end{enumerate}
\end{definition}
\begin{remarks}\mbox{}
    \begin{enumerate}
        \item 任意の有限Abel群は，その$p$-群の直和に分解できる（有限Abel群の構造定理\ref{thm-fundamental-theorem-of-finite-abelian-groups}）．これを$p$-準素成分／部分($p$-primary parts / components)などという．
        \item 任意の有限$p$-群は，非自明な中心を持つ（命題\ref{prop-zentrum-of-primary-group-is-trivial}）．
        \item したがって，次のように構成した$p$-群$G$の昇中心列$(Z^n(G))$は$G$で有限停止するから，$p$-群は冪零である．
        \begin{enumerate}[(i)]
            \item $Z^0(G)=\{e\}$．
            \item $\pi:G\epi G/Z^{n-1}(G)$について，$Z^n(G):=\pi^{-1}(Z(G/Z^{n-1}(G)))$．これを$n$次の中心という．
        \end{enumerate}
    \end{enumerate}
\end{remarks}
\begin{remark}[基本アーベル群]
    基本アーベル群\ref{exp-elementary-Abelian-group}は$p$-群の特別な場合である．
    Kleinの四元群は特別な位置を占め，位数$p^2$のAbel群は$p=2$の場合と同じ要領で２つに分類できる\ref{example-finite-Abel-group-of-order-p^2}．
\end{remark}

\subsection{対称群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=対称群＝順序数の変換群]
    群の例のほとんどが，同型群であるが，集合の同型群を対称群といい，その部分群を置換群という．
\end{tcolorbox}

\begin{example}[symmetric group, permutation group, cyclic permutation]\mbox{}
    \begin{enumerate}
        \item 集合$X$に対し，$\Aut_\Set(X)=:\Aut(X)$は群となる．この部分群を\textbf{置換群}という．
        \item $X=[n]$の時，$\Aut([n])$を$n$次\textbf{対称群}と呼び，$\mathfrak{S}_n$で表す．$n\ge 3$において，可換でなく，中心は自明である．$m\ge 5$において，可解でない．$S_n\simeq\GL_n(\F_1)$．
        \item 射$\sgn:S_n\to\{\pm 1\}$の核$A_n$を$n$次\textbf{交代群}と呼ぶ．これは対称群の交換子部分群に一致する\ref{exp-commutator-subgroup}．また，$[A_n,A_n]=A_n\;(n\ge 5),[A_4,A_4]=V$．
        \item $S_4,S_5$の2-Sylow部分群は位数8で，二面体群$D_4$である．
        \item $S_n$の元を交わりのない巡回置換の積に分解したとき，長さ$l$の巡回置換が現れる回数$k_l$を用いて，組$(k_1,\cdots,k_n)$を\textbf{型}という．型は共役類を定める．
    \end{enumerate}
\end{example}

\begin{example}[$S_3$]
    $S_3$の表示\ref{exp-presentation-of-S3}：$\tau\sigma\tau=\sigma^2$．
    中心の様子\ref{exp-center}．
    正規部分群\ref{exp-normal-subgroup-of-S3}．
    類等式\ref{exp-class-equation-of-S3}．
    半直積による表示は$S_n\simeq A_n\rtimes C_2$\ref{example-extension}．
    二面体群に極めて似ているが，「ねじれ方」が違う．
    つまり，組成因子は同じ\ref{exp-composition-series-of-symmetry-group}．
    $A_n\;(n\ge 5)$は単純である\ref{prop-An-is-simple}．
    組成列は\ref{exp-composition-series}．
\end{example}

\begin{example}[$S_4$]
    $S_4/V\simeq S_3$で，これは分裂し，$S_4\simeq V\rtimes S_3$\ref{exp-semiproduct-decomposition}．
\end{example}

\begin{example}[平面の変換群：dihedral group]
    正$n$角形の頂点集合は
    \[T_n:=\Brace{\paren{\cos\frac{2k\pi}{n},\sin\frac{2k\pi}{n}}\in\R^2\;\middle|\;k\in n}\]
    と表せる．
    \[D_n:=\{g\in O_2(\R)\mid g(T_n)=T_n\}\]
    を\textbf{二面体群}と言う．\footnote{Dynkin図形と区別するために，nLabでは$D_{2n}$と表される．}
    二面体群は$S_n$の部分群である\ref{remark-Dn}．
    \begin{enumerate}
        \item 回転$\sigma$と鏡映$\tau$の２つへの標準分解が存在し，回転は巡回群$C_n=\bracket{\sigma}$を作るから，$D_n=C_n+\tau C_n$より，位数は$2n$となる．
        \item これは典型的な半直積の例となっている：$D_{2n}=C_n\rtimes_\phi C_2$\ref{exp-semidirect-product-1}．ただし，$\phi:C_2\to\Aut(C_n)$は，$\rho(1)={-}^{-1}$とする．
        \item 交換法則は$\tau\sigma=\sigma^{-1}\tau$より，$D_n$の中心は$n$が奇数のとき自明で，$n$が偶数のときは$\sigma^{n/2}$も含んだ位数２の部分群となる．
    \end{enumerate}
    正多角形の中心を座標平面の原点に置けば、それを不変とする合同変換は線型写像と見なせる。これによって、$D_n$の各々の元は、行列で表すことができ、変換の合成は行列の積に対応する。これは、群の\textbf{忠実表現}の一例である。
\end{example}

\begin{example}[立体の変換群：tetrahedral, octahedral, icosahedral group]
    $T\subset\R^3$を四面体とすると，$T:=\{g\in O_3(\R)\mid g(T)=T\}$は四面体群である．
    同様にして，八面体群$O$，二十面体群$I$も定義できる．
\end{example}

\subsection{行列の群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    やはり順序数の変換群と思うより，幾何学的対象の変換群と思う方が構造がわかる．
\end{tcolorbox}

\begin{example}[general linear group]\mbox{}
    \begin{enumerate}
        \item $\GL_n(K)$の元と$K^n$の基底は一対一に対応する．よって，$\GL_n(\F_p)$の位数がわかる．
        \item $\GL_n(K)=\SL_n(K)\rtimes K^\times$．$[\GL_n(K),\GL_n(K)]=\SL_n(K)$である\ref{exp-commutator-subgroup}．
        \item $Z(\GL_n(K))\simeq K^\times$．
    \end{enumerate}
\end{example}

\begin{example}[Lie群の例：orthogonal group, unitary group]\mbox{}
    \begin{enumerate}
        \item 
    行列$A$の余因子行列を$\Delta(A)$とすると，これは$A$の成分の多項式であるから，写像
    \[\xymatrix@R-2pc{
        {}^{-1}:\GL(n,\R)\ar[r]&M(n,\R)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        A\ar@{|->}[r]&(\det A)^{-1}\Delta(A)
    }\]
    は連続である．また転置${}^t:M(n,\R)\to M(n,\R)$も連続である．
    従って，直交群
    $O(n,\R):=\{A\in\GL(n,\R)\mid A{}^t\!A=1\}$
    は$M(n,\R)$-閉集合，特殊直交群
    $SO(n,\R):=O(n,\R)\cap\SL(n,\R)$
    も$M(n,\R)$-閉集合である．
    \item $M(m,n;\C)\simeq\C^{mn}$での標準内積は$\Tr({}^t\!X\overline{Y})$と表せる．
    一般線型群は$M(n,\C)$-開集合，特殊線型群は$M(n,\C)$-閉集合である．
    ユニタリ群
    $U(n):=\{A\in\GL(n,\C)\mid A^*A=1\}$
    も，特殊ユニタリ群
    $SU(n):=U(n)\cap\SL(n,\C)$
    も$M(n,\C)$-閉集合である．
    \end{enumerate}
\end{example}

\begin{example}[上三角行列の空間]
    可逆な上三角行列全体は部分Lie群をなす．
    半直積による表示は，$(2,2)$-行列の場合だと$G\simeq\C\rtimes_\phi(\C^\times\times\C^\times)$\ref{exp-upper-trianguler-matrix}．
    冪単な行列の集合$U$が正規部分群をなし，あとは固有値について回転する．
    一般に，可逆な上三角行列の集合$B$は，冪単行列がなす部分集合$U$と対角行列$T$を用いて$B=U\rtimes T$と表せる\ref{exp-semidirect-product-1}．
    なお，$U$は$\GL_n(\bF_p)$の$p$-Sylow部分群になる\ref{exp-p-Sylow-subgroup-of-GL}．
    また$U$は冪零度$n-1$の冪零群である\ref{exp-nilpotent-groups}．
    冪零度とJordan分解は絶対対応していると思うが，まだ見えない．
\end{example}

\begin{example}[quaternion group]
    四元数群は，生成元$1,i,j,k$と関係式$i^2=j^2=k^2=ijk=-1$が定める群である．
    この群を規定として生成される４次元の実線型空間の元を四元数$\bH$という．
    これは斜体をなす．$\R$を真の部分環に持つ斜体は$\C$と$\bH$のみである(Frobeniusの定理)．
    三次元球面$S^3$上に群構造を入れたものとみなせ，
    $\bH\simeq\SU_2\simeq S^3$は$2D_4$と同型．
    これらはgeneral dicyclic groupsの系列の一部である．
    $Z(Q_8)=\pm1$．
    また，最小の非Abelな$p$-群であり，冪零度$2$の冪零群である\ref{exp-nilpotent-groups}．
\end{example}

\begin{example}[Klein group]
    Kleinの四元群\ref{exp-Klein-four-group}は，正方形でない長方形の変換群である．
\end{example}

\subsection{Lie群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    特に豊かな変換群がLie群である．
    Lie群の作用の軌道・安定化群定理は等質空間の理論にあたる．
\end{tcolorbox}

\begin{example}[affine空間]
    affine変換群$\Aff_n(\R)$は局所コンパクトで，$n$次元空間$A^n$の推移的な位相変換群である．
    原点$0$における等方部分群は$\GL_n(\R)$に等しいから，$\Aff_n(\R)/\GL_n(\R)\simeq A^n$が成り立つ．
    この分母を払うと，$\Aff_n(\R)\simeq A^n\rtimes\GL_n(\R)$の構造になっている\ref{exp-semidirect-product-1}．
    $\Aff(\R^n)$の積は$(A_1,b_1)\cdot(A_2,b_2)=(A_1A_2,A_1b_2+b_1)$で定まるからである．
\end{example}


\begin{example}[直交群の等質空間としての単位球面]
    $O(n)\subset\GL_n(\R)$はコンパクト部分群である．列ベクトルの空間として，$U_1(0)\subset\R^n$を$n$次元開球とすると，$O(n)\subset\o(U_1(0))^n$より．
    ここで，$\norm{Ax}=\norm{x}$を満たすから，$O(n)$の作用は連続写像$S^{n-1}\epi S^{n-1}$を誘導する．また，$O(n)$は推移的に$S^{n-1}$に作用する．
    したがって，$S^{n-1}$は$O(n)$の等質空間である．
    点$e_1\in S^{n-1}$における等方部分群は
    \[H:=\Brace{\begin{pmatrix}1&0\\0&B\end{pmatrix}\;\middle|\;B\in O(n-1)}\]
    より，軌道と安定化群との関係から，$O(n)/H\simeq O(n)/O(n-1)\simeq S^{n-1}$である．

    全く同様の議論で，$SO(n)/SO(n-1)\simeq S^{n-1}$も成り立つ．

    $SO(n)$は$O(n)$の正規部分群であるだけでなく，単位元を含む連結部分となる．
\end{example}

\subsection{対称群の分類}

\begin{remark}[ADE classification]
    Dynkin図形によって分類される．
    $A$は交代群，$D$は二面体群，$E$は多面体群である．
\end{remark}

\begin{proposition}\mbox{}
    \begin{enumerate}
        \item Kleinの四元群について，$D_4\simeq\Z_2\times\Z_2$．
        \item $D_6\simeq S_3$．
        \item $T_4\simeq S_4\simeq O\cap\SO_3$．（向きを保つ四面体群の部分群）
        \item orientation-preservingな対称変換への制限$T\cap\SO_3$は$A_4$に同型．
    \end{enumerate}
\end{proposition}

\begin{proposition}[cycle decomposition]
    任意の置換$\sigma\in S_n$は巡回置換の積に分解できる．
\end{proposition}
\begin{proof}
    $[n]$は$\sigma$-軌道に分解でき，それぞれの中での巡回置換を$\tau_1,\cdots,\tau_r$とすると，$\sigma=\tau_1\cdots\tau_r$である．
\end{proof}

\begin{question}
    全ての無限群は，無限の正規部分群を持つか？
\end{question}
\begin{counterexample}[Prüfer $p$-group]\label{example-Prüfer-p-group}
    \textbf{ブリューファー$p$群}とは，次のように定義できる．
    \begin{align*}
        \Z(p^\infty) = \Brace{\exp\left(\frac{2\pi im}{p^n}\right)\;\middle|\; n,m\in\N}
    \end{align*}
    または$p$進数の加法群$\Q_p$と$p$進整数からなる部分群$\Z_p$を用いて，$\Z(p^\infty)=\Q_p/\Z_p$と表せる．
    この$p^\infty$群または$p$準巡回群の部分群は包含関係によって全順序づけられる唯一の無限群の系列である（素数$p$の取り方だけ違う）．
\end{counterexample}
\begin{counterexample}[Tarski Monster group]
    Tarski Monster groupは全ての部分群に対して素数$p$が存在して位数$p$の巡回群に同型になる無限群である．
\end{counterexample}

\subsection{群環}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    多項式環の拡張となるより構造豊かな加群を考える．
    $R$が体であるとき，これは線型空間になる．
    畳み込み積は，四元数のように，基底（$G$の元）同士にも演算が存在するような線型空間である．
    したがって代数の例である．
\end{tcolorbox}

\begin{definition}[group ring / group algebra]
    群$G$と環$R$について，群$R$-代数，または，群環$R[G]$とは，$G$上の自由$R$-加群$U(R[G])=\Hom^\finsupp_\Set(U(G),U(R))$上に，畳み込み積(convolution product)
    \[(f_1*f_2)(g)=\sum_{h\in G}f_1(gh^{-1})f_2(h)\qquad(g_1,g_2:G\to R)\]
    を定めたものである．
\end{definition}
\begin{remark}
    基本的には$\{\chi_g:U(G)\to U(R)\}_{g\in G}$を基底とした自由加群である．各元は写像$r_{(-)}:U(G)\to U(R)$とみなせる．
    groupoid algebra, category algebraとして一般化される．
    Hopf代数であり，graded algebraでもある，結合代数のクラスである．
\end{remark}

\subsection{群の構成}

\begin{definition}[direct sum]
    アーベル群の族$(M_\lambda)_{\lambda\in\Lambda}$に対して，
    \[\bigoplus_{\lambda\in\Lambda}M_\lambda=\Brace{(m_\lambda)_{\lambda\in\Lambda}\;\middle|\;m_\lambda=0\;\fe}\]
    に，$(m_\lambda)_{\lambda\in\Lambda}=(m'_\lambda)_{\lambda\in\Lambda}=(m_\lambda+m'_\lambda)_{\lambda\in\Lambda}$によって加法を定義したものはAbel群になる．
\end{definition}

\subsection{群の射の例}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    群の射あるところに準同型定理あり．
\end{tcolorbox}

\begin{example}[行列式と特殊線型群]\mbox{}
    \begin{enumerate}
        \item 可換環$A$に対して，$\det:\GL_n(A)\epi A^\times$は群の全射準同型である．
        \item $\SL_n(A):=\Ker\det$である．
        \item 準同型定理より，$\GL_n(A)/\SL_n(A)\simeq A^*$となる．$U(2)/SU(2)\simeq S^1$はその制限なのかもしれない．
    \end{enumerate}
\end{example}

\begin{example}[置換の符号と交代群]\label{example-signature-of-permutation}
    置換の符号
    \[\xymatrix@R-2pc{
        \sgn:S_n\ar[r]&\{\pm 1\}\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        \sigma\ar@{|->}[r]&\prod_{1\le i<j\le n}\frac{\sigma(i)-\sigma(j)}{i-j}
    }\]
    は次の群準同型$P:S_n\to\GL_n(K)$を用いて行列式で定義することができる．
    \begin{enumerate}
        \item 
    \[\xymatrix@R-2pc{
        P:S_n\ar[r]&\GL_n(K)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        \sigma\ar@{|->}[r]&P(\sigma):=(e_{\sigma(1)}\cdots e_{\sigma(n)})
    }\]
    は単射な準同型である．
    \item $K$の標数が$2$でなければ，次の準同型$\sgn:S_n\to\{\pm 1\}$が引き起こされる．
    \[\xymatrix{
        S_n\ar[r]^-P\ar[drr]_-{\sgn}&\GL_n(K)\ar[r]^-{\det}&K^\times\\
        &&\{\pm 1\}\ar[u]_-i
    }\]
    \end{enumerate}
    偶置換を集めた群$A_n:=\Ker\sgn$を交代群という．\footnote{Boole代数みを感じる．環論も感じる．}
    よって$A_n\rsub S_n$．
    準同型定理より，$S_n/A_n\simeq\{\pm 1\}$．
\end{example}

\begin{example}[指数表示という群準同型]
    指数を帰納的に定める．次は群準同型である．像は巡回群$\bracket{g}$である．
    この関手性を\textbf{指数法則}という．
    \[\xymatrix@R-2pc{
        \Z\ar[r]&G\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        n\ar@{|->}[r]&g^n
    }\]
\end{example}

\begin{example}[対数という群準同型]
    $\log:\R_{>0}\iso\R$は乗法群と加法群の間の同型を与えている．
\end{example}

\begin{example}[回転という群準同型]
    \[\xymatrix@R-2pc{
        \R\ar[r]&\GL_2(\R)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        t\ar@{|->}[r]&{\begin{pmatrix}\cos t&-\sin t\\\sin t&\cos t\end{pmatrix}}
    }\]
\end{example}

\subsection{群の同型の例}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    内部自己同型が一番わからない．$G/Z(G)$と同型であるようだ\ref{lemma-group-of-inner-isomorphism}．
\end{tcolorbox}

\begin{example}[inner automorphism：共役という標準的な自己同型]
    ２変数写像
    \[\xymatrix@R-2pc{
        \Ad:G\times G\ar[r]&G&G\ar[r]&\Aut(G)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        (h,g)\ar@{|->}[r]&ghg^{-1}&g\ar@{|->}[r]&\Ad(g)
    }\]
    のcurrying $\Ad(g):G\to G$は群同型であり，逆射は$\Ad(g^{-1})$である．
    名前の由来は随伴(adjunct)だからである．\footnote{The process of currying is an instance of passage to adjuncts, specialized to the tensor-hom adjunction of a closed monoidal category. fiberにも見えるし，座標変換にも見える．これが可換になるとは，Abel群ということでもある．}
    \[\xymatrix{
        G\ar[r]^-g\ar[d]_-h&G\ar[d]^-{h}\\
        G&G\ar[l]_-{g^{-1}}
    }\]
    自己同型のうち，共役として得られるもの$\Im\Ad=:I(G)\subset\Aut(G)$を\textbf{内部自己同型}という．
    $\Ker\Ad\subset G$は群の中心$Z(G)$である．
    よって$\Ad:G\epi I(G)\mono\Aut(G)$についての準同型定理より，$G/Z(G)\simeq I(G)$
\end{example}
\begin{remarks}[内部自己同型とは，$G$の自己同型への埋め込み]
    群作用$G\to\Aut(G)$のうち，$g^*$と$g_*$を合わせたものが共役という考え方だ．
    Awodeyでは，ここから任意の圏はある具体圏と同型であるという証明をパラレルに描き出した．
\end{remarks}

\subsection{Cayleyの定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=半直積と同様，自己言及という構造]
    群論の目標は
    \begin{enumerate}
        \item 全ての群を分類する．
        \item 全ての群の作用を分類する．
        群の作用は$G\to\Aut_{-}(\Gamma)$というときの$-$に入る圏の定め方，あるいは$\Aut_\Set(G)$の部分群の定め方が肝となるが，特に，集合への作用である\textbf{置換表現}，そして線型空間への作用である\textbf{線型表現}である．\footnote{これはグラフ理論で行列が出てくるような理由と同じであるか．}
    \end{enumerate}
    群の公理が，対象の対称性を表しているかは応用者によるが，Cayleyの定理が一つ別個の回答を与える．
    群は必ず自身の対称群の部分群となっている．
    こうしてGrpは数学の中で欠かせない役割を担うことになる．

    この証明は，左移動と右移動として知られる群作用の，線型表現である\textbf{正則表現}を構成することで行われる．これは群$G$上で自由生成された$K$-線型空間を考えることにあたる．
\end{tcolorbox}

\section{部分群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white, breakable ,colbacktitle=ForestGreen!40!white, coltitle=black,fonttitle=\bfseries\sffamily,
    title=包含写像が定める構成]
    最も簡単な構成法は自身の内部を省みる，部分群である．
    これは群を定める３つの射が自然に部分射を定めるような包含写像$H\to G$を部分群という．
    部分作用$\rho:H\times H\to G$が$\Im\rho\subset H$を満たすことと同値．

    %元の構造は，早々と集合の間の構造に上げて，その記法で議論した方が良い．
    %そしてその元への言及は，なるべく外在化させて射への条件で記述するのが良い．
\end{tcolorbox}

\subsection{定義と特徴付け：部分作用という見方}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=multとinvがSetで奏でる協奏曲：差が$H$に入ることが$H$を特徴付ける]
    %部分群の集合論と等号を用いた特徴づけとしては，「解の一意性」を用いて，$a\in Hb\Leftrightarrow\exists_{h\in H}\;a=hb$を$ab^{-1}=h$と寄せる技法である．
    %これを演算の閉性で考えたら，
    $ab^{-1}\in H$は$\mult,\inv$の閉性の両方を含意している．
    \textbf{同伴性}のように（注\ref{remark-PFI}），差に注目する技法である．
    これは軌道の同値性$aH=bH\Lrarrow ab^{-1}\in H$ \ref{remarks-軌道の特徴付け}の特殊な場合である．
    そう，「差が等しい」とは同じ軌道に属することをいう．そして部分群$H$とは，演算$G\times G\to G$を作用と捉えると，
    $H$が自分に作用することと捉えらえる．
    %これは，演算の制限が自然に演算を誘導する条件であるから，右移動／左移動安定性でもある．したがって，これを同値関係として使用すると，剰余類分割を得る．
    %剰余類分割において，それぞれの類は群であるが，群構造が商集合に持ち越されるかどうかが焦点になるが，こちらは共役安定性である．
\end{tcolorbox}

\begin{notation}[部分群の積：実はこれは部分群のなす束の結びの演算となっている]
    群$G$の部分集合$S,T\subset G$と元$a,b\in S$に対して，群を
    \begin{align*}
        ST&=\{ st\mid s\in S,t\in T \} &S^{-1}&=\{s^{-1}\mid s\in S\}\\
        aS&=\{ax\mid x\in S\}\footnote{$2\Z$などはこれである．}&Sb&=\{xb\mid x\in S\}&aSb&=\{axb\mid x\in S\}
    \end{align*}
    と定義する．また，帰納的に
    \begin{align*}
        S^0&=\{e\} & S^{-1}&=\{x^{-1}\mid x\in S\} & S^{m+1}&= S^mS 
    \end{align*}
    という記法も定める．
\end{notation}
\begin{remark}[coset group]
    この記法は方程式的に使う時に重宝する．
    群の本質は方程式の解の一意性＝乗法$\cdot:G\times G\to G$のcurryingが全単射であることにある．
    $a^{-1}Na\subset N\Leftrightarrow N\subset aNa^{-1}$．
    すると，この構造上に群構造が入りそうである．
    これが剰余群である．
\end{remark}

\begin{definition}[subgroup]
    群$(G,\dot,e,{}^{-1})$の部分集合$H\subset G$が部分群であるとは，
    \begin{enumerate}
        \item $e\in H$，
        \item $\forall_{x,y\in G}\;xy\in H$，
        \item $\forall_{x\in G}\;x^{-1}\in H$，
    \end{enumerate}
    を満たすことをいう．
    \[\xymatrix{
            G\times G\ar[r]^-{\mult}&G&G\ar[l]_-{\inv}\\&1\ar[u]^-{\id}
    }\]
\end{definition}

\begin{proposition}[部分群の特徴付け]\label{prop-characterization-of-subgroup}
    $G$を群，$H\subset G$を空でない部分集合とする．
    次の３条件は同値である．
    \begin{enumerate}
        \item $H$は群である．
        \item $H^2\subset H\land H^{-1}\subset H$．\footnote{$\forall_{a,b\in H}\;(ab\in H)\land(a^{-1}\in H)$．}
        \item $H^{-1}H\subset H$．\footnote{$\forall_{a,b\in H}\;a^{-1}b\in H$．}
    \end{enumerate}
\end{proposition}
\begin{proof}
    (1)$\Rightarrow$(2)$\Rightarrow$(3)は論理的帰結である．
    (3)$\Rightarrow$(1)を示す．群の演算の制限$\cdot|_{H\times H}$の値域が$H$に含まれること：$\forall_{a,b\in H}\;ab\in H$を示せば良い．
    \begin{enumerate}[1.]
        \item $H\ne\emptyset$より，$a\in H$が取れる．
        \item (3)より，$a^{-1}a=e\in H$である．\footnote{$a=e$でも構わない．}
        \item (3)より，$a^{-1}e=a^{-1}\in H$である．
        \item 以上より，任意の$a,b\in H$について，$a^{-1}\in H$もわかったから，(3)より，$(a^{-1})^{-1}b=ab\in H$．
    \end{enumerate}
\end{proof}
\begin{remarks}[internalizationで考えると，今回示すべき事柄と群の公理のズレがわかりやすい]
    要は，群の公理のうち，射の性質に当たるものは今回は示す必要がなく，可換図式から射が誘導されるための条件のみを示せば良い．安定性：$\Im(\cdot|_{H\times H})\subset H$が成り立てば良い．
    具体的に言えば，結合性と単位元の中立性と存在，逆元の吸収性と存在のうち，前者は演算の閉性のみが大事で（じゃないと$G$を$H$に書き換えた図式に可換な射が引き起こされない），
    後２者は存在のみが大事である（これは$\Im\inv\subset H,\Im\id\subset H$という閉性のことである）．
    図式の言葉で考えれば，全てが統一的に見れる．
\end{remarks}

\begin{corollary}[部分群の共通部分に関する閉性：実はこれは部分群のなす束についての交わりの演算となる]
    $H_1,H_2\subset G$を$G$の部分群とする．$H_1\cap H_2$も部分群である．
\end{corollary}
\begin{proof}
    群の特徴付け（命題\ref{prop-characterization-of-subgroup}）より，任意の$a,b\in H_1\cap H_2$について，$a^{-1}b\in H_1\cap H_2$だから，$H_1\cap H_2$も群である．
\end{proof}

\subsection{生成と巡回群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    １元から生成される群を巡回群という．
    巡回群はアーベル群である．
    巡回群は結局，自由群$\Z/n\Z\;(n=0,1,2,\cdots)$で尽くされる．
\end{tcolorbox}

\begin{lemma}[生成される群]
    群$G$の部分集合$S\subset G$に対して，$S$を含む最小の部分群が存在する．これを\textbf{$S$から生成される部分群}といい，$\bracket{S}$で表す．
\end{lemma}
\begin{proof}
    これは次のように構成される：$(G_\lambda)_{\lambda\in\Lambda}$を$S$を含む$G$-部分群全体からなる族として，$\bracket{S}=\bigcap_{\lambda\in\Lambda} G_\lambda$．また，$\bracket{S}=\{s_1^{n_1}\cdots s_r^{n_r}\in G\mid a_i\in S,n_i\in\Z,r\in\N_{>0},i\in[r]\}$などがある．
\end{proof}

\begin{lemma}[１元生成群が巡回群である]
    $g\in G$に対し，$\bracket{g}=\{g^n\in G\mid n\in\Z\}$．これを巡回群と呼ぶ．
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[$\bracket{g}$部分群である] 任意の元$g^n,g^m\in\bracket{g}$について，$g^n(g^m)^{-1}=g^{m-n}\in\bracket{g}$より，部分群の特徴付け\ref{prop-characterization-of-subgroup}から部分群である．
        \item[最小性：無限降下法] ある部分集合$\{e\}\subsetneq H\subsetneq\bracket{g}$が$H=\bracket{g}$であるとする．すると$\exists_{n\in\N}\;g^n\notin H$であるが，このためには$g^{n-1}\notin H$が必要．これを繰り返すと$g\notin H$となり，矛盾．
    \end{description}
\end{proof}

\begin{lemma}\label{lemma-cyclic-then-Abel}
    巡回群はAbel群である．
\end{lemma}
\begin{proof}
    指数において，整数加法が可換であることによる．
\end{proof}

\begin{lemma}\label{lemma-order-of-element-and-subspace}
    元$g\in G$が位数有限であることと，群$\bracket{g}$が位数有限であることは同値で，その位数は一致する．
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[$\Rightarrow$] $g$の位数を$n\in\N$として，$\bracket{g}=\{e,g,g^2,\cdots,g^n\}$であることを示す．任意に$m\in\Z$をとり，$g^m\in\{e,g,g^2,\cdots,g^n\}$を示せば良い．$m=nk+r\;(0\le r<n)$と表せるが，$g^m=(g^n)^kr=r\in\{e,g,g^2,\cdots,g^n\}$が従う．
        \item[$\Leftrightarrow$] $\bracket{g}$が位数有限より，$\exists_{m,n\in\Z}\;m\ne n\land g^m=g^n$を満たす．よって，$g^{m-n}=e$．
    \end{description}
\end{proof}

\subsection{射と部分群}

\begin{proposition}[kernel, image]
    群準同型$f:G\to G'$について，
    \begin{enumerate}
        \item $\Ker f=\{g\in G\mid f(g)=e'\}$は$G$-部分群である．なお，一般に部分群$H'\subset G'$に対して，その逆像$f^{-1}(H')$は部分群である．
        \item $\Im f=\{f(g)\mid g\in G\}$は$G'$-部分群である．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $g_1,g_2\in f^{-1}(H')$を任意に取る．
        \begin{enumerate}[1.]
            \item $f(g_1g_2)=f(g_1)f(g_2)\in H'$より，$g_1g_2\in f^{-1}(H')$．
            \item $f(g_1^{-1})=f(g_1)^{-1}\in H'$より，$g_1^{-1}\in f^{-1}(H')$．
            \item $f(e)=e_{G'}\in H'$より，$e\in f^{-1}(H')$．
        \end{enumerate}
    \end{enumerate}
\end{proof}

\subsection{中心：共役作用の核}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    可換性$gh=gh$を，「$g$による左作用と右作用が同じ結果を生む」ことだと思うと，左移動と右移動の合成たる共役作用が恒等になることとして中心が捉えられる．すると，中心は$\Ad:G\to\Aut(G)$の核であるから正規である．
\end{tcolorbox}

\begin{definition}[center / zentrum]
    群$G$に対して，$Z(G):=\{g\in G\mid \forall_{h\in G}\;gh=hg\}$は部分群となり，これを\textbf{中心群}という．
\end{definition}

\begin{lemma}
    共役作用$\Ad:G\to\Aut_\Grp(G)$に対して，
    $Z(G)=\Ker\Ad$．
\end{lemma}
\begin{proof}
    $g\in G$が$\forall_{h\in G}\;gh=hg$を満たすことと，$\forall_{h\in G}\;ghg^{-1}=h$を満たすこと，すなわち$\Ad(g)=\id_G$より$g\in\Ker\Ad$であることは同値である．
\end{proof}

\subsection{部分群の束}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    部分群の束の，meet, join，束の間の対応を使いこなせるようになりたい．
\end{tcolorbox}

\begin{lemma}\label{lemma-retraction-of-epi}
    $N\rsub G$として，
    $\pi:G\to G/N$を考える．任意の部分群$H\subgrp G$について，
    $\pi^{-1}(\pi(H))=HN=NH$．
    正規部分群の対応\ref{prop-correspondence-between-subgroup-lattices}参照．
    $NH$が正規とは限らない（第二同型定理\ref{cor-isomorphism-2}）．
\end{lemma}
\begin{proof}
    $N$で剰余を取るとは，任意の$h\in H,n\in N$について，$\pi(h)=\pi(hn)$，すなわち，
    $\pi(H)=\pi(HN)$ということであるから．
\end{proof}

\begin{lemma}\label{lemma-5}
    $G$と部分群$H,H'$について，次の２条件は同値．
    \begin{enumerate}
        \item $HH'$も部分群である．
        \item $HH'=H'H$．
    \end{enumerate}
\end{lemma}

\subsection{整数環の部分群の分類}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $\Z$はRingの始対象になる．実際，$\Z$-値点$\Z\to G$は，$G$の元を一つ選ぶことに等しい．
\end{tcolorbox}

\begin{proposition}\label{prop-Z-classification-of-subgroup}
    整数$n\ge 0$に対し，$n\Z$は$\Z$の部分群であり，$\Z$の部分群はこの形のものに尽きる．
\end{proposition}
\begin{proof}
    $n\Z$が$\Z$の部分群であることは，整数加法の代数法則から従う．

\end{proof}

\begin{proposition}[終対象ではないが，大域点として使える]\label{prop-characterization-of-additive-group-Z}
    任意の群$G\in\Grp$について，
    $\Hom_\Grp(\Z,G)\simeq U(G)$である．
\end{proposition}
\begin{proof}
    \[\xymatrix@R-2pc{
        F:\Hom_\Grp(\Z,G)\ar[r]&U(G)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        f\ar@{|->}[r]&f(1)
    }\]
    が集合の同型になっている．逆写像は
    \[\xymatrix@R-2pc{
        G:U(G)\ar[r]&\Hom_\Grp(\Z,G)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        g\ar@{|->}[r]&f_g:m\mapsto g^m
    }\]
    である．
\end{proof}
\begin{remarks}
    これは，自由関手$F:\Set\to\Grp$が，$\Set$の終対象$1\in\Set$をGrpに持ち上げているのか？
    Grpの終対象は$1=\{e\}$なのに．
\end{remarks}




\section{群作用と軌道分解：外算法の定める標準分解}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white, breakable ,colbacktitle=ForestGreen!40!white, coltitle=black,fonttitle=\bfseries\sffamily,
    title=]
    一般に群はある自由群からの全射準同型像なので必ず表示を持つが，それは一意的ではない．
    線型空間の理論と同様，「関係$R$」さえ，群としての表現：正規閉包を持つ．線型空間については，関係$R$は余核として定めた．
    これはいずれもSetの直交分解系(orthogonal factorization system)に由来するためである．

    正規部分群を内算法による軌道分解で定義したが，これを圏論的精神で一般化すると，核という概念は必然的に正規部分群の例となる．
    実際，正規部分群の逆像は正規部分群である．
\end{tcolorbox}

\subsection{作用の定義}

\begin{definition}[action of a group]\label{def-group-action}
    集合$X$への群$G$の作用とは，$X$上での表現$\act:G\to\Aut_\Grp(X)$をいう．
    あるいはSet特有の定式化としては\footnote{圏論的には，共役$\Ad:G\to\Aut(G)$やCayley表現同様に，表現で考える．群$G$の作用とは，群$G$の$X$上での表現$\rho:G\to\Aut(X)$のことである．
    すなわち関手$\rho:\B G\to C$のことであるが，
    特に$C=\Set$では写像$G\times X\to X$であって，関手性を満たすもののことをいう．}，このcurryingを直して，
    \begin{enumerate}
        \item 写像$*:G\times X\to X$が次の２条件を満たす時，これを\textbf{左作用}という．\begin{enumerate}
            \item $\forall_{x\in X}\;e*x=x$．
            \item $\forall_{g,h\in G}\;\forall_{x\in X}\;g*(h*x)=(gh)*x$．
        \end{enumerate}
        \item 写像$\star:X\times G\to X$が次の２条件を満たす時，これを\textbf{右作用}という．\footnote{Richard Borcherdsは$((s)(gh))=((s)g)h$と書いている．関数とは左作用なのであり，いつしか統一が図られたのみである．}
        \begin{enumerate}
            \item $\forall_{x\in X}\;x\star e=x$．
            \item $\forall_{g,h\in G}\;\forall_{x\in X}\;(x\star g)\star h=x\star (gh)$．
        \end{enumerate}
    \end{enumerate}
\end{definition}

\begin{lemma}[右作用を左作用に変換する反変対応]\label{lemma-group-action}\mbox{}
    \begin{enumerate}
        \item 任意の$g\in G$について，左移動$g_*:X\to X$は全単射である．すなわち，群準同型$\o{\act}:G\to\Aut(X)$が定まる．
        \item 右作用$\star:X\times G\to X$に対して，$g*x=x\star g^{-1}$と置くと，$*:G\times X\to X$は左作用を定める．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $(g^{-1})_*:G\to G$が逆射である．
        \item 群作用の２公理\ref{def-group-action}を満たす：
        \begin{enumerate}
            \item $e*x=x\star e^{-1}=x$．
            \item $g*(h*x)=g*(x\star h^{-1})=x\star h^{-1}\star g^{-1}=x\star(gh)^{-1}=(gh)*x$．
        \end{enumerate}
    \end{enumerate}
\end{proof}

\subsection{群作用の性質}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=群の乗法は正則な自己作用として特徴付けられる]
    固定$\pr_2$と群作用による移動$\rho$とを比べる機構が剪断写像である．
    群作用の性質はこの写像の性質で特徴付けられる．
\end{tcolorbox}

\begin{definition}[shear map]
    群作用$\rho:G\times X\to X$に対して，群の射
    \[\xymatrix@R-2pc{
            (\rho,\pr_2):G\times X\ar[r]&X\times X\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            (g,x)\ar@{|->}[r]&(\rho(g)(x),x)
    }\]
    を\textbf{剪断写像}という．
\end{definition}

\begin{definition}[proper, transitive, free, regular, faithful / effective]
    群作用$\rho:G\times X\to X$について，
    \begin{enumerate}
        \item 位相群の作用が\textbf{固有}であるとは，shear map $G\times X\to X\times X$がproperであることをいう．すなわち，全てのコンパクト集合の逆像はコンパクトである．
        \item $X\ne\emptyset$で軌道を１つしか持たないとき，すなわち$\forall_{x,y\in X}\;\exists_{g\in G}\;gx=y$を満たすとき，\textbf{推移的}であるという．すなわち，shear mapが全射である．
        \item $k\in\N$について，群作用が定める作用$G\times X^k\to X^k$が推移的であるとき，$k$-推移的であるという．
        \item $\forall_{x\in X}\;gx=x\Rightarrow g=e$が成り立つとき，\textbf{自由}であるという．すなわち，shear mapが単射である．
        \item 推移的かつ自由な群作用を\textbf{正則}という：$\forall_{x,y\in X}\;\exists!_{g\in G}\;gx=y$．すなわち，shear mapが全単射である．この時集合$X$を$G$-torserまたは主等質空間(principal homogeneous space)\footnote{明らかに束を意識した名前である．}という．
        \item $E$上の$G$-主束または$E$上の$G$-torsorとは，束$X\to E$のファイバー$X$に$G$が正則に作用している時をいう．
        \item 置換表現$\wt{\rho}:G\to\Aut(X)$が\textbf{忠実}であるとは，$\forall_{g,h\in G}\;g\ne h\Rightarrow[\exists_{x\in X}\;gx\ne hx]$．すなわち，置換表現$\wt{\rho}:G\to\Aut(X)$が単射であることをいう．このとき，作用は\textbf{効果的}であるという．
    \end{enumerate}
\end{definition}
\begin{example}\mbox{}
    \begin{enumerate}
        \item $\PSL_2(\C)$の$\hatC$への作用は3-transitiveである．
        \item 群の乗法$G\times G\to G$は正則で，$G$の正則表現という．つまり，群の乗法は正則な群作用として特徴付けられる．
        \item Hopf fibration $S^1\mono S^3\epi S^2$にて，$p\in S^2$の各fiberは大円になる．
    \end{enumerate}
\end{example}

\subsection{作用の定める表現(currying)}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    群準同型$G\to S_n=\Aut([n])$を作るには，$G\times[n]\to[n]$を作れば良い，これは線型空間の基底のようである．
    実際，群作用$G\times G\to G$は集合上の表現（置換表現とも言うらしい）$G\to\Aut_\Set(G)$を定める\ref{lemma-group-action}．
    置換表現といってもこのとき実は，基底の行き先が定まっていると見れば，$G$から$k$上自由生成される$k$-線型空間$V_G$上の線型写像も一つ定まっている．
    ということで，一般に「表現」と言った時は線型空間上のものを考えるのである．
    こうして，正規表現を加群とみなし，既約表現への分解の理論ができる．
    正則表現とは群の演算が定める作用が定める表現であるが，これは軌道がただ一つで安定化群が自明な集合上の表現として特徴付けられる．
    \footnote{\url{https://ja.wikipedia.org/wiki/正則表現_(数学)}}
\end{tcolorbox}

\begin{proposition}[群作用の定める準同型]\mbox{}
    \begin{enumerate}
        \item $g$に左作用を対応させる写像
        \[\xymatrix@R-2pc{
            \rho:G\ar[r]&\Aut(X)\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            g\ar@{|->}[r]&g_*
        }\]
        は準同型である．
        \item 準同型$\pi:G\to\Aut(X)$に対して，群作用を$(g,x)\mapsto\pi(g)(x)$と定めると，これは左作用である．
        \item $\act(G\times X,X)\simeq\Hom_\Grp(G,\Aut(X))$
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 補題\ref{lemma-group-action}より，確かに$g_*\in\Aut(G)$であることに注意．$X$の自己全単射として，$\rho(gh)=\rho(g)\circ\rho(h)\in\Aut(X)$より．
        \item 群作用の２公理\ref{def-group-action}を満たす：\begin{enumerate}
            \item $\pi(e)(x)=\id_X(x)=x$．
            \item 合成の定義より$\pi(g)(\pi(h)(x))=(\pi(g)\circ\pi(h))(x)$．$\pi$が群準同型だから，$(\pi(g)\circ\pi(h))(x)=\pi(gh)(x)$．
        \end{enumerate}
        \item (1),(2)で定めた対応は互いに逆写像である．
    \end{enumerate}
\end{proof}
\begin{remarks}
    テンソルっぽくもあり，基底や自由関手っぽくもある．$G\to S_n$を作るには，$G\times[n]\to[n]$を作れば良いのだから．
    これがCayley表現であるか．
\end{remarks}

\begin{proposition}[Cayley's theorem]
    任意の群$G$に対して，埋め込み$G\hookrightarrow\Aut(G)$が存在する．
\end{proposition}
\begin{proof}
    任意の群$G$の左からの乗法による自身への作用は正則であり、したがって忠実でもある：$G\to\Aut(G)$が単射である。
    従って、任意の群$G$はそれ自身の元上の対称群$\Aut(G)$に埋め込める．
\end{proof}

\subsection{作用の例}

\begin{example}[作用を作用に移す反変関手：正則表現]
    集合$X$への右作用$X\times G\to X$は，$X$上の関数の空間上に左作用を定める．
    \[\xymatrix@R-2pc{
        G\times\Map(X,\C)\ar[r]&\Map(X,\C)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        (g,f)\ar@{|->}[r]&g*f=f\circ g^*
    }\]
    これは，一番対称的な形だと$af(x)=f(xa)$というように，関数空間への（スカラーの）作用の持ち上げの一般論である．
    補題\ref{lemma-group-action}(2)と併せて$af(x)=f(xa)=f(a^{-1}x)$と考えると，これは共役の例でもあるのか．
\end{example}

\begin{example}[引数の置換]
    環$A$上の多項式環$A[x_1,\cdots,x_n]$に対して，作用
    \[\xymatrix@R-2pc{
        S_n\times A[x_1,\cdots,x_n]\ar[r]&A[x_1,\cdots,x_n]\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        (\sigma,f)\ar@{|->}[r]&(\sigma*f)(x_1,\cdots,x_n)=f(x_{\sigma(1)},\cdots,x_{\sigma(n)})
    }\]
\end{example}

\begin{example}[群の自身への作用（正則表現）]\label{example-regular-expression}
    群の自身への作用$\rho:G\times G\to G$は，$\rho:G\to\Aut(G)$と見れば，$G$の上または下に立つ射で，圏SetのHom集合の間に引き起こすもの，と見ることができる，これがcurryingである．
    射の合成と見ると，左移動は加速$\leftarrow$，右移動は衝突$\rightarrow$，共役は$\uparrow\uparrow$
    \begin{enumerate}
        \item 群$G$の自身への作用
        \[\xymatrix@R-2pc{
            G\times G\ar[r]&G\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            (g,h)\ar@{|->}[r]&g*h:=gh
        }\]
        を\textbf{左移動}と呼ぶ．
        \item 右作用$h\star g=hg$に対応する左作用は$g*h=hg^{-1}$で，これを\textbf{右移動}という．\footnote{${}^{-1}$は，左作用性の公理を満たすために必要．さもなくば，反変性$\rho(gh)=\rho(h)\circ\rho(g)$を帯びてしまう．}
        \item ２つを組み合わせたもの$(g,h)\mapsto ghg^{-1}$を\textbf{共役作用}という．これは内部自己同型$\Ad:G\hookrightarrow\Aut(G)$の定める群作用でもある．群の元が可換とは左移動と右移動が同じ結果を生むことであるから，右移動の左作用化と左移動の合成たる共役作用の言葉で特徴付けられるはずである．
        \item 共役作用の右作用版は，よく冪記法$x^g=g^{-1}xg$と表される．\footnote{exponential objectとcurryingはすごく近い．}
        \item 左移動と右移動（＝正則表現）は，置換表現として，軌道がただ一つで安定化群が自明である置換表現として特徴付けられる．
    \end{enumerate}
\end{example}

\begin{example}[Kleinの四元群]\label{exp-Klein-four-group}
    巡回群でない４元群が存在し，この２つで位数４の群は尽きる．
    巡回群ではない最も小さい群である．
    \begin{align*}
        f_1&:=x_1x_4+x_2x_3,&f_2&:=x_2x_4+x_1x_3,&f_3&:=x_3x_4+x_1x_2,\in\Z[x_1,x_2,x_3,x_4]
    \end{align*}
    と定めて，この対称群の引数の置換による作用のこの三元集合への制限$S_4\acts\{f_1,f_2,f_3\}$を考えると，$\forall_{\sigma\in S_4}\;\forall_{i\in[3]}\;\sigma(f_i)\in\{f_1,f_2,f_3\}$が成り立つからwell-defined．
    したがって，群準同型$\phi:S_4\to S_3$が定まるが，これは全射となり，$f_1,f_2,f_3$を不変に保つ置換の仕方は全部で$V:=\Ker\phi=\{e,(1\;2)(3\;4),(1\;3)(2\;4),(1\;4)(2\;3)\}$である．これをKleinの四元群という．
    \begin{proposition}[Kleinの四元群]\mbox{}
        \begin{enumerate}
            \item $V$は準同型$\phi:S_4\to S_3$の核なので正規である．
            \item $V$はAbel群である．
            \item $\forall_{\sigma\in V}\;\sigma^2=e$．
            \item \[\xymatrix@R-2pc{
                \Z/2\Z\times\Z/2\Z\ar[r]&V\\
                \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
                (\o{0},\o{0})\ar@{|->}[r]&e\\
                (\o{1},\o{0})\ar@{|->}[r]&(1\;2)(3\;4)\\
                (\o{0},\o{1})\ar@{|->}[r]&(1\;3)(2\;4)\\
                (\o{1},\o{1})\ar@{|->}[r]&(1\;4)(2\;3)
            }\]
            は可逆である．
        \end{enumerate}
    \end{proposition}
\end{example}

\subsection{安定化群と軌道と軌道分解}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    群作用$G\times X\to X$が定まっていると，標準的な分解が存在する．
    flowなどの概念の萌芽で，演算を加法として線型空間を考えると「軌道」という感覚がわかりやすい．各剰余類は$a+N$と表せる．
\end{tcolorbox}

\begin{definition}[stabilizer group / isotopy group, orbit through a point]
    $G\times X\to X$を左作用とし，これが定める群準同型を$\rho:G\to\Aut(X)$をとする．
    \begin{enumerate}
        \item $x$を動かさない$X$自己同型を定める群$G$の元の集まり$\Stab_G(x):=\{g\in G\mid gx=x\}$は$G$-部分群であるが，一般に正規ではない．\footnote{$G_x$という記法も用いられるが軌道と紛らわしい．この軌道の本質は，不動点の全体を$X^G$と表すならば（群コホモロジー），余不変式の空間は$X_G$となるべき（群ホモロジー），というものである．これは$X$が$G$-加群である場合などを考えている．}
        これを\textbf{$G$-安定化群}と呼ぶ．
        \item $x$が$G$の元が定める自己同型で動く範囲$Gx:=\{gx\mid g\in G\}=\Im(\ev_x\circ\rho)$を$x$を通る$G$-軌道という．\footnote{$G\xrightarrow{\rho}\Aut(X)\xrightarrow{\ev_x}X$}
        \item $G\backslash X:=\{Gx\mid x\in X\}$を$X$の$G$による商と呼ぶ．右作用の場合は$X/G$で表す．
    \end{enumerate}
\end{definition}

\begin{lemma}\label{lemma-quotient-welldifinedness}\mbox{}
    \begin{enumerate}
        \item $x,x'\in X$について，次の３条件は同値である．\begin{enumerate}[(a)]
            \item $x'\in Gx$．
            \item $Gx\cap Gx'\ne\emptyset$．
            \item $Gx=Gx'$．
        \end{enumerate}
        \item 上の関係を$x\sim_Gx'$で表すと，これは同値関係であり，これについての$x$の同値類は$Gx$に等しい．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{description}
            \item[(a)$\Rightarrow$(b)] \begin{align*}
                (a)\;x'\in Gx&\Leftrightarrow \exists_{g\in G}\;x'=gx\\
                &\Leftrightarrow \exists_{g\in G}\;g^{-1}x'=x\Leftrightarrow x\in Gx'
            \end{align*}
            と$x'\in Gx'$より，$\{x'\}\subset Gx\cap Gx'\ne\emptyset$．
            \item[(b)$\Rightarrow$(c)] $x''\in Gx\cap Gx'$のとき，$\exists_{g,g'\in G}\;gx=x''=g'x'$．
            \begin{align*}
                y\in Gx&\Leftrightarrow \exists_{h\in G}\;y=hx\\
                &\Leftrightarrow \exists_{h\in G}\;y=hg^{-1}g'x'\\
                &\Leftrightarrow y\in Gx'
            \end{align*}
            \item[(c)$\Rightarrow$(a)] $Gx=Gx'$ならば特に$Gx\supset Gx'\ni x'$より．
        \end{description}
        \item (a)$\Rightarrow$(b)の証明で対称性は示した，(c)より推移的である．
    \end{enumerate}
\end{proof}
\begin{remarks}\label{remarks-軌道の特徴付け}
    左移動の定める同値関係が$xG=yG\Leftrightarrow xy^{-1}\in G$
\end{remarks}

\begin{theorem}[軌道分解]\label{thm-orbit-decomposition}
    左作用$G\times X\to X$に対して，軌道分解$X=\coprod_{Gx\in G\backslash X}G_x$が存在する．
\end{theorem}
\begin{proof}
    補題\ref{lemma-quotient-welldifinedness}(2)による類別から従う．
\end{proof}

\subsection{軌道分解の例}

\begin{example}\mbox{}
    \begin{enumerate}
        \item $O_2(\R)\acts\R^2$の軌道分解は$\R^2=\coprod_{r\ge 0}\{(x,y)\in\R^2\mid x^2+y^2=r^2\}$．
        \item $\GL_2(\R)\acts\R^2$の軌道分解は$\R^2=\{(0,0)\}\coprod(\R^2\setminus\{(0,0)\})$である．
        \item 作用
        \[\xymatrix@R-2pc{
            (\GL_m(\C)\times\GL_n(\C))\times M_{mn}(\C)\ar[r]&M_{mn}(\C)\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            (g,h,X)\ar@{|->}[r]&gXh^{-1}
        }\]
        の軌道は$M_{mn}(\C)=\coprod_{0\le r\le\min(m,n)}\{X\in M_{mn}(\C)\mid \rank X=r\}$．この商集合の完全代表系は，階数標準形である．
    \end{enumerate}
\end{example}

\section{群への作用の研究：内算法特論}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=半直積同様，自己言及させた時が一番深い]
    部分群$H$について潰す$H\backslash G$は，$H$が一点となって抽象化される．
    では他の点はどうなるかというと，軌道という概念が登場する．
    これを一度調べて，新たな集合$H\backslash G$が群になる条件を捉える．
    群では指数という特徴量が定まるのは，その射の可逆性＝方程式の解の一意性による．
\end{tcolorbox}

\subsection{剰余類分解：内算法による軌道分解}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
    title=内算法による軌道分解]
    部分群$H$に対して，軌道$\{Hg\}_{g\in G}$として右剰余類を得る．
    これは同値関係$a\sim b:\Leftrightarrow ab^{-1}\in H$としても定義でき（補題\ref{lemma-quotient-welldifinedness}，
    $\abs{H}$個の軌道に分解され，これを$G\setminus H$で表す．
    一般の圏ではcoequalizerである．
    \[\xymatrix@1{
        H\times G\ar@/^/[r]^-{\pr_2}\ar@/_/[r]_-{\cdot}&G
    }\]
    同様に左剰余類もequalizerとして考えられるが，これは左作用と右作用の間の双対性として理解できる．
    双対性があるならば，これを綜合する双写像があるはずであり，これを共役作用と呼ぶ．
    そして左右の差を議論する大事な言葉となるはずで，正規性の特徴付けになって然るべきである．
\end{tcolorbox}

\begin{definition}[right coset, left coset]
    $G$を群，$H\subset G$をその部分群とする．
    \begin{enumerate}
        \item $G$の$G$への左移動による作用（群乗法）を$H$に制限したもの$H\times G\to G$の軌道分解を$H\setminus G$と表し，この元を\textbf{$G$の$H$による右剰余類}という．
        \item これは，同値関係$a\sim b:\Leftrightarrow ab^{-1}\in H$による類別$H\backslash G$である．補題\ref{lemma-quotient-welldifinedness}より，$Ha=Hb\Leftrightarrow a\in Hb\Leftrightarrow ab^{-1}\in H$．\footnote{右側の元につく${}^{-1}$が，右に残った剰余の痕である．}
    \end{enumerate}
\end{definition}

\begin{proposition}[左右双対性]
    \[G/H\simeq_\Set H\backslash G.\]
\end{proposition}
\begin{proof}
    群準同型を
    \[\xymatrix@R-2pc{
        \varphi:H\backslash G\ar[r]&G/H&\psi:G/H\ar[r]&H\backslash G\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        Hg\ar@{|->}[r]&g^{-1}H&gH\ar@{|->}[r]&Hg^{-1}
    }\]
    と定めると，これは互いに逆写像であるから，あとはこれらの写像がwell-definedであること，
    すなわち$\forall_{g,g'\in G}\;Hg=Hg'\Rightarrow g^{-1}H=g'^{-1}H$を示せば良い．
    これは補題\ref{lemma-quotient-welldifinedness}から従う．
    $Hg=Hg'\Leftrightarrow g'\in Hg\Leftrightarrow \exists_{h\in H}\; g'=hg$と仮定すると，
    $g'^{-1}=g^{-1}h^{-1}\in g^{-1}H\Leftrightarrow g'^{-1}H=g^{-1}H$が従う．
\end{proof}

\begin{definition}[index]\mbox{}
    \begin{enumerate}
        \item $\abs{H\backslash G}<\infty\Leftrightarrow\abs{G/H}<\infty$のとき，部分群$H$は指数有限であるという．
        \item 部分群$H$が指数有限であるとき，$\abs{H\backslash G}=:(G:H)\in\N$と書き，$G$の$H$に於ける\textbf{指数}という．
    \end{enumerate}
\end{definition}

\begin{theorem}[剰余類分解]\label{thm-coset-decomposition}
    $G$を群，$H$をその部分群とする．
    \begin{enumerate}
        \item $G=\coprod_{Hg\in H\backslash G}Hg$である．
        \item $G=\coprod_{gH\in H/G}gH$である．
    \end{enumerate}
\end{theorem}
\begin{proof}
    軌道分解\ref{thm-orbit-decomposition}の特別な場合である．
\end{proof}

\subsection{有限群の部分群の研究}

\begin{theorem}[部分群の位数：Lagrange's theorem]\label{thm-Lagrange}
    $H$を$G$の部分群とする．
    $\frac{\abs{G}}{\abs{H}}=\abs{G/H}=\abs{H\backslash G}$．
\end{theorem}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 群準同型
        \[\xymatrix@R-2pc{
            \varphi_g:H\ar[r]&Hg\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            h\ar@{|->}[r]&hg
        }\]
        は逆写像$\varphi_{g^{-1}}:Hg\to H$を持つから，特に$\abs{H}=\abs{Hg}$である．
        \item 右剰余類分解\ref{thm-coset-decomposition}$G=\coprod_{Hg\in H\backslash G}Hg$より，$\abs{G}=\abs{H\setminus G}\abs{H}$．
        \item $\abs{H}>0$より，$\frac{\abs{G}}{\abs{H}}=\abs{H\backslash G}$．
    \end{enumerate}
\end{proof}

\begin{corollary}\label{cor-Lagrange}
    $G$を有限群とする．任意の元$g\in G$は位数有限であり，その位数は$\abs{G}$の約数である．
\end{corollary}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $\bracket{g}\subset G$と補題\ref{lemma-order-of-element-and-subspace}より，$g$は位数有限である．
        \item Lagrangeの定理\ref{thm-Lagrange}より，$\abs{G}=\abs{\bracket{g}}\abs{G/\bracket{g}}$だから．
    \end{enumerate}
\end{proof}

\begin{corollary}\label{cor-prime-order-then-cyclic}
    有限群$G$の位数$p$が素数ならば，$G$は巡回群であり，特にAbel群である．
\end{corollary}
\begin{proof}
    位数$p$が素数だから，$g\in G\setminus\{e\}$を満たす元$g$が取れる．これについて$\bracket{g}=G$を示す．（すると，補題\ref{lemma-cyclic-then-Abel}よりAbel群である．）
    $\brac{g}\subsetneq G$と仮定して矛盾を示す．Lagrangeの定理\ref{thm-Lagrange}より，$\abs{G}=\abs{\bracket{g}}\abs{G/\bracket{g}}$だが，
    $\abs{G}$が素数で$\abs{\brac{g}}<\abs{G}$より，$\abs{\brac{g}}=1$が必要だが，これは$\{e,g\}\subset\brac{g}$に矛盾．
\end{proof}

\begin{corollary}[Fermat's minor theorem]
    $p$を素数とする．$x\not\equiv 0\mod p\Rightarrow x^{p-1}\equiv 1\mod p$．
\end{corollary}
\begin{proof}
    乗法群$(\Z/p\Z)^\times$は位数$p-1$の巡回群であるため．
    \footnote{$a$倍写像は単射であるため．}
\end{proof}

\subsection{軌道と安定化群：作用の像と核の関係}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=作用に対する準同型定理]
    $x$の軌道$Gx$は，$x$の安定化群による剰余類$G/\Stab_G(x)$と同型である．
    なぜだ．おそらく作用$\rho:G\to\Aut(G)$についての準同型定理の先にある消息である．
    ある意味で局所と大域のフラクタル構造がある気がする．
    少なくとも，像である軌道よりも，核である安定化群の方が，内部化されていて記述しやすい．
    特に$gx=g'x\Leftrightarrow g\Stab_G(x)=g'\Stab_G(x)$．
\end{tcolorbox}

\begin{proposition}[orbit stabilizer theorem]\label{prop-orbit-and-stabilizer}
    $G\times X\to X$を群作用とする．
    \begin{enumerate}
        \item 写像
        \[\xymatrix@R-2pc{
            \varphi:G/\Stab_G(x)\ar[r]^-{\sim}&Gx\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            g\Stab_G(x)\ar@{|->}[r]&gx
        }\]
        は可逆である．
        \item 特に$G$が有限群のとき，$\abs{Gx}=\frac{\abs{G}}{\abs{\Stab_G(x)}}$．\footnote{像より核の方が扱いやすいという基本的な非対称性がある．}
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[well-definedness] 写像として定まっていること：$g\Stab_G(x)=g'\Stab_G(x)\Rightarrow gx=g'x$を示す．前件の下では$g'\in g\Stab_G(x)$すなわち$\exists_{h\in\Stab_G(x)}\;g'=gh$であるが（補題\ref{lemma-quotient-welldifinedness}），$gh^{-1}=g'$より，$gh^{-1}x=gx=g'x$．
        \item[全射性] $g\Stab_G(x)\in\varphi^{-1}(gx)$である．
        \item[単射性] $gx=g'x$とする．$g'h\in g'\Stab_G(x)$について$(g'h)x=g'x=gx$より$g'h\in g\Stab_G(x)$であり，逆も言えるから，$g\Stab_G(x)=g'\Stab_G(x)$．
    \end{description}
    (2)は，Lagrangeの定理\ref{thm-Lagrange}より，$\frac{\abs{G}}{\abs{\Stab_G(x)}}=\abs{G/\Stab_G(x)}=\abs{Gx}$．
\end{proof}
\begin{remarks}
    結局，$gx=g'x\Leftrightarrow g\Stab_G(x)=g'\Stab_G(x)$となるのが肝であった．
\end{remarks}

\subsection{共役作用と類等式}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=共役作用の定める軌道分解を共役類分解といい，推移的作用が定める集合の同型を類等式という]
    左移動と右移動とを１つの写像の中に組み合わせて同型としたものが共役作用である．
    中心とは，内部自己同型で動かない元がなす「核」である（実際$Z(G)=\Ker\Ad:G\mono\Aut_\Grp(G)$）．したがって中心は正規である．
    したがって，アーベル群では内部自己同型の群は自明である．

    集合$X$に群$G$が推移的に作用しているとき，その$x$に関する$G$-軌道からの全射$Gx\epi X$について，関係$G/\Stab_G(x)\simeq_\Set X$が成り立つ．推移的作用$\rho:G\times X\to X$で$\rho(-,x):G\epi X$と固定したとき，左剰余類$g\Stab_G(x)\subset G$は$x$を押し並べて$\rho(g)(x)$に写すためである．
    すると，この関係を用いて，軌道分解の完全代表系を見つければ$X$の濃度の$G$の位数による表現が求まる．
    特に$X$も群である場合が重要であるから，特に
    共役類分解について類等式が立てられる．
\end{tcolorbox}
\footnote{双対性があるならば，これを綜合する双写像があるはずであり，これを共役作用と呼ぶ．
これは随伴と呼ぶべき，自然に定まる射である．
するとこれは他の作用同様，自然な軌道分解を$G$の上に定めているはずである．
そして左右の差を議論する大事な言葉となるはずで，正規性の特徴付けになって然るべきである．
こうして中心という概念が出てくる．中心の各元は単独で共役類をなす．
非可換群において，その共役類の構造を研究するのが基本的な手法となる．
例えば$p$群と呼ばれる非可換群の中心は一発でわかる．Sylowの定理もその延長線上である．}

\begin{definition}[conjugation action]
    $\Ad:G\to\Aut_\Grp(G);g\mapsto\Ad(g):h\mapsto ghg^{-1}$を共役作用という．
\end{definition}
\begin{remark}[adjoint action, similarity transformation]\mbox{}
    \begin{enumerate}
        \item 随伴作用とは，Lie群など，別の圏から$\Aut_\Grp(G)$へと表現という形で共役によって作用することをいうようであり，
        そのとき$h\mapsto g^{-1}hg$と書くことも多いのはなぜだろか．
        \item また，相似変換(similarity transformation)は$B\mapsto S^{-1}AS$をいう．
        この共役類分解は，線型写像と考えられる．すなわち，相似変換は基底変換を通じて，相互に同じ線型写像を表現していると捉えられる．
        これが自己同型であるから，たくさんの線型写像の圏論的性質を保つ．
    \end{enumerate}
\end{remark}

\begin{definition}[centralizer, conjugacy class]
    共役作用$\Ad:G\mono\Aut_\Grp(G)$について．
    \begin{enumerate}
        \item 共役作用の安定化群$Z_G(g):=\Stab_G(g)=\{h\in G\mid hgh^{-1}=g\}$を特に\textbf{中心化群}という．
        \item $g$のAd軌道$Gg=\{hgh^{-1}\mid h\in G\}$を共役類といい，その元は$g$と共役であるという．\footnote{conjugate subgroupという考え方があって，共役類分割が結構粗いものになる．なぜなら，$H_1\sim H_2\Leftrightarrow H_2=\Ad(g)(H_1)$による同値類である．}
    \end{enumerate}
\end{definition}

\begin{example}[共役類は可換でない要素を括り出す位相である]\mbox{}
    \begin{enumerate}
        \item $e\in G$の共役類は$\{e\}$である．Adによって他に写りようがないからである．
        \item Abel群では，任意の共役類は一元集合である．「共役類で割るとAbel群を得る」は間違っていない．
    \end{enumerate}
\end{example}

\begin{proposition}[class equation]
    $\{g_1,\cdots,g_n\}$を群$G$の共役類の完全代表系とする．
    \[\abs{G}=\sum^n_{i=1}\frac{\abs{G}}{\abs{Z_G(g_i)}}.\]
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 軌道分解\ref{thm-orbit-decomposition}より，$G=\coprod_{i=1}^m\{hg_ih^{-1}\mid h\in G\}$である．
        \item 軌道-安定化群の関係\ref{prop-orbit-and-stabilizer}より，$\frac{\abs{G}}{\Stab_G(x)}=\frac{\abs{G}}{Z_G(x)}\abs{\{hg_ih\mid h\in G\}}=\abs{Gx}$．
    \end{enumerate}
\end{proof}
\begin{remarks}
    共役類分割には，特に安定化群による見方をして（軌道と安定化群の関係\ref{prop-orbit-and-stabilizer}），
    特別な名前が，方程式の方についている．
    これは整数の構造に仮託するためだろうか．
    これは元の位数によって（それよりは粗いが）分類していると見れるのではないのか？
\end{remarks}

\begin{lemma}[共役の代数的本質]
    $h$を$g$と共役な元とする．$g$と$h$の位数は等しい．
\end{lemma}
\begin{proof}
    $k\in G$が存在して$h=kgk^{-1}$の関係にあるとき，任意の自然数$n\in\N$について，$h^n=e$と$g^n=e$は同値である．
    $h^n=(kgk^{-1})^n=kg^nk^{-1}$または$g^n=(k^{-1}hk)^n=k^{-1}h^nk$より，$g^n=e\Rightarrow h^n=e$で，$h^n=e\Rightarrow g^n=e$である．
\end{proof}

\begin{example}[$S_3$の類等式]\label{exp-class-equation-of-S3}
    $\sigma,\tau\in S_3$について．
    \begin{enumerate}
        \item $\sigma$の中心化群について，巡回群は可換なので$\brac{\sigma}=\{e,\sigma,\sigma^2\}\subset Z_{S_3}(\sigma)$であるが，$\tau\sigma\ne\sigma\tau$より$\tau\notin Z_{S_3}(\sigma)$だから，$Z_{S_3}(\sigma)=\{e,\sigma,\sigma^2\}$であることは確かめられる．が，共役類は全通り計算するしかない．しかし関係$\frac{\abs{S_3}}{\abs{Z_{S_3}(\sigma)}}=2$より，$\sigma$の共役類の大きさは$2$で，\textbf{元の位数は$\sigma$と等しく$3$であるから}，$\{\sigma,\sigma^2\}$とわかる．
        \item 続いて，同様にして$Z_{S_3}(\tau)=\brac{\tau}=\{e,\tau\}$より，共役類の大きさは３で，$\{\tau,\sigma\tau,\sigma^2\tau\}$．
    \end{enumerate}
    この場合も，共役類をそのまま探すのではなくて，命題\ref{prop-orbit-and-stabilizer}によって，
    安定化群として探す方が得策である．
\end{example}

\begin{tbox}{red}{}
    共役な元の位数が等しいとは，共役類は巡回群にはなり得ないということか？
\end{tbox}

\subsection{中心と正規部分群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    共役自己同型の核$Z(G):=\Ker\Ad:G\to\Aut_\Grp(G)$を中心とする．
    すると，動かされる側として見ても任意の元の定める共役移動について不変というわけだから，中心の元は単独で共役類をなす．
    中心が全体に等しい場合$Z(G)=G$をアーベル群という．
    また$\Ad:G\to\Aut_\Grp(G)$についての準同型定理より，これによる商群は，内部自己同型群の間に同型を定める：$G/\Ker\Ad\simeq\Im\Ad\Lrarrow G/Z(G)\simeq\mathrm{InAut}(G)$．
\end{tcolorbox}

\begin{definition}[characteristic group, center / zentrum]\mbox{}
    \begin{enumerate}
        \item 正規部分群とは，全ての内部自己同型の下で不変な部分群をいう：$\forall_{g\in G}\;Ad(g)(N)=N$．
        \item 特性部分群とは，全ての自己同型の下で不変な部分群をいう．交換子部分群や中心がその例である．
    \end{enumerate}
    $Z(G):=\cap_{g\in G}Z_G(g)=\Ker\Ad$を中心という．定義から，常に正規な部分群となり，特性的である．
\end{definition}

\begin{lemma}\label{lemma-group-of-inner-isomorphism}
    $G/Z(G)$は内部自己同型群と同型である．
\end{lemma}

\begin{example}[中心]\label{exp-center}\mbox{}
    \begin{enumerate}
        \item $Z(\GL_n(\C))=\C I_n$．線型空間$V$上の射影一般線形群とは，$\PSL(V)=\GL(V)/Z(V)$である．特に$\PGL_2(\C)\simeq\Aut(\hatC)$．
        \item $Z(D_n)=\begin{cases}
            \{e\},&nが奇数のとき,\\
            \{e,\sigma^{n/2}\},&nが偶数のとき.
        \end{cases}$
        \item $Z(S_n)=\{e\}\;(n\ge 3)$である．$S_2$はAbel群なので，$Z(S_2)=S_2$．
    \end{enumerate}
\end{example}

\begin{proposition}[$p$-群の中心は非自明である]\label{prop-zentrum-of-primary-group-is-trivial}
    $G$を有限な$p$群，すなわち，位数が$p$の冪であるような有限群とする．$G$が自明でないならば，$G$の中心$Z(G)$も自明でない．
\end{proposition}
\begin{proof}
    類別の完全代表系$(g_i)$による類等式$\abs{G}=\sum^m_{i=1}\frac{\abs{G}}{\abs{Z_G(g_i)}}$を考える．
    一般の状況下で，$g_i\in Z(G)\Leftrightarrow Z_G(g_i)=G\Leftrightarrow\frac{\abs{G}}{\abs{Z_G(g_i)}}=1$であるから，$g_i\notin Z(G)\Leftrightarrow\frac{\abs{G}}{\abs{Z_G(g_i)}}\ne 1$．
    $G$が$p$群のとき，中心に入らない元$g_i\in G\setminus Z(G)$について，$\frac{\abs{G}}{\abs{Z_G(g_i)}}=mp\;\exists_{m\ge 1}$である．
    すなわち，類等式は$\abs{G}=\abs{Z(G)}+pn\;\exists_{n\ge 1}$の形であるから，$\abs{Z(G)}$も$p$の倍数であり，特に$1$でない．
\end{proof}


\section{正規部分群と剰余群：左右のズレの検出}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=群構造が商集合上に持ち上がる時：共役類の概念と部分群の概念を合流させる]
    部分群からなる内部構造が退化している群を単純群という．
    正規部分群とは内部自己同型$\Ad(n,-)$が不変に保つ軸のようなものである．

    これは左右の剰余類が一致するための必要十分条件であるので，これについて軌道分解をすると良い．
    ある部分集合$A\subset G$が，部分群$H\subset G$の右剰余類でありかつ左剰余類であるとは，$\forall_{a\in A}A=Ha=aH$．
    よって，部分群$H$が$\forall_{a\in G}Ha=aH$を初めから満たしていたら，右剰余類と左剰余類は一致する．
    これは$a^{-1}Ha=H$に同値．実は$a^{-1}Ha\subset H$に同値．
    実は，左右の剰余類が一致するのはこの場合に限る．
    なぜならば，正規部分群$N$の任意の右剰余類は$Na$と表せるが，$Na=aN$であるからである．

    任意の剰余類$Na,Nb$について，$(Na)(Nb)=NNab=Nab$より，新たな剰余類を得る．
    こうして，群構造は商集合$G/\sim$上に持ち上がる．
\end{tcolorbox}

\subsection{正規性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=正規性とは何か]
    部分群の正規性は圏論的概念なのだろうか．つまり，全ての正規部分群は何かの全射の核になる，など．
    さもなくば，像関手に対して保たれるなどの関手的な性質を持つはずがない．
    
    どうやらcongruence relationと関連がある．\footnote{\url{https://ncatlab.org/nlab/show/normal+subgroup}}
    "The coequalizer of a congruence is called a quotient object."
\end{tcolorbox}

\begin{definition}[normal subgroup, simple group]
    $G$を群，$N\subset G$を部分群とする．
    \begin{enumerate}
        \item 部分群$N$が$\forall_{g\in G}\; gNg^{-1}\subset N$を満たすとき，\footnote{$gH=Hg\Leftrightarrow gHg^{-1}=H\Leftrightarrow gHg^{-1}\subset H$に注意．条件$\forall_{g\in G}\;gHg^{-1}\subset H$単独でも，$g^{-1}$も$G$上を走るから（${}^{-1}:G\to G$が可逆），$H\subset gHg^{-1}$が復元できる．}
        $N$は\textbf{正規}または\textbf{不変}であるという．\footnote{すなわち，$N\subset\Ad(-)(N)$を満たす安定部分空間である．}
        \item $G$が$G,\{e\}$以外に正規な部分群を持たないとき，$G$を\textbf{単純}であるという．
    \end{enumerate}
\end{definition}
\begin{lemma}[正規性のイメージ]
    $N\rsub G$とする．このとき，$N$は$G$の共役類のいくつかの合併として表せる．
\end{lemma}
\begin{remarks}
    \textbf{部分群$N$が共役類に分割できることを正規という}．
    この共役類分割が$G/N$であるはず．ここの関係が難しい．
    Abel群はいわば共役類に関する離散位相で，任意の部分集合は共役類の合併だから，
    Abel群の任意の部分群は正規である．
    Abel化\ref{lemma-commutator-subgroup}とは，交換子部分群という特殊な正規部分群について割ることで，離散位相を作る行為である．
    ここに位相的な，集合代数的構造がある．
\end{remarks}
\begin{remark}[characteristic group]
    全ての内部自己同型$\varphi\in\In(G)$に対して不変$\varphi(N)=N$な部分群が正規部分群である．
    より一般に，全ての自己同型$\varphi\in\Aut(G)$に対して不変な部分群を\textbf{特性部分群}と呼ぶ．
    交換子部分群と群の中心は特性部分群である．
\end{remark}

\begin{proposition}[核は正規]
    準同型$f:G\to G'$について，$\Ker f\subset G$は正規部分群である．
\end{proposition}
\begin{proof}
    任意の$g\in G,h\in\Ker f$に対して$f(ghg^{-1})=f(g)ef(g)^{-1}=e$だから，$G\Ker fG^{-1}\subset\Ker f$である．
\end{proof}
\begin{remarks}\label{exp-normal-subgroup-of-S3}
    よって$A_n\subset S_n$は指数２の正規部分群である．
\end{remarks}

\begin{proposition}[像は正規性を保つ：正規性は圏論的に特徴付けられる消息である]\label{prop-image-functor-preserve-regularity}
    $H\rsub G$のとき，任意の全射$f:G\to G'$について，$f(H)\rsub G'$．（一般の準同型$f$について，$f(H)\rsub\Im f$と言ってもいい）．
\end{proposition}
\begin{proof}
    任意に$g\in G'$をとる．$gHg^{-1}\subset H$より，$f(gHg^{-1})=f(g)f(H)f(g)^{-1}\subset f(H)$．$f(g)\in G'$が$G'$全体を走るとき，$f(H)$も正規である．\footnote{$\forall_{g\in H}\;g^{-1}f(N)g\subset f(N)$を示せば良い．任意に$h\in f(N)$をとる．
    $f$は全射だから，$g'\in G,h'\in N$が存在して，$f(g')=g,f(h')=h$を満たす．
    $f(g'^{-1}h'g')=f(g')^{-1}f(h')f(g')=g^{-1}hg\in f(N)$である．}
\end{proof}

\subsection{剰余群とその普遍性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    正規部分群は右剰余類と左剰余類が一致するから，$G/N$上に演算がwell-definedに定まる．こうして出来た
    商群は普遍性を満たし，部分群については商位相と同様の性質を満たす．
    正規部分群は，共役類から見たら，まさに開集合である．
    \textbf{より高級な代数系では，剰余を取る際にこのような議論の必要がないところが興味深い}．
\end{tcolorbox}

\begin{theorem}[quotient group]
    $H\triangleleft G$を正規部分群とする．
    \begin{enumerate}
        \item \[\xymatrix@R-2pc{
            G/H\times G/H\ar[r]&G/H\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            (gH,g'H)\ar@{|->}[r]&(gg')H
        }\]
        は群の演算を定め，$G/H$はこの演算について群をなす．
        \item \[\xymatrix@R-2pc{
            \pi:G\ar[r]&G/H\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            g\ar@{|->}[r]&gH
        }\]
        は群の全射準同型であり，$\Ker\pi=H$である．
    \end{enumerate}
\end{theorem}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{description}
            \item[well-definedness] $g_1H=h_1H,g_2H=h_2H\Rightarrow g_1g_2H=h_1h_2H$を示す．仮定の$g_1H\subset h_1H,g_2H\subset h_2H$部より$\exists_{h,h'}\;g_1h=h_1,g_2h'h_2$であるから，$h_1h_2=g_1hg_2h'=g_1g_2\underbrace{(g_2^{-1}hg_2)}_{\in H}h'$より，$h_1h_2H\subset g_1g_2H$である．仮定の残りの仮定の$g_1H\supset h_1H,g_2H\supset h_2H$部から，逆も言える．
            \item[群の公理] $H$が単位元，$g^{-1}H$の逆元が$gH$である．結合律も満たす．
        \end{description}
        \item \begin{description}
            \item[functority] $\pi(g_1g_2)=g_1g_2H=(g_1H)\cdot(g_2H)=\pi(g_1)\pi(g_2)$．
            \item[kernel] 補題\ref{lemma-quotient-welldifinedness}より，$g\in\Ker\pi\Leftrightarrow gH=H\Leftrightarrow g\in H$より．
            \item[全射性] $\forall_{g\in G}\;g\in\pi^{-1}(gH)$．
        \end{description}
    \end{enumerate}
\end{proof}

\begin{proposition}[universality]\label{prop-universality-of-quotient-group}
    $H\triangleleft G$を正規部分群とし，群準同型$f:G\to G'$は$H\subset\Ker f$を満たすとする．
    このとき，次の図式を可換にする準同型$\o{f}:G/H\to G'$がただ一つ存在する：
    \[\xymatrix{
        G\ar[r]^-{f}\ar@{->>}[d]_-{\pi}&G'\\
        G/H\ar@{.>}[ur]_-{\o{f}}
    }\]
    すなわち，$\Hom_\Grp(G/H,G')\simeq\{f\in\Hom_\Grp(G,G')\mid H\subset\Ker f\}$．
\end{proposition}
\begin{proof}
    \[\xymatrix@R-2pc{
        \o{f}:G/H\ar[r]&G'\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        xH\ar@{|->}[r]&f(x)
    }\]
    と定めると，
    \begin{description}
        \item[well-definedness] $xH=x'H\Rightarrow\exists_{h\in H}\;x=x'h\Rightarrow f(x'h)=f(x')f(h)=f(x')=f(x)$であり，
        \item[functority] $\o{f}(xHyH)=\o{f}(xyH)=f(xy)=f(x)f(y)=\o{f}(xH)\o{f}(yH)$より，群準同型であり，
        \item[適格性] $f=\o{f}\circ\pi$を満たす：$f(x)=\o{f}(\pi(x))=\o{f}(xH)=x$．
        \item[一意性] また，$f=\o{f}\circ\pi=g\circ\pi$とすると，$\pi$の全射性から$g=\o{f}$が従う．
    \end{description}
\end{proof}

\begin{corollary}[巡回群からの射]\label{cor-morphism-from-cyclic-group}
    任意の$n\in\N$について，
    $\Hom_\Grp(\Z/n\Z,G)\simeq\{g\in G\mid g^n=e\}$．
\end{corollary}
\begin{proof}
    命題\ref{prop-characterization-of-additive-group-Z}より，群準同型
    \[\xymatrix@R-2pc{
        U(G)\ar[r]^-{\varphi}&\Hom_\Grp(\Z,G)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        g\ar@{|->}[r]&f_g:n\mapsto g^n
    }\]
    は可逆なのであった．剰余群の普遍性\ref{prop-universality-of-quotient-group}より，
    \[\Hom_\Grp(\Z/n\Z,G)\simeq\{g\in\Hom_\Grp(\Z,G)\mid g(n\N)=\{e\}\}\]
    である．すなわち，$\{g\in G\mid g^ne\}$とも全単射がある．\footnote{$n=0$の時もこの議論は成り立っている．}
\end{proof}

\subsection{正規部分群の対応}

\begin{proposition}[正規部分群の対応]\label{prop-correspondence-between-subgroup-lattices}
    $N\triangleleft G$を正規部分群とする．
    \begin{enumerate}
        \item 包含関係を保つ全単射が存在する：$\{H\in P(G)\mid N\mono H\mono G\}\simeq_\Pos\{H\in P(G/N)\mid H\mono G/N\}$．\footnote{subgroup latticeの射があるともいう．}
        \item 特に，この同型によって，$G$の正規部分群で$N$を含むものと，$G/N$の正規部分群が対応する．すなわち，$\pi^*,\pi_*$は部分群の正規性を保つ．\footnote{像も逆像も基本は正規性を保つ．}
    \end{enumerate}
\end{proposition}
\begin{proof}
    \[\xymatrix{
        H \ar@{^{(}->}[r]^-{i}\ar@{->>}[d]_-{\pi}&G \ar@{->>}[d]^-{\pi}\\
        H/N\ar@{.>}[r]^-i&G/N
    }\]
    \begin{enumerate}
        \item 商写像$\pi$の定める２つのHom集合間の写像$\Hom_\Grp(H,G)\to\Hom_\Grp(H/N,G/N),\Hom_\Grp(H/N,G/N)\to\Hom_\Grp(H,G)$が引き起こす写像（像写像と逆像写像）
        \[\xymatrix@R-2pc{
            \pi_*:\{H\in P(G)\mid N\subset HはGの部分群\}\ar[r]&\{H\in P(G/N)\mid HはG/Nの部分群\}\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            H\ar@{|->}[r]&\pi(H)=H/N
        }\]\[\xymatrix@R-2pc{
            \pi^*:\{H\in P(G/N)\mid HはG/Nの部分群\}\ar[r]&\{H\in P(G)\mid N\subset HはGの部分群\}\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            H\ar@{|->}[r]&\pi^{-1}(H)\supset\pi^{-1}(e)=N
        }\]が互いに逆写像であることを示す．$\pi$が全射であることより，$\pi(\pi^{-1}(H))=H$．
        $g\in\pi^{-1}(\pi(H))\Leftrightarrow gH\in\pi(H)\Leftrightarrow g\in H$より，$\pi^{-1}(\pi(H))=H$．
        $\pi^*,\pi_*$はいずれも像写像・逆像写像なので，順序もたもつ．
        \item $N\subset H\triangleleft G\Rightarrow\pi(H)\triangleleft G/N$については，$\forall_{gN\in G/N}\;gN\pi(H)(gN)^{-1}=\pi(g)\pi(H)\pi(g^{-1})=\pi(gHg^{-1})=\pi(H)$より．
        $H'\triangleright G/N\Rightarrow\pi^{-1}(H')\triangleleft G$は$\forall_{g\in G}g\pi^{-1}(H')g^{-1}=\pi^{-1}(gNH'g^{-1}N)=\pi^{-1}(H)$より．\footnote{もう一つ全称量化子$\forall_{h\in H}$が一番外側にあるが，記法$gHg^{-1}$を用いて簡略化してしまった．}
    \end{enumerate}
\end{proof}

\section{準同型定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    \begin{enumerate}
        \item 第一同型定理は「群の圏が正規エピ–モノ分解可能、すなわち正規エピ射のクラスとモノ射のクラスはこの圏の標準分解系 (factorization system) をなす」という圏論的事実に基づく。\footnote{射がnormalとは，正規部分群のように，他の対象のKerを表していると考えられる射のことをいう．}
        第一同型定理は，短完全列$0\mono\Ker f\mono G\epi G/\Ker\epi 0$の存在を主張しているとも捉えられる．
        \item 第二同型定理は，部分群束の，結びと$N$の関係は，交わりと$H$の関係に等しいことを主張している．
        \item 第三同型定理は9項補題によってアーベル圏やより一般の対象の間の写像に一般化される。それはときどき略式的に "freshman theorem" と呼ばれる、なぜならば "freshman でさえわかるからだ：$N$たちをキャンセルアウトするだけでよい！"
        まるで約分である$\frac{G}{H}\simeq\frac{G/N}{H/N}$．
        環に対する定理のステートメントも同様であり、正規部分群の概念がイデアルの概念に取って代わる。
    \end{enumerate}
    第二，第三同型定理に共通することは，可逆射の基点は必ず正規部分群になることである．
    正規部分群を中心に回転する．normalとは，完全列のnormalな射が刺さっているということが大事なんだろうと思う．
    こう見ると割ることの本質は比を取ることなんだろうなと思う．「どういう拡大か」．
    Galoisのespritが普遍している．
\end{tcolorbox}

\subsection{準同型定理}

\begin{theorem}\label{thm-homomorphism}
    準同型写像$f:G\to G'$は，標準的な同型$\o{f}$を引き起こす：
    \[\xymatrix{
        G\ar[r]^-f\ar[d]_-{\pi}&G'\\
        G/\Ker f\ar@{.>}[r]^-{\o{f}}&\Im f\ar[u]_-i
    }\]
\end{theorem}
\begin{proof}\mbox{}
    \begin{description}
        \item[構成] 核の定義より$f(\Ker f)=\{e'\}$であるから，剰余群の普遍性\ref{prop-universality-of-quotient-group}より，次を可換にする準同型$\o{f}:G/\Ker f\to G'$がただ一つ存在する．\[\xymatrix{
            G\ar[r]^-f\ar[d]_-\pi&G'\\
            G/\Ker f\ar[ur]_-{\o{f}}
        }\]
        \item[成功] $\o{f}$は単射である．実際，任意に取った$g\Ker f\in\Ker\o{f}$に対して，$\o{f}(g\Ker f)=e'$を満たすということは$\o{f}(\pi(g))=f(g)=e'$すなわち$g\in\Ker f$ということだから，$g\Ker f=\Ker f$が従う．つまり，$\Ker\o{f}=\{\Ker f\}$であることがわかる．よって，$\o{f}:G/Ker\to f(G')$は全単射であるから，命題\ref{prop-Grp-is-balanced}より，$\o{f}$は同型である．
    \end{description}
\end{proof}

\begin{example}[circle group]\mbox{}\label{example-circle-group}
    \begin{enumerate}
        \item \[\xymatrix{
            \GL_n(A)\ar[r]^-{\det}\ar[d]_-{\pi}&A^\times\\
            \GL_n(A)/\SL_n(A)\ar@{.>}[ur]_-{\o{\det}}
        }\]
        \item $SO_2(\R)$は$\theta\in[0,2\pi)$回転に限る．
        \[\xymatrix{
            \R\ar[r]^-{R(2\pi\theta)}\ar[d]_-{\pi}&\GL_2(\R)\\
            \R/\Z\ar@{.>}[r]&SO_2(\R)\ar[u]_-i
        }\]
        加えてユニタリ群$U(1)$にも同型．短完全列$0\to\Z\to\R\to\T\to 0$がある．
        円群$\T$へのアーベル群からの射$A\to\T$を（乗法的）指標という．
        そして，$\Aut(U(1))\simeq\Z_2$というのは複素共役に関係があるだろう．
        \item $n\ge 2$のとき，
        \[\xymatrix{
            S_n\ar[r]^-{\sgn}\ar[d]_-{\pi}&\{\pm 1\}\\
            S_n/A_n\ar@{.>}[ur]
        }\]
    \end{enumerate}
\end{example}

\begin{corollary}[第二同型定理]\label{cor-isomorphism-2}
    $H\subset G$を部分群，$N\triangleleft G$を正規部分群とする．
    このとき，
    \begin{enumerate}
        \item $HN$は部分群であり，
        \item $H\cap N\triangleleft H$であり，
        \item 次の同型が定まる：
    \end{enumerate}
    \[\xymatrix{
        H\;\ar@{^{(}->}[r]^-{i}\ar@{->>}[d]_-{\pi}&HN\ar[d]^-\pi\\
        H/(H\cap N)\ar@{.>}[r]&HN/N
    }\]
\end{corollary}
\begin{proof}\mbox{}
    \begin{description}
        \item[$HN$は部分群] 任意に$n_1h_1,n_2h_2\in NH$を取ると，$n_1^{-1}h_1^{-1}n_2h_2=n_1^{-1}\underbrace{h_1^{-1}n_2h_1}_{\in N}h_1^{-1}h_2\in NH$より，部分群の特徴付け\ref{prop-characterization-of-subgroup}から．
        \item[$H\cap N\triangleleft H$] $\forall_{g\in G}\; gN=Ng$ならば，$\forall_{h\in H}\;h(H\cap N)=(H\cap N)h$である．
        \item[準同型定理] \[\xymatrix@R-2pc{
            f:N\;\ar@{^{(}->}[r]&HN\ar@{->>}[r]&HN/N\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            h\ar@{|->}[r]&hN\ar@{|->}[r]&h
        }\]
        は全射である．また，$\Ker f=H\cap N$である．よって，
        これについて，準同型定理\ref{thm-homomorphism}より．
    \end{description}
\end{proof}
\begin{remarks}
    これは，次のような包含写像のなす部分群の束について，２つの赤い射は同じ「成長度」であることをいう．$N,H$の間に包含写像はあってもなくても成り立つ．
    $NH$は結びで，$N\cap H$は交わりである．
    \[\xymatrix{
        &G\\
        &HN\ar[u]\\
        N\ar@[red][ur]&&H\ar[ul]\\
        &N\cap H\ar[ul]\ar@[red][ur]\\
        &\{e\}\ar[u]
    }\]
\end{remarks}

\begin{corollary}[第三同型定理]
    $N\triangleleft G,H\triangleleft G$を$N\subset H$を満たす２つの正規部分群とする．
    このとき，$H/N\triangleleft G/N$であり，
    \[\xymatrix{
        G\ar@{->>}[d]_-{\pi}\ar@{->>}[r]&G/N\ar@{->>}[d]^-{\pi}\\
        G/H\ar@{.>}[r]&(G/N)(H/N)
    }\]
\end{corollary}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $N\subset H$より，全射$\pi:G\epi G/N$の像が$\pi(H)=H/N$である．全射の正規性保存命題\ref{prop-image-functor-preserve-regularity}より，$H/N$は正規．
        \item $\Ker f=\pi^{-1}(H/N)=H$より，準同型定理\ref{thm-homomorphism}より，$G/H\iso(G/N)/(H/N)$が存在する．
        \[\xymatrix{
            G\ar@{->>}[d]_-{\pi}\ar@{->>}[r]\ar@[red][dr]^-f&G/N\ar@{->>}[d]^-{\pi}\\
            G/H\ar@{.>}[r]&(G/N)(H/N)
        }\]
    \end{enumerate}
\end{proof}
\begin{remarks}
    正規部分群周りの群構造は，それぞれをより小さい正規部分群$N$で割ってみても保たれる．
\end{remarks}

\subsection{巡回群の分類}

\begin{theorem}\label{thm-classification-of-cyclic-groups}
    $G$を巡回群とする．
    \begin{enumerate}
        \item $G$が有限ならば，$n:=\abs{G}\in\N$について，$G\simeq\Z/n\Z$である．
        \item $G$が無限ならば，$G\simeq\Z/0\Z=\Z$．
    \end{enumerate}
\end{theorem}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 生成元を$G=\brac{g}$とする．対応する$\Z$-値点$f:\Z\to G$（命題\ref{prop-characterization-of-additive-group-Z}）について，$\Im f=\brac{g}=G$．部分群$\Ker\subset\Z$について命題\ref{prop-Z-classification-of-subgroup}より，$\exists_{n'\in\Z}\;\Ker f=n'\Z$．準同型定理より，$\Z/n'\Z\iso G$．
        \item $G$が有限のとき，$\abs{G}=n=n'=\abs{\Z/n'\Z}$をえる．$G$が無限群のとき，$\Z/n'\Z$も無限群であるから，$n'=0$がわかる．
    \end{enumerate}
\end{proof}

\section{群の表示}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=generators and relations]
    一般の群を，自由群の商として捉える試みである．
    商写像ばかりだ．商写像による理論である．
    代数の極みのように，形式性が増す．
    数を代するという営みだと考えれば，本質的には基礎論的になるのも然りである．
\end{tcolorbox}

\begin{example}[$S_3$の表示]\label{exp-presentation-of-S3}
    生成元$X=\{x,y\}$と関係式$R=\{[xxx],[yy],[xyxy]\}$は群$S_3$の表示を与える．
    \begin{proof}\mbox{}
        \begin{enumerate}
            \item 自由群の普遍性より，$\o{f}:F_x\epi S_3$が定まる．全射性は，$S_3=\brac{\Im f}=\brac{\sigma,\tau}$からわかる．
            \item $R$の構成は$R=\Ker\o{f}$を表しているが，これを構造的帰納法的に追うよりも，次のように議論することもできる．$\o{f}([xxx])=\sigma^3=e,\i{f}([yy])=\tau^2=e,\o{f}([xyxy])=\sigma\tau\sigma\tau=e$より，$R\Ker\o{f}$であり，$\Ker\o{f}$は正規であるから，$\brac{R}_\nor\subset\Ker\o{f}$．
            こうして全射準同型$\wt{f}:F_X/\brac{R}_\nor\epi S_3$がただ一つ存在する．
            \item $F_X/\brac{R}_\nor$の元としては，$\sigma:=\pi([x]),\tau:=\pi([y])$とすると，$\tau^a\sigma^b\;(a=0,1,2,b=0,1)$と言う６元しか存在しないから，全射$\wt{f}:F_X/\brac{R}_\nor\epi S_3$は単射であることが必要．すなわち，$S_3\simeq F_X/\brac{R}_\nor$．
        \end{enumerate}
    \end{proof}
\end{example}

\begin{example}[$D_n$の表示]
    二面体群$D_n$について，生成元$X=\{\sigma,\tau\}$と関係式$R=\{[\sigma^n],[\tau^2],[\sigma\tau\sigma\tau^{-1}]\}$は群$D_n$の表示を与える．
    つまり，写像
    \[\xymatrix@R-2pc{
        \varphi:F_X\ar[r]&D_n\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        \sigma\ar@{|->}[r]&\sigma\\
        \tau\ar@{|->}[r]&\tau
    }\]
    は全射で，$\Ker\varphi=\brac{\sigma^n,\tau^2,\tau\sigma\tau^{-1}\sigma}_\nor$であるから，準同型定理より$F_X/\brac{R}_\nor\simeq D_n$．
\end{example}

\subsection{自由群}

\begin{definition}[word]
    \begin{enumerate}
        \item $X^{-1}:=\{x^{-1}\mid x\in X\}$に対して，$X\cup X^{-1}$の有限列を語という．
        \item $*:W\times W\mapsto W$を結合という．
        \item 縮約$W\mapsto W$を，語$(a_i)\in W$について$a_{i+1}=a_i^{-1}$が成り立っていたとき，この２文字を取り除く操作として定める．これ以上縮約できない語を縮約的という．
        \item 同値関係$W\sim W'$を，次を満たす縮約列$(W_i)_{i\in n}$が存在することと定める：$W_0=W,W_n=W',\forall_{i\in n}\;W_{i+1}$は$W_i$の縮約であるか，$W_i$は$W_{i+1}$の縮約である．
        \item この同値関係についての同値類を$[W]$と書き，${}^{>\omega}\!(X\cup X^{-1})$の商集合を$F_X$と書く．
        \item 標準単射$\iota_X:X\to F_X$が定まる．
    \end{enumerate}
\end{definition}

\begin{lemma}[free group]
    $(F_X,*,{}^{-1})$は群をなす．
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[well-definedness] $W_1\sim W'_1,W_2\sim W'_2$とする．同じような縮約を課せば良いから，$W_1*W_2\sim W'_1\sim W'_2$である．
        \item[結合律] 文字の結合は結合的である．
        \item[単位元] $[\empty]$は結合について中立的である．
        \item[逆元] $W=a_1\cdots a_n$のとき，$[a_n^{-1}\cdots a_1^{-1}]$は逆元である．
    \end{description}
\end{proof}

\begin{lemma}\label{lemma-free-group-in-terms-of-generation}
    $F_X$は$\Im\iota$で生成される．
\end{lemma}
\begin{proof}
    $F_X\subset\brac{\iota_X(X)}$を示せば良い．
    これは$F_X$の作り方についての構造的帰納法から従う．
\end{proof}

\subsection{自由群の普遍性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    自由群から群への写像を構成するには，$n$元の行き先を定めることに同値．
    線型空間とは，体上に自由生成された加群である．

    すごく基礎論的だし，lambda計算っぽい．
\end{tcolorbox}

\begin{proposition}[universality of free group]\label{prop-universality-of-free-group}
    群$G$への写像$f:X\to G$に対して，次をSet上可換にする群準同型$\o{f}:F_X\to G$がただ一つ存在する：
    \[\xymatrix{
        X\ar[r]^-f\ar[d]_-{\iota_X}&G\\
        U(F_X)\ar@{.>}[ur]_-{U(\o{f})}
    }\]
\end{proposition}
\begin{proof}
    $F_X$の作り方についての構造的帰納法から従う．
    \begin{enumerate}
        \item $f:X\to G$は$f:X\cup X^{-1}\to G$に延長する．
        \item $\wt{f}:{}^{>\omega}\!(X\cup X^{-1})\to G$に延長する．
        \item 一意性：
    \end{enumerate}
\end{proof}

\begin{corollary}
    $\Z\sim F_1$．
\end{corollary}
\begin{remarks}
    普遍性のみから，数学的対象の同型類が指定できる．
    このようにして，代数は定義に戻らないことが大事になる．
    これが表現可能関手の一般理論につながる．
\end{remarks}

\begin{proposition}[生成の特徴付け]\label{prop-characterization-of-generated-subgroup}
    $X\subset G$を部分集合とする．包含写像$i:X\mono G$が定める準同型$\o{i}:F_X\mono G$の像は，$X$が生成する部分群$\brac{X}$である．
    特に$X$が生成系であることは，$\o{i}:F_X\epi G$が全射であることに同値．
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[$\Im\o{i}\supset\brac{X}$] $\o{i}$は$i$の延長だから，$\Im\o{i}(X)\supset i(X)=X$より，$\Im\o{i}\supset\brac{X}$．
        \item[$\Im\o{i}\subset\brac{X}$] $\Im\o{i}$の元は$i(X)$の元の結合または逆のみからなるから，$\Im\o{i}\subset\brac{X}$でもある．
    \end{description}
\end{proof}
\begin{remarks}
    この最小性，閉性が，自由群構成の妙である．
\end{remarks}

\begin{proposition}[自由群の完全代表系]\mbox{}
    \begin{enumerate}
        \item $W$を語，$W',W''$を縮約的な語とする．$W\sim W'\land W\sim W''$ならば，$W'=W''$である．
        \item $W\sim W'$とする．このとき，$W\sim W'',W'\sim W''$を満たす語$W''$が存在する．\footnote{結びみたいなものである．}
        \item $W,W'$を相異なる縮約的な語とする．このとき，$W,W'$は同値でない．
    \end{enumerate}
\end{proposition}

\subsection{生成系と関係式による表示}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $X$が全ての可能な計算列を与え，$R$が計算規則を縮約に仮託した形で与える．
\end{tcolorbox}

\begin{definition}[generators and relations]
    $R\subset F_X$を部分集合とする．$F_X$の正規部分群であって，$R$を含む最小のものを$\brac{R}_\nor$と表す．
    これによる剰余群$F_X/\brac{R}_\nor$を，\textbf{生成系$X$と関係式$R$によって定まる群}と呼ぶ．
\end{definition}

\begin{proposition}[representation]
    $G$を群とする．
    \begin{enumerate}
        \item 集合$X$とその部分集合$R\subset F_X$であって，$G\simeq F_X/\brac{R}_\nor$を満たすものが存在する．
        \item $G$が有限群のとき，$X,R$は有限にとれる．
    \end{enumerate}
\end{proposition}
\begin{proof}
    $X:=\{x_g\mid g\in G\},R=\{[x_gx_hx_{gh}^{-1}]\mid g,h\in G\}$とすると，集合の同型$\varphi:X\iso G$が存在する．
    $G':=F_X/\brac{R}_\nor$とし，$[x_g]\in F_X$の$\pi:F_X\to F_X/\brac{R}_\nor$による像を$y_g:=\pi([x_g])$と表すこととする．
    補題\ref{lemma-free-group-in-terms-of-generation}より，$F_X=\brac{\iota_X(X)}$だから，$S:=\pi(\iota_X(X))=\{y_g\mid g\in G\}$とすると，$G'=\pi(F_X)=\pi(\brac{\iota(X)})=\brac{S}$を満たす．最後の等号は群準同型$\pi:F_X\epi F_X/\brac{R}_\nor$の関手性．
    \begin{enumerate}
        \item $G'=S$である．$G'\subset\brac{S}$が構成よりわかる．\footnote{命題\ref{prop-characterization-of-generated-subgroup}のような妙義．}
        \item $G\simeq G'$である．\[\xymatrix{
            X\ar[d]_-{\iota}\ar[r]^-{\varphi}&G\\
            F_X\ar[ur]^-{\wt{\varphi}}\ar[r]^-{\pi}&F_X/\brac{R}_\nor=:G'\ar@{.>}[u]_-{\o{\varphi}}
        }\]
        まず自由群の普遍性\ref{prop-universality-of-free-group}より，
        群準同型$\wt{\varphi}:F_X\epi G$が存在し，これは$\varphi$が同型であることより全射である．
        構成より$R\subset\Ker\wt{\varphi}$を満たすから，剰余群の普遍性\ref{prop-universality-of-quotient-group}より，群準同型$\o{\varphi}:G'\to G$が定まる．
        いま，定め方より$\o{\varphi}$は全単射である．実際，
        任意の$g\in G$に対して，$\o{\varphi}(y_g)=\varphi([x_g])=g$より全射．$[y_g]\in\Ker\o{\varphi}$ならば，$e=\o{\varphi}([y_g])=g$より，$y_g=y_e=e\in G'$より，$\Ker\o{\varphi}=\{e\}$より単射．
        \item 上記の構成は，$\abs{G}<\infty$のとき，$X,R$は有限である．
    \end{enumerate}
\end{proof}

\section{Abel群論}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=Abel群とAbelian category]
    任意のAbel群は$\Z$上の加群をみなすことができ($\Z\Mod\simeq\Ab$)，２つの「捩れ」の定義が一致する．
    Abel群を扱う上でのエッセンス（アーベル圏に昇華される）の全てが詰まった定理．
    だが，単因子論の知識があるとそちらにもすぐに帰着するらしい．
    \begin{enumerate}
        \item 有限アーベル群は$e$を中心に有限位数の元が回転している，よってこれをいくつかの周回道に分解できるというのがアーベル群の構造定理である（結果分解の仕方によって，位数に依存してアーベル群の数を数えられる）．
        \item Abel群を射影子を用いて分解する：$e\circ e=e\Rightarrow\Im(e)\oplus\Ker(e)$．特に，$i:N\mono M$は$N$が正規である時は分解は$M\simeq N\times M/N$と表せ，Abel群の分解はこの場合に当たる．
        \item まず$p$-群への分解が解る，これは一般固有空間分解に当たる．元の位数$n$から素因数$p|n$を乱択していくと，$n=p^mn'$を用いて世界を最大周期$p^m$の軌道とそれ以外に分ける射影子が取れる．
        \item 最終的に$p$-群の形を決定するには，射影子を構成するのに入射加群の技術が要るのみである．$p$-群の任意の元は正規部分群を生成するが，$i:\brac{x_0}\mono M$はいつでも同型$\brac{x_0}\iso\Z/p^m\Z$とその延長の対応を用いて引き戻せる．
    \end{enumerate}
\end{tcolorbox}

\begin{theorem}[fundamental theorem of finitely generated abelian groups]\label{thm-fundamental-theorem-of-finite-abelian-groups}
    任意の有限生成アーベル群$A$は，巡回群$\Z/p^k\Z\;(p\in\P,k\in\N)$とその極限としての$\Z$との直積に同型である：
    \[A\simeq \Z^n\oplus\bigoplus_i\Z/p_i^{k_i}\Z\]
\end{theorem}

\subsection{射影子による$p$群への分解}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=idempotent morphismによる分解]
    アーベル群は部分群について，その内部と，それ自信を抽象化した外部とで完全に分離でき，群の間の言葉で言えば直積になる．
    それを検出するのが射影子であり，包含写像の引き戻しとして探せる．
    なぜならば，$r:A\to B,s:B\to A$であって，$r\circ s=\id_B,s\circ r=e$を満たすとき(この条件をみたす$e$をsplit idempotentといい，$(r,s)$をretractという)，$e\circ e=(s\circ r)\circ(s\circ r)=s\circ r=e$が成り立つから，splitnessの検出に帰着する．
    射影子は圏論の技法で，$e\cdot e=e$というsquare to itselfを満たすならば，射が「落とす情報」と「落とさない情報」により，$\Im e\oplus\Ker e$に分解する（様な圏が重要になる）．\footnote{Accordingly, one is interested in those categories for which every idempotent is split. These are called idempotent complete categories or Cauchy complete categories.\url{https://ncatlab.org/nlab/show/idempotent}}
    即ち，なにかしらの直和対象からの射影$p$に対して，包含射が続く様なもの$i\circ p$が射影子の特徴づけである．
    この理論には莫大な応用があると思ったら，圏論的な視点だけでなく，射影は解析学全体（函数解析学，数値解析）に通底するトピックだと気づいた．
\end{tcolorbox}

\begin{lemma}[アーベル群の分解（射影子のアーベル群に対する場合の特徴付け）]\label{lemma-decomposition-by-projector}
    $M$をアーベル群，$N\subset M$を部分群とする．
    $i:N\mono M$を包含写像とする．
    $i$の引き戻し$r$が存在するならば，すなわち，
    $f|_N=\id_N$を満たす群準同型$f:M\to N$が存在するならば，
    $M\simeq N\times M/N$である．
\end{lemma}
\begin{proof}
    $\phi:=(f,\pi):M\to N\times M/N$とすると，これが可逆であることを示せば良い．
    \begin{description}
        \item[単射性] 任意の$m\in M$について， \begin{align*}
            \phi(m)=0&\Lrarrow f(m)=0\land \pi(m)=0\\
            &\Lrarrow (m=0\lor m\in M\setminus N)\land(m\in N)\\
            &\Lrarrow m=0.
        \end{align*}
        \item[全射性]
        任意の$(n,x)\in N\times M/N$について，$\pi:M\epi M/N$は全射だから，
        $m\in\pi^{-1}(x)$が取れる．これについて，$\phi(m)=(f(m),x)$であるが，もし$f(m)\notin N$ならば，$m':=m-f(m)+n$とすると，$f(m)\in N$なので，
        $\pi(m')=\pi(m)-\pi(f(m))+n=m-0+0$であり，かつ，$f(m')=f(m)-f(f(m))+f(n)=f(m)-f(m)+n=n$より，$m'\in \phi^{-1}(n,x)$．
    \end{description}
\end{proof}
\begin{remarks}[射影子の一般化]
    この$f$とは何か？
    確かに$f\circ f=f$を満たすな！吸収律とは，「情報をある自然な方法に従って裁断し，それ以外には変化を加えない」写像を特定するのに用いられる代数法則である．
    $M=M_1\times M_2,N=M_1\times\{0\}$とすると，$M=M_1\times M_2\simeq N\times M/N$であり，$i:N\mono M$には切断$f:M\to N$が存在して$f|_N=\id_N$である．
    これを，群が直積に分解できる場合の特徴付けとして用いている．

    余核とはどう違うのか．
    半直積との双対性は何か．
\end{remarks}
\begin{remarks}[直観]
    $f:M\to N$で$f|_N=\id_N$を満たすものは，$M/N$の部分の扱いに困る．全てを$e$に対応させることはできない．
    実際，ある$m\in M\setminus N$について$f(m)=e$だとすると，勝手に取った$n\in N$について，$nm\notin N$であるが，$f(nm)=f(n)f(m)=n$が必要．つまり，$M$の$N$についてのそれぞれの剰余類を，$N$に重ねる必要がある．
\end{remarks}

\begin{lemma}[$p$-群への分解]\label{lemma-decomposition-into-p-group}
    $M$をAbel群とする．次の２条件を満たす有限Abel群$M_1,\cdots,M_r$と素数$p_1,\cdots,p_r$と整数$m_1,\cdots,m_r\ge 0$が存在する：
    \begin{enumerate}
        \item $\forall_{1\le i\le r}\;\forall_{x\in M_i}\;p_i^{m_i}x=0$．
        \item $M\simeq M_1\times\cdots\times M_r$．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[方針] $n:=\abs{M}$についての帰納法で示す．$n=1$の時は$r=1$とすれば$M=M_1=1$で，$p_1=2,m_1=0$などとすれば良い．そこで，$n>1$の場合を考える．
        \item[$p$-群の抽出] $x_0\in M\setminus\{0\}$が取れる．この位数$n_0>1$を割り切る素数$p$が取れる．これらに対して$x_0:=\frac{n_0}{p}x_0$と定め直すことにより，元$x\in M\setminus\{0\}$を位数$p$の元だと考えて良い．
        
        すると，Lagrangeの定理\ref{cor-Lagrange}より
        $p|n$であるから，整数$m\ge 1$と$p$と互いに素な整数$n'\ge 1$とが存在して$n=n'p^m$を満たす．
        $N:=\{x\in M\mid p^mx=0\}$と置くと，これは$M$の部分群となる．
        \item[分解]
        ここで，$\exists_{a,b\in\Z}\;n'a+p^mb=1$即ち$n'=\frac{1-p^mb}{a}$であるから，これを用いて準同型を
        \[\xymatrix@R-2pc{
            f:M\ar[r]&M\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            x\ar@{|->}[r]&n'ax
        }\]
        と定める．
        これは，
        \begin{enumerate}
            \item $p^m(n'ax)=p^m(1-p^mb)x=0-0=0$より$\Im f\subset N$で，
            \item $x\in N$に対して，$f(x)=n'ax=(1-p^mb)x=x-0=x$を満たす
        \end{enumerate}
        から，補題より，分解$M\simeq N\times M/N$を引き起こす．
        
        いま，少なくとも$x_0(\ne 0)\in N$より$\{0\}\subsetneq N$であるから，$\abs{N/M}<n$．
        帰納法の仮定から，分解は続く．
    \end{description}
\end{proof}
\begin{remarks}
    $n$の因数分解をしている．
    $\abs{M}>1$を満たすAbel群$M$について，位数$p$の元$x$を選べる．
    これについて，周期が$p$の冪である元を集めてくると，これに対する射影子が見つかるので，分解することがわかる．
    この算譜は最後まで繰り返せる．
\end{remarks}

\subsection{入射的対象による$p$群の分解}

\begin{lemma}[$p$-群の分解]\label{lemma-decomposition-of-p-group}
    $M$を有限アーベル群とし，$N$をその部分群とする．
    \begin{enumerate}
        \item 任意の準同型$f:N\to\Q/\Z$は，包含写像$i:N\mono M$についての延長$\o{f}:M\to\Q/\Z$が存在する：
        \[\xymatrix{
            N\ar[r]^-f \ar@{^{(}->}[d]&\Q/\Z\\
            M\ar@{.>}[ur]_-{\o{f}}
        }\]
        \item 特に，$p$を素数，$m\ge 0$を整数とし，$\forall_{x\in M}\;p^mx=0$とする（群$M$は$p$-群）．
        このとき，任意の準同型$f:N\to\Z/p^m\Z$に対して，準同型$\o{f}:M\to\Z/p^m\Z$であって，$\o{f}|_N=f$を満たすものが存在する．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] 同型（$p$-進小数表示）\footnote{$\Z/p^m\Z$とは，位数$p^m$の巡回群であるが，これを$p^m$を分母にもつ真分数からなる群と考えても同一視できる，という話である．確かに，周期$p^m$の群は分母$p^m$の分数の世界で考えるのも直感的．}
        \[\xymatrix@R-2pc{
            \Z/p^m\Z\ar[r]^-\sim&p^{-m}\Z/\Z\subset\Q/\Z\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            n+p^m\Z\ar@{|->}[r]&p^{-m}n+\Z
        }\]
        が存在するから，準同型$f:N\to p^{-m}\Z/\Z$について示せば良い．射$N\xrightarrow{f}p^{-m}\Z/\Z\mono\Q/\Z$に(1)を用いることにより，延長$\o{f}:M\to\Q/\Z$を得る．
        \[\xymatrix{
            N\ar[r]^-f \ar@{^{(}->}[d]_-i&p^{-m}\Z/\Z \ar@{^{(}->}[r]^-{i}&\Q/\Z\\
            M\ar@{.>}[urr]_-{\o{f}}
        }\]
        ここで，任意の$x\in M$について，$p^m\o{f}(x)=\o{f}(p^mx)=\o{f}(0)=0$より，$x\in p^{-m}\Z/\Z=\Brace{y\in\Q/\Z\mid p^my=0}$．\footnote{つまり，$p^{-m}\Z/\Z=\{y\in\Q\mid p^my\in\Z\}$}
        よって，$\Im\o{f}\subset p^{-m}\Z/\Z$だから，$\o{f}|_N=f$を満たす準同型$\o{f}:M\to p^{-m}\Z/\Z$が定まった．
        \item[(1) Step1：$M=\Z$のとき]
        部分群は$\exists_{n\in\N}\;N=n\Z$と表せる（命題\ref{prop-Z-classification-of-subgroup}）．
        $n=0$の時は，$\o{f}=0$とすれば良い．$n>0$の時は，$f(n)=r+\Z$となる$r\in\Q$を用いて，$\o{f}(m)=\frac{rm}{n}+\Z$と定めれば良い．\footnote{$f$が$[n]$を$\Q/Z$のどこに写すかわからないが，これを基準として目盛りを細分すれば，$\Z\to\Q/\Z$を１つ得る．射$n\Z\to\Q/\Z$はまさに，$[0,1]$の繰り返しとしての数直線に附ける目盛りである．}
        \[\xymatrix{
            n\Z\ar[r]^-f \ar@{^{(}->}[d]_-i&\Q/\Z\\
            \Z\ar@{.>}[ur]_-{\o{f}}
        }\]
        \item[Step2：$M$が巡回群のとき]
        生成元を$M=:\brac{x}$とおくと，全射準同型
        \[\xymatrix@R-2pc{
            \phi:\Z\ar[r]&M\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            n\ar@{|->}[r]&nx
        }\]
        が定まる．
        \begin{enumerate}
            \item 
            $f$を$\Z$の部分群$\phi^{-1}(N)$から伸ばした射$f\circ\phi|_{\phi^{-1}(N)}:\phi^{-1}(N)\epi^\phi N\xrightarrow{f}\Q/\Z$について，上述の議論より，延長$F:\Z\to\Q/\Z$で$F|_{\phi^{-1}(N)}=f\circ\phi$を満たすものが存在する．
            \[\xymatrix{
                \Ker\phi=\phi^{-1}(0) \;\ar@{^{(}->}[r]\ar@{-->}[d]_-{\phi}&\phi^{-1}(N) \;\ar@{^{(}->}[r]\ar@{-->}[d]_-{\phi}&\Z\ar@{->>}[r]\ar@{->>}[d]^-\phi\ar@{-->}[ddl]_(.2)F&\Z/\Ker\phi\ar[dl]^-{\o{\phi}}\ar@/^3pc/@{-->}[ddll]^-{\o{F}}\\
                \{0\} \;\ar@{^{(}->}[r]&N \;\ar@{^{(}->}[r]^(.3)i\ar[d]_-f&M\ar@{.>}[dl]^-{\o{f}}\\
                &\Q/\Z
            }\]
            \item この$F$について，$F|_{\Ker\phi}=(f\circ\phi)|_{\Ker\phi}=0$であるから，$\Ker\phi\subset\Ker F$で，剰余群の普遍性\ref{prop-universality-of-quotient-group}より，
            $\o{F}:\Z/\Ker\phi\to\Q/\Z$が定まる．
            \item これに，準同型定理\ref{thm-homomorphism}による同型$\o{\phi}:\Z/\Ker\phi\iso M$の逆を合成して$\o{f}:=\o{F}\circ\o{\phi}^{-1}:M\to\Q/\Z$とすると，これは図式を可換にするから，条件$\o{f}|_N=f$を満たす．
        \end{enumerate}
        \item[Step3：$M$が一般の群のとき]
        次の図式を可換にする群と準同型の組$(N',f')$の全体を$S$とする．
        \[\xymatrix{
            N \;\ar@{^{(}->}[r]\ar[d]_-f&N' \;\ar@{^{(}->}[r]\ar@{.>}[dl]^-{f'}&M\\
            \Z/\Q
        }\]
        $\{\abs{N'}\in\N\mid (N',f')\in S\}\subset[\abs{M}]$は有界な集合だから，その最大値をとる$N'$を定めると，これが$M$であることを背理法で示す．
        \begin{enumerate}
            \item $y\in M\setminus N$が取れるとすると，$N'+\brac{y}$は$N'$よりも真に大きい$M$の部分群であるのに，$f'':N'+\brac{y}\to\Q/\Z$が存在して，$(f'',N'+\brac{y})\in S$であることを示す．
            \item まず，$f'$の制限$f'|_{N'\cap\brac{y}}:N'\cap\brac{y}\to\Z/\Q$は，上述の議論により巡回群$\brac{y}$上に延長する：${}^\exists f''_y:\brac{y}\to\Z/\Q\st f''_y|_{N'\cap\brac{y}}=f'$．
            \[\xymatrix{
                N'\cap\brac{y}\ar[d]_-{f'}\;\ar@{^{(}->}[r]&\brac{y}\\
                \Z/\Q
            }\]
            \item これを用いて，$f'':=f'+f''_y$と定めると，これはwell-definedな群準同型で，$f''|_N=f'|_N=f$を満たすから，$f''\in S$である．実際，$x+ny=x'+n'y\Lrarrow x-x'=y(n'-n)\in N\cap\brac{y}$を満たすとき，右辺は$N\cap\brac{y}$の元であるから，
            \[f''(-ny+n'y)=-f''_y(ny)+f''_y(n'y)=f(x)-f(x')\]
            即ち，$f(x)+f''_y(ny)=f(x')+f''_y(n'y)$が従う．
        \end{enumerate}
    \end{description}
\end{proof}
\begin{remarks}[アーベル圏の様子とアーベル群の巡回群構造についての構造的帰納法]\mbox{}
    \begin{enumerate}
        \item アーベル群$A$が$\Z$-加群として入射的であるための必要十分条件は，可除であることである：$\forall_{n\in\N}\;nG=G$（「$n$回足す」という$G$の移動が$n$に依らず全射）．今回の(1)の証明では，$\Q/\Z$のこの性質しか使っておらず，任意の入射的加群に議論を一般化できる．
        そこで，$\Q,\R$は入射的．入射加群の任意の群による商は入射的である．$\Q/\Z,\R/\Z\simeq\T$も入射的．
        $\Z$は入射的でないし，$\Z/n\Z$も入射的ではない．
        \item $\Z$についての理論が大きな後ろ支えになって，巡回群の理論を支える構図がStep2．
        \item Step3に至っては\textbf{巡回群への分解についての構造的帰納法}である．
        構造的帰納法の本質を「延ばせるだけ延ばした時に，全体まで至らないと矛盾」という部分のみを抽出している．なるほど，有限アーベル群についての，緻密な論理の糸をAbの精神に従って構築した算譜であるな．美しすぎる．
    \end{enumerate}
\end{remarks}
\begin{remark}
    Zornの補題を用いると，Step3の議論を，任意のアーベル群$M$とその部分群$N$について拡張できる．
\end{remark}

\begin{definition}[projective object]
    対象$P\in C$が射影的であるとは，$P\to B$が任意のepi $A\epi B$について分解する(left lifting property)ことをいう：
    \[\xymatrix{
        &A\ar@{->>}[d]\\
        P\ar@{.>}[ur]^-{\exists}\ar[r]&B
    }\]
    これは，共変Hom関手$\Hom(P,-)$がepiを保つことに同値．
\end{definition}
\begin{remark}
    Setで全ての対象が射影的であることは，選択公理に同値．
    ほとんどの具体圏の自由対象は射影的である．
    この双対概念である入射的対象は，延長に関係がある．
\end{remark}

\begin{proposition}[入射的対象の特徴付け]
    次の４条件は同値である．
    \begin{enumerate}
        \item アーベル群$A$は可除である．
        \item $A$は圏Abの入射的対象である．
        \item Hom関手$\Hom_\Ab(-,A):\Ab^\op\to\Ab$は完全である．
        \item 任意の単射$N\mono M$に対して，$\Hom(M,Q)\epi\Hom(N,Q)$は全射．
    \end{enumerate}
\end{proposition}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=入射的対象は俺の霊性]
    Setでは$f_*$は全射を全射に写し，$f^*$は全射を単射に写す．
    この時の表現対象がそれぞれ，射影的対象と入射的対象となる．
\end{tcolorbox}

\subsection{有限アーベル群の構造定理の証明}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=structure theorem of finite abelian group]
    Kronecker (1870)の定理．群の位数を因数分解した後に，各素因数の冪にどう分解するかの自由度が残る．
    もし$x=p_1^{m_1}\cdots p_r^{m_r}$に対して$\Z/p_1^{m_1}\Z\oplus\cdots\oplus\Z/p_r^{m_r}\Z$と分解された場合，これは巡回群となる．$\Z/12\Z\simeq\Z/4\oplus\Z/3$など．
    $\Z/p_i\Z\oplus\Z/p_i^{m_i-1}$と分解するとまた別のアーベル群をうみ，この方法で位数$x$のアーベル群の個数を数え上げることができる．

    あるいは見方を変えて，完全には分解し尽くさないことにすると，$a_1$を$G$の冪数（元の位数の最小公倍数）として，
    $a_{i+1}|a_i$を満たす列$(a_1,\cdots,a_r)$は順序も含めて一意に定まり，各位数の巡回群への分解$G\simeq\Z/a_1\Z\oplus\cdots\Z/a_n\Z$が定まる．
    この数列$G$を普遍系といい，各$a_i$を単因子(invariant factor)といい，単因子の理論の一部とみれる．
\end{tcolorbox}

\begin{theorem}[fundamental theorem of finite abelian groups]
    有限アーベル群$M$に対して，整数$r\ge 0$，素数$p_1,\cdots,p_r$，整数$m_1,\cdots,m_r\ge 1$が存在して，
    \[
        M\simeq \Z/p_1^{m_1}\Z\times\cdots\times\Z/p_r^{m_r}\Z
    \]
    を満たす．また，列$\{(p_i,k_i)\}_i$は並べ替えを除いて一意に定まる．
\end{theorem}
\begin{proof}\mbox{}
    \begin{description}
        \item[存在証明] $p$-群への分解補題\ref{lemma-decomposition-into-p-group}より，あとは，任意の$p$群$M$：$\forall_{x\in M}\;p^mx=0$について，$\exists_{r\ge 0}\;\exists_{m_1,\cdots,m_r\ge 1}\;M\simeq\Z/p^{m_1}\Z\times\cdots\times\Z/p^{m_r}\Z$を示せば良い．
        これを$M$の位数についての帰納法によって証明する．$\abs{M}=1$のとき，$r=0$とすれば，$0$項直積は自明群とする．$\abs{M}>1$とすると，このとき$m\ge 1$である．$m$を条件$\forall_{x\in M}\;p^mx=0$を満たすもののうち最小のものとすると，
        $\exists_{x_0\in M}\;p^{m-1}x_0\ne 0$．つまり，位数$p^m$の元$x_0\in M$が存在する．よって，生成元を対応させることで同型$f:\brac{x_0}\iso\Z/p^m\Z$を得る．
        これに対してAbel群の包含$\brac{x_0}\subset M$に沿った準同型の延長補題\ref{lemma-decomposition-of-p-group}より，準同型$\wt{f}:M\epi\Z/p^m\Z$を得る：
        \[\xymatrix{
            \brac{x_0}\ar[r]^-f_-{\sim} \;\ar@{^{(}->}[d]_-i&\Z/p^m/\Z\\
            M\ar@{.>}[ur]_-{\wt{f}}
        }\]
        これを用いて$\varphi:=f^{-1}\circ\wt{f}$と定めると，これは$i$の引き戻しで，$\varphi|_{\brac{x_0}}=\id_{\brac{x_0}}$を満たすから，射影子による分解補題\ref{lemma-decomposition-by-projector}より，
        $M\simeq\brac{x_0}\times M/\brac{x_0}\simeq\Z/p^m\Z\times M/\brac{x_0}$を得る．
        $\abs{M/\brac{x_0}}=p^{n-m}<p^m$より，帰納法は続く．
        \item[一意性証明]
        $M\simeq\otimes_{i\in[r]}\Z/p_i^{m_i}\Z$と仮定する．このとき，
        パラメータの空間$\P\times\N$上の列$\{(p_i,m_i)\}_{i\in[r]}$の中で，任意にとった$(p,m)$に対して，$(p_i,m_i)=(p,m)$を満たす添字$i$の数が（$M,p,k$の関数として）定まっていることを示せば良い．

        まず，任意の$(p,m)$について，$p^k$を周期にもつ元の数は，
        各因子$\Z/p_i^{m_i}\Z$について，
        \[\Abs{\Brace{x\in\Z/p_i^{m_i}\Z\mid p^kx=0}}=\begin{cases}
            p^{\min\{k,m_i\}},&p_i=p,\\
            1,&p_i\ne p
        \end{cases}\]
        であるから，$M$内では
        \[\Abs{\Brace{x\in M\mid p^kx=0}}=\prod_{p_i=p}p^{\min\{k,m_i\}}\]
        よって，
        \[\log_p\Abs{\Brace{x\in M\mid p^kx=0}}=\sum_{p_i=p}\min\{k,m_i\}\]
        これに対して，
        \begin{align*}
            \sum_{p_i=p}\min\{k,m_i\}-\sum_{p_i=p}\min\{k-1,m_i\}&=\sum_{p_i=p}(\min\{k,m_i\}-\min\{k-1,m_i\})\\
            &=\sum_{p_i=p,m_i\le k-1}(\min\{k,m_i\}-\min\{k-1,m_i\})+\sum_{p_i=p,m_i\ge k}(\min\{k,m_i\}-\min\{k-1,m_i\})\\
            &=0+\sum_{p_i=p,m_i\ge k}1=\Abs{\Brace{i\in[r]\mid p_i=p,m_i\ge k}}
        \end{align*}
        が成り立つから，最右辺も$M,k,p$の関数．よって，$\Abs{\Brace{i\in[r]\mid p_i=p,m_i= k}}$も$M,p,k$の$\min$を用いた関数．
    \end{description}
\end{proof}
\begin{remarks}\mbox{}
    \begin{enumerate}
        \item 存在証明は，任意の$p$-群$M$に対して，射影子を構成する算譜を与えている．
        \item 一意性証明は，組$(p_i,m_i)$を定める個数関数$\P\times\N\to\N$を構成している．
    \end{enumerate}
\end{remarks}

\begin{example}[elementary abelian groupとは有限体上の有限次元線型空間のこと]\label{exp-elementary-Abelian-group}
    任意の非自明な元の位数が$p$であるような有限群を\textbf{基本アーベル群}という．
    有限アーベル群の構造定理より，このような有限群は$\exists_{n\in\N}\;(\Z/p\Z)^n$と表せる．
    これは，$n$次元$\mathbb{F}_p$-線型空間の構造を持つ：$(\Z/p\Z)^n\simeq\mathbb{F}_p^n$，とも表現できる．
    このような群は$n\ge 2$のとき巡回群ではない\ref{thm-fundamental-theorem-of-finite-cyclic-groups}．

    一番簡単な基本アーベル群はKleinの四元群$(\Z/2\Z)^2$である．
\end{example}

\begin{example}[Kleinの四元群の一般化]\label{example-finite-Abel-group-of-order-p^2}
    任意の素数$p$について，位数$p^2$のアーベル群とは，同型を除いて次の２種類しかない：$(\Z/p\Z)\oplus(\Z/p\Z)$または$(\Z/p^2\Z)$．
\end{example}

\begin{example}[一意性証明の算譜抽出]
    乗法群$(\Z/16\Z)^\times$は，$\o{n}\in\Z/16\Z$が可逆であることが奇数であることに同値になるから，$\abs{(\Z/16\Z)^\times}=8$が解る．
    \begin{enumerate}
        \item $\Brace{x\in(\Z/16\Z)^\times\mid x=\o{1}}=\{\o{1}\}$なので$\log_2\abs{\Brace{x\in(\Z/16\Z)^\times\mid x=\o{1}}}=0$．
        \item $\Brace{x\in(\Z/16\Z)^\times\mid x^2=\o{1}}=\{\o{1},\o{7},\o{9},\o{15}\}$なので$\log_2\abs{\Brace{x\in(\Z/16\Z)^\times\mid x^2=\o{1}}}=2$．
        \item $\Brace{x\in(\Z/16\Z)^\times\mid x^4=\o{1}}=(\Z/16\Z)^\times$なので$\log_2\abs{\Brace{x\in(\Z/16\Z)^\times\mid x^4=\o{1}}}=3$．
    \end{enumerate}
    よって，
    \begin{align*}
        \abs{\Brace{i\mid m_i\ge 1}}&=2-0=2,&\abs{\Brace{i\mid m_i\ge 2}}&=3-2=1,
    \end{align*}
    であるから，$r=2$で，$(m_1,m_2)=(1,2),(2,1)$しかありえない．よって，$(\Z/16\Z)^\times\simeq\Z/2\Z\times\Z/4\Z$．2-torsionと4-torsionである．
\end{example}

\subsection{巡回群の構造定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    相異なる素数$p$について，相異なる基本アーベル$p$群に分解できること（すなわち，$p_1^{m_1},\cdots,p_n^{m_n}$が互いに素であること）が，巡回群の特徴付けとなる．
\end{tcolorbox}

\begin{theorem}[fundamental theorem of cyclic groups]\label{thm-fundamental-theorem-of-finite-cyclic-groups}
    有限アーベル群$M\simeq \Z/p_1^{m_1}\Z\times\cdots\times\Z/p_r^{m_r}\Z$について，次の３条件は同値．
    \begin{enumerate}
        \item $M$は巡回群である．
        \item 任意の素数$p$について，$\abs{\Brace{x\in M\mid px=0}}\le p$．\footnote{$m=0$の時は個数は$0$．$m=1$の時は$p$個ある．他のスロットルは別の素数$q$についての$q$群なので，位数$p$の元は生まれようがない．$m\ge 2$のときも同様．真に驚くべき非本質的な結果は，これが巡回群を特徴づけるということである．}
        \item $p_1,\cdots,p_r$は相異なる．\footnote{したがって，通常冪数＝元の位数の最小公倍数は群の位数より小さくなるが，冪数と群の位数が一致するとき，有限アーベル群は巡回群となる．}
    \end{enumerate}
    巡回群$\Z/m\Z$では$p_i$は互いに異なり，$k_i$は$m$の素因数分解の$p_i$の冪である．
\end{theorem}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] $M$を巡回群とすると，位数は$p_1^{m_1}\cdots p_r^{m_r}$より，$M\simeq\Z/p_1^{m_1}\cdots p_r^{m_r}\Z$だから，
        \[\Abs{\Brace{x\in M\mid px=0}}=\begin{cases}
            p,&p\in\{p_1,\cdots,p_r\},\\
            1,&\otherwise.
        \end{cases}\]
        \item[(2)$\Rightarrow$(3)]
        (2)の条件は，$\{p_i\}_{i\in[r]}$の中に$p$が含まれるとしてもたかだか１つだということに同値であるから．もし，$(p,m_1),(p,m_2)\in((p_i,m_i))_{i\in[r]}$として$m_1\ne m_2$とすると，
        $\abs{\Brace{x\in M\mid px=0}}\ge p^{2}$がしたがってしまう．

        もっと直接導けば，$\abs{\Brace{x\in M\mid px=0}}$は各$\Z/p_i^{m_i}\Z$の中の位数$p$の巡回部分群の元の数を数えて積を取ることに同値だから，
        \[\abs{\Brace{x\in M\mid px=0}}=\prod_{p_i=p}p=p^{\abs\{i\mid p_i=p\}}\le p\]
        は，各$p$に対して対応する$(p_i,m_i)$はただ一つ，すなわち各$p_1,\cdots,p_r$は異なることをいっている．
        \item[(3)$\Rightarrow$(1)]
        商写像の積$\pi:\Z\epi\Z/p_1^{m_1}\Z\times\cdots\times\Z/p_r^{m_r}\Z$について，$\Ker\pi=\cap^r_{i=1}p^{m_i}p_i\Z$となるが，各$p_i$は互いに素だから，これは$p_1^{m_1}\cdots p^{m_r}_r\Z$に一致．
        よって，これについての商写像$\o{\pi}:\Z/p_1^{m_1}\cdots p_r^{m_r}\Z\iso\Z/p_1^{m_1}\Z\times\cdots\times\Z/p_r^{m_r}\Z$は単射であり，また全射性も保たれる．
    \end{description}
\end{proof}
\begin{remarks}
    直感的には，$p_1^{m_1}$と$p_2^{m_2}$が互いに素だと，$(1,1)$から始めると全ての元を踏むのでこれによって生成される．
    一方，互いに素でない($p_1\ne p_2$)と，$(1,1)$から始めても全ての元を踏まないし，他の方法も失敗する．
    これを組み合わせ論的に証明するよりかは，(2)を中間に挟んで証明する．
\end{remarks}

\begin{example}\label{exp-classification-by-the-structure-theorem-of-Abelian-group}
    有限アーベル群の構造定理を，素因数分解のように使って，有限アーベル群の分類ができることがある．
    \begin{enumerate}
        \item 任意の相異なる素数$p_1\ne p_2$について，位数$p_1p_2$のアーベル群は巡回群ただ一つである：$\Z/p_1p_2\Z\simeq\Z/p_1\Z\times\Z/p_2\Z$．
        任意の位数$p_1p_2$のアーベル群は，必ずこのように分解できてしまうため．
        \item 例\ref{example-finite-Abel-group-of-order-p^2}と併せると，位数$p_1^2p_2$のアーベル群は同型を除いて２つある．例えば，$(\Z/12\Z)\simeq(\Z/4\Z)\oplus(\Z/3\Z)$または，$(\Z/2\Z)^2\oplus(\Z/3\Z)$．
    \end{enumerate}
\end{example}

\section{半直積}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=群の可換性を射で緩める：群の標準的な拡大法]
    群の群への作用（群同型表現）の言葉を使った構成法の言葉で，群の直積を一般化する．
    第一引数（左の元）について$\rho$でtwistすることを許し，これが退化した状態を直積とするいかにも圏論的一般化である．
    これは，$G\mono^i G\rtimes H\epi^{\pr_2} H$という体$H$の拡大の標準的な例であり，$G$という正規部分群を中心とした中心拡大となる．\footnote{群の拡大の同型類は$\Ext(K,H)$と書かれ，群構造が入る．また，$K\mono K\times H\epi H$と同型な拡大は自明な拡大と呼ばれる．}
    $G$の上に回転する$H$を積み上げた群を構成する強力な方法である．

    実は，単完全列$K\mono G\epi H$\footnote{単完全列は，$G$で完全であるだけでなく，$0\mono K\mono G$，$G\epi H\epi 0$についても完全である必要がある．これはそれぞれ単射，全射の定義とできる（特徴付け）．}が分裂する（＝切断$s:H\mono G$が存在して$H$上で$\id_H$となる）ことと，この群の拡大が半直積$\exists_{\rho\in\Hom(H,\Aut(K))}\;G=K\rtimes_\rho H$で表されることは同値であり，
    したがって分裂拡大の分類は半直積の分類，したがって群同型表現$\rho:H\to\Aut_\Grp(K)$の問題に帰着する．
    そしてこの必ず存在する切断がchain ruleという関手性を満たし，微分となる．\footnote{$\rho$でねじってるものが何に当たるんだ？接続？捩率？}

    群の拡大が自明ならば直積，分裂するならば半直積で表せるのだが，どちらでもない場合がある．
    すなわち，$N,G/N$を知っているが，$G$を$N\rtimes G/N$で表せない場合がある．
    逆は常に成り立つ．
\end{tcolorbox}

\subsection{定義と例}

\begin{definition}[semidirect product]\mbox{}
    \begin{enumerate}
        \item 群同型による（左）作用＝群同型表現$\phi:H\to\Aut_\Grp(G)$を一つ定める．この値を$\phi(h)=:\phi_h:G\iso G$と表すこととする．
        このとき，直積集合上の次の構造は群となる．
        \[\xymatrix@R-2pc{
            (G\times H)\times(G\times H)\ar[r]&G\times H\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            ((g,h),(g',h'))\ar@{|->}[r]&(g\phi_h(g'),hh')
        }\]
        \item $\phi$が$\id_G$への定値写像$\phi:H\to 1\to\Aut_\Grp(G)$である場合が，直積である．
        \item 射影$\pr_2:H\times G\to G$の切断$s:G\to H\times G$は，$d(hg)=d(h)\cdot\phi_h(dg)$を満たすため，微分（接写像）$d$とみなせる．\footnote{$\phi_h(g')$を${}^hg'$ともかく．}
        \item 自然な単射$G\mono G\rtimes H,H\mono G\rtimes H$により$G,H$を部分群とみなすと，$G:=\Ker(\pr_2)$であるから，$G\triangleleft G\rtimes H$である．
    \end{enumerate}
\end{definition}
\begin{remarks}[射によって可換性条件を緩める]
    これは可換性の拡張になっている．
    \[(e,h)\cdot(g,e)=(e\phi_h(g),he)=(\phi_h(g),e)\cdot(e,h)\]
    という計算が成り立つから，これを象徴的に書くと$hg=\phi_h(g)h$となる．
    このように緩められた可換性は至る所でみられる，二面体群でも$\tau\sigma=\sigma^{n-1}\tau$という交換法則がある．
    あるいはHermite内積もHermite共役による作用についての半直積と捉えられる．
    (3)の通り，Chain Ruleもその一種と考えられる．
\end{remarks}
\begin{remark}[群であることの確認]\mbox{}
    \begin{description}
        \item[結合法則] \begin{align*}
            \paren{(g,h)(g',h')}(g'',h'')&=(g\cdot\phi_h(g')\cdot\phi_{hh'}(g''),hh'h'')\\
            (g,h)\paren{(g',h')(g'',h'')}&=(g\phi_h(g'\phi_{h'}(g'')),hh'h'')
        \end{align*}
        より，$\phi$が群準同型であること：$\phi_{hh'}(g'')=\phi_h(\phi_{h'}(g''))$から従う．
        \item[逆元]
        「ねじれた交換則」より，$(gh)^{-1}=h^{-1}g^{-1}=\phi_{h^{-1}}(g^{-1})h^{-1}$と予測できるから，
        $(g,h)^{-1}=(\phi_{h^{-1}}(g^{-1}),h^{-1})$とすれば良い．実際， \begin{align*}
            (g,h)(\phi_{h^{-1}}(g^{-1}),h^{-1})&=(g\phi_h(\phi_{h^{-1}}(g^{-1})),hh^{-1})\\
            (\phi_{h^{-1}}(g^{-1}),h^{-1})(g,h)&=(\phi_{h^{-1}}(g^{-1})\phi_{h^{-1}}(g),h^{-1}h).
        \end{align*}
    \end{description}
\end{remark}

\begin{example}[affine変換群の構成は半直積で定義できる]\mbox{}\label{exp-semidirect-product-1}
    \begin{enumerate}
        \item $\Aff(\R^n)$の積は$(A_1,b_1)\cdot(A_2,b_2)=(A_1A_2,A_1b_2+b_1)$というもので，
        $\R^n\rtimes\GL_n(\R)$の構造になっている．
        \item 二面体群は$D_{2n}=C_n\rtimes C_2$である．
        \item 可逆な上三角行列の集合$B$は，対角成分が全て1の行列がなす部分集合$U$と対角行列$T$を用いて$B=U\rtimes T$と表せる．
    \end{enumerate}
\end{example}

\subsection{群の拡大との関係}

\begin{definition}[group extension]\mbox{}
    \begin{enumerate}
        \item 完全列$A\mono\wh{G}\epi G$について，$\wh{G}$を，$A$による\textbf{$G$の拡大}という．\footnote{$G$の$e$の周りに潰れていたと考えられる$A$を挿入する動き．}
        \item 単射$A\mono\wh{G}$が$\wh{G}$の中心について分解する場合，これを\textbf{中心拡大}という．すなわち，$A\subset Z(\wh{G})$のときである．\footnote{$G$の$e$の周りに潰れていたと考えられる$A$を挿入すると，これが新たに中心を作ること．}
        \item 全射$\wh{G}\epi G$が切断を持つとき，これを\textbf{分裂拡大}(split extension)という．\footnote{群の拡大の中で「最も単純なもの」と捉えられる．}このとき$\wh{G}$は，ある準同型$\rho:G\to\Aut_\Grp(A)$について，半直積$A\rtimes_\rho G$である．
    \end{enumerate}
\end{definition}
\begin{remark}[拡大とはファイバーである]
    圏論的には，拡大は，底空間について，ファイバーによって為される．
    On the other hand, our terminology conflicts with the usual meaning of “extension” in algebra. For example, in Galois theory if $k$ is a field, then an extension of $k$ contains $k$ as a subfield.\footnote{\url{https://ncatlab.org/nlab/show/group+extension}}
\end{remark}
\begin{example}\mbox{}\label{example-extension}
    \begin{enumerate}
        \item 実は$\Aut_\Grp(U(1))=\Z/2\Z$である．これは体$\R$の拡大とパラレルな状況ではないか？
        そこで，$\rho:\Z/2\Z\to\Aut(U(1))$とすると，
        $U(1)\mono U(1)\rtimes_{\rho_\Aut}\Z_2\to\Z_2$．なにこれ．１次元の$\pm 1$の拡大は回転？
        $U(1)$を拡大して直交変換をえたのだろうか．\footnote{\url{https://ncatlab.org/nlab/show/semidirect+product+group}}
        \item 単完全列$1\to A_n\to S_n\to C_2\to 1$は分裂するから，$S_n\simeq A_n\rtimes C_2$であり，かつ$n\ge 5$の時は$A_n$以外の真の正規部分群を持たない．
    \end{enumerate}
\end{example}

\subsection{直積への分解}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    Abel群の射影子による分解\ref{lemma-decomposition-by-projector}では，非可換な元を考えなかったから半直積もない．
    補題\ref{lemma-decomposition-into-semiproduct}で，$\phi=1$と取れる場合の特徴付けを与えているとも読める．
\end{tcolorbox}

\begin{theorem}
    $G$の正規部分群$N_1,N_2$について，
    \begin{enumerate}
        \item 次の２条件は同値．
        \begin{enumerate}[(a)]
            \item $N_1N_2=G$かつ$N_1\cap N_2=\{e\}$．
            \item $N_1$の元と$N_2$の元は可換：$\forall_{x_1\in N_1,x_2\in N_2}\;x_1x_2=x_2x_1$かつ$\forall_{g\in G}\;\exists!_{x_1\in N_1,x_2\in N_2}\;x=x_1x_2$．
        \end{enumerate}
        \item (1)の同値な条件が満たされるとき，$G\simeq N_1\times N_2$
    \end{enumerate}
\end{theorem}
\begin{remarks}
    すなわち，結びと交わりを次のようにもつ$N_1,N_2$を見つければ良い．
    \[\xymatrix{
        &G\\
        N_1\ar[ur]&&\ar[ul]N_2\\
        &\{e\}\ar[ur]\ar[ul]
    }\]
    これはすごく線型空間の直積っぽい．
\end{remarks}

\begin{example}\label{exp-decomposition-of-Klein-four-group}
    Kleinの４群$V=\{(1),(13)(24),(12)(34),(14)(23)\}$は，対辺の垂直二等分線に関する対象変換について
    \[N_1:=\{(1),(13)(24)\}\quad N_2:=\{(1),(12)(34)\}\]
    とすれば，中心を中心とした180度回転は折り返し２回で作れるから，
    $V\simeq N_1\times N_2$となる．
    \[\xymatrix{
        1\ar@{-}[rr]&&2\\
        3\ar@{-}[rr]\ar@{-}[u]&&4\ar@{-}[u]
    }\]
\end{example}


\subsection{半直積への分解}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=積と商の双対性が露わになっているのは偶然か？]
    終域について，商で表す方法が準同型定理で与えられるならば，作用の言葉で，
    定義域については半直積で表す方法がある．
    
    $N\triangleleft G$で$H\simeq G/N$となる$H$が見つかるとき，もしepimorphism $\pi:N\epi G$がsplitならば，
    $G\simeq N\rtimes H$である．おそらくSetとは違って，Grpでは全てのepiがsplitなわけではない．
    このとき暗躍するのが切断と共役変換である．複雑怪奇．
    
    射影子のアーベル群の場合についての特徴付け\ref{lemma-decomposition-by-projector}では，包含$N\mono M$に引き戻しが存在すれば，$\cod i=M\simeq N\times M/N=\Im i\times\Ker i$というものであった．
    今回は，射影$\pi:G\epi H$に切断が存在すれば，$\dom\pi=G=\simeq N\rtimes H=\Ker\pi\rtimes\Im\pi$という条件である．
\end{tcolorbox}

\begin{theorem}
    $H,N\le G$について，ある準同型$\rho:H\to\Aut(N)$が存在し，同型$N\rtimes_\rho H\iso G$であって，$H,N$への制限が包含写像になるものが存在するための必要十分条件は，次の３条件である：
    \begin{enumerate}
        \item $G=HN$．
        \item $N\cap H=\{e\}$．
        \item $N\rsub G$．
    \end{enumerate}
    またこのとき，$\rho$は$H$による共役作用の$N$への制限となる．\footnote{\url{https://geolog.mydns.jp/www.geocities.jp/aoirei2002/math/papers/groupdif.pdf}}
\end{theorem}
\begin{remarks}\label{exp-semiproduct-decomposition}
    (1),(2)は，商写像の制限$\pi:H\to G/N$が同型であるための必要十分条件である．だから特に，$G=N\rtimes N\Rightarrow G/N\simeq H$．
    また(1),(2)によって，$S_4\simeq V\rtimes S_3$も確認できる．
\end{remarks}

\begin{lemma}[半直積への分解]\label{lemma-decomposition-into-semiproduct}
    $\pi:G\epi H$を全射準同型とし，その核を$N:=\Ker\pi$とする．（すなわち，$H\simeq G/N$）．
    このとき，切断$s:H\to G$が存在するならば，作用を$\phi:=\Ad\circ s:H\mono G\to\Aut_\Grp(N)$とおくことで，これについての半直積$N\rtimes_\phi H$を考えると，$G\simeq N\rtimes_\phi H$と表せる．
\end{lemma}
\begin{remarks}
    切断$s$を合成した共役変換$\phi$により，
    $N\rtimes_\phi H$の交換規則は$hn=s(h)ns(h)^{-1}h$の通り．

    アーベル群の射影子による分解\ref{lemma-decomposition-by-projector}では，$i:N\mono G$に対して，この引き戻し$r:G\epi N$が群準同型ならば，$G=N\times G/N$と表せる．splitnessが，$G/N$が群であるか（$N$が正規かどうか），そして群であるなら$N$と$G\simeq N\times G/N$を満たすような関係で作用し合うかの判定に対応している．
    逆に$\pi:G\epi G/N$主体で考えて，切断$s:G/N\mono G$が群準同型であるならば，
\end{remarks}
\begin{proof}
    \[\xymatrix@R-2pc{
        f:N\rtimes H\ar[r]&G\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        (n,h)\ar@{|->}[r]&n\cdot s(h)
    }\]
    と定めると，これが同型になる．
    \begin{description}
        \item[関手性] 
        \begin{align*}
            f((n,h),(n',h'))&=f((n\phi_h(n'),hh'))\\
            &=n\cdot s(h)n's(h)^{-1}\cdot s(hh')=ns(h)n's(h')\\
            &=f((n,h))f((n',h'))
        \end{align*}
        \item[単射性]
        $(n,h)\in\Ker f\Lrarrow ns(h)=e$とする．両辺の$\pi$による像を取ると，$\pi(n)\pi(s(h))=e\cdot h=e$より，$h=e$．
        したがって$n=e$も従う．
        \item[全射性]
        $g\in G$を任意に取る．$s$で作ったのが$f$であるから，$\pi$を使って戻すことを考える．
        $h:=\pi(g),n:=g\cdot s(h)^{-1}\in G$と置くと，
        $\pi(n)=\pi(gs(h)^{-1})=\pi(g)h^{-1}=\pi(g)\pi^{-1}(g)=e$より$n\in N$．
        これについて，$(n,h)\in f^{-1}(g)$．
    \end{description}
\end{proof}
\begin{remarks}
    基本的に全知全能の構成による証明が与えられたが，何が読み取れるのか判らない．
\end{remarks}

\begin{example}[上三角行列の空間]\label{exp-upper-trianguler-matrix}
    \[G:=\Brace{\begin{pmatrix}a&b\\0&d\end{pmatrix}\in \GL_n(\C)\;\middle|\;ad\ne 0,a,b,d\in\C}\]
    とすると，$G\simeq\C\rtimes_\phi(\C^\times\times\C^\times)$．
    つまり，右上成分の一次元線型空間$\C$を中心として，２つの成分は$\C^\times\times\C^\times$を作って回転している．
    この結果は一般の次元に一般化できる．
    \begin{enumerate}
        \item 全射準同型を \[\xymatrix@R-2pc{
            \pi:G\ar[r]&\C^\times\times\C^\times\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            {\begin{pmatrix}a&b\\0&d\end{pmatrix}}\ar@{|->}[r]&(a,d)
        }\]
        とすると，$\Ker\pi=\Brace{\begin{pmatrix}1&b\\0&1\end{pmatrix}\;\middle|\;b\in\C}\simeq\C$である．ただし，$\C$は加法群とみた．
        \item \[\xymatrix@R-2pc{
            s:\C^\times\times\C^\times\ar[r]&G\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            (a,d)\ar@{|->}[r]&{\begin{pmatrix}a&0\\0&d\end{pmatrix}}
        }\]
        と定めると，確かに$\pi\circ s=\id_{\C^\times\times\C^\times}$．
        \item 準同型$\phi=\Ad\circ s$は，
        \[s(a,d)\begin{pmatrix}1&b\\0&1\end{pmatrix}s(a,d)^{-1}=\begin{pmatrix}1&\frac{ab}{d}\\0&1\end{pmatrix}\]
        より，
        \[\xymatrix@R-2pc{
            \phi:\C^\times\times\C^\times\ar[r]&\Aut_\Grp(\C)\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            (a,d)\ar@{|->}[r]&\Ad_s:b\mapsto\frac{a}{d}b
        }\]
        で与えられ，$G\simeq\C\rtimes_\phi(\C^\times\times\C^\times)$と表示できる．
    \end{enumerate}
\end{example}

\subsection{輪積}

\begin{definition}[wreath product]
    半直積のうち，２つの置換群$H\le\Sym(n),G\le\Sym(m)$について，$G$が成分の置換によって$H^m$に作用して得るもの$H^m\rtimes G=:H\wr G$を\textbf{輪積}という．
\end{definition}

\begin{theorem}[普遍埋め込み定理]
    群$G$が$A$の$H$による拡大ならば、輪積$ A \wr H $の部分群で$G$に同型なものが存在する．
\end{theorem}

\section{組成列とJordan Hölderの定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    有限アーベル群の分類で群の標準的な構造分解が見えてきた．
    さらに半直積の言葉を手に入れたことによって，$S_3$は正規部分群$\brac{\sigma}=A_3\simeq\Z/3\Z$とその周りの$\brac{\tau}=S_3/A_3\simeq\Z/2\Z$とを，ねじれ$\varphi(\tau)(\sigma)=\sigma^{-2}$を介して「積み重ねた」ものだと考えられる．
    そして$S_3\simeq\Z/3\rtimes_\varphi\Z/2$とは，$\sigma,\tau$の指数法則のみを追っている行為に当たる．すると$\Z$は無限巡回群だというのがすっとわかる，終わりのない指数をもつ．
    また，半直積は２つの群$G,H$から，$G$を正規部分群に指定し，その上に$H$の構造を持たせて「積み上げる」群のための構成法で，準同型$\varphi:H\to\Aut_\Set(G)$の数だけある．

    正規部分群$H\rsub G$が存在したとき，単完全列$0\mono H\mono G\epi G/H\epi 0$が存在する．
    これは標準分解の理論の一般化である．
    これに沿って組成列が分解することを用いて，任意の群に対して組成列の長さが一定であることが帰納法により証明できる．
\end{tcolorbox}

\subsection{単純群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=群自体が一つの共役類（軌道）からなる群]
    $A_4$の特異性は何だろうか．
    また，補題中で，$S_n$は共役によって$A_n$に作用することを考えるが，
    $n\ne 6$の場合に限り$\Aut(A_n)\simeq S_n$が成り立つ．
\end{tcolorbox}

\begin{definition}[simple group]\mbox{}
    \begin{enumerate}
        \item 自明でない正規部分群を持たない非自明な群を\textbf{単純群}という．
        \item 一般に，零対象$0$をもつ圏$C$において，商対象を$0,X$の２つしか持たない対象$X\in C$を\textbf{単純対象}という．\footnote{「割れない」．「内部構造がない」をこれで測る．$C$がAbel圏の時は，商対象には言及せず，部分対象(subobject)で(1)のように定義できる．The zero object itself is not simple, as it has only one quotient object. It is too simple to be simple.}
        \item 単純対象の直和は，semisimple objectという．
    \end{enumerate}
\end{definition}

\begin{example}[単純なアーベル群の特徴付け]\label{exp-simple-Abel-groups}
    アーベル群$G$が，単純であることと$\exists_{p\in\P}\;G\simeq\Z/p\Z$であることは同値である．ただし，too simple to be simpleに注意．
    \begin{proof}\mbox{}
        \begin{description}
            \item[$\Leftarrow$] 部分群が$H\triangleleft G$であることは，Lagrangeの定理\ref{thm-Lagrange}より$\abs{H}|\abs{G}$なので，$\abs{H}=1,p$に同値．よって，$G$は単純．
            \item[$\Rightarrow$] $x\in G\setminus\{e\}$とすると，部分群$\brac{x}\subset G$は正規であるから（アーベル群の任意の部分群は正規），$\brac{x}=G$が従う．よって，$G$は巡回群だから，同型$\exists_{n\in\N}\;G\simeq\Z/n\Z$が存在する．$n=0$ならば$\Z/2\Z$を部分群にもち，矛盾．$n=1$ならば自明群となり矛盾．$n\ge 2$となり合成数であった場合は，$2\le m<n$が$m|n$とすると，$m\Z/n\Z$を部分群にもち，矛盾．\footnote{有限アーベル群の構造定理には，この主張を引き出す力はない．}
        \end{description}
    \end{proof}
\end{example}

\begin{proposition}[方程式の可解性の消息]\label{prop-An-is-simple}
    $n\ge 5$に対して，交代群$A_n$は単純である．
\end{proposition}
\begin{proof}
    保留．
    \begin{enumerate}
        \item 
    \end{enumerate}
\end{proof}

\begin{lemma}[交代群の観察：位数３の巡回置換]
    $n\ge 3$とする．
    \begin{enumerate}
        \item 交代群$A_n$は位数３の巡回置換全体の集合$\{(m_1\;m_2\;m_3)\mid m_1,m_2,m_3は相異なる\}$で生成される．
        \item 位数３の巡回置換は，$A_n$において$(1\;2\;3),(1\;3\;2)$のいずれかと共役である．
        \item $H$を$A_n$の正規部分群とする．$H$が位数３の巡回置換を少なくとも一つ含むならば，$H=A_n$である．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 任意に２つの互換$(a\;b),(c\;d)\;(a\ne b,c\ne d)$を取る．この積は
        \[(a\;b)(c\;d)=\begin{cases}
            (a\;d\;c)(a\;b\;c),&\{a,b\}\cap\{c,d\}=\emptyset,\\
            (x\;z\;y),&\{a,b\}\cap\{c,d\}=\{x\},\{a,b\}=\{x,y\},\{c,d\}=\{x,z\},\\
            \id_{A_n},&\{a,b\}=\{c,d\}.
        \end{cases}\]
        となり，位数３の巡回置換の積で表せる．よって，偶数個の互換の積で表せる置換全体の集合$A_n$は，位数３の巡回置換で表せる．
        \item 任意に$(m_1\;m_2\;m_3)\in A_n$を取る．置換$\sigma\in S_n$を$\sigma(m_i)=i\;(i=1,2,3)$と定めると，$\sigma(m_1\;m_2\;m_3)\sigma^{-1}=(1\;2\;3)$となる．
        $\sigma\in A_n$のとき，$(m_1\;m_2\;m_3)\in A_n$は$(1\;2\;3)$に共役．$\sigma\notin A_n$のとき，$\sigma':=(2\;3)\sigma\in A_n$であり，$\sigma'(m_1\;m_2\;m_3)\sigma'^{-1}=(2\;3)(1\;2\;3\;)(2\;3)^{-1}=(1\;3\;2)$である．
        \item 
        正規部分群$H$が位数３の巡回置換を含むならば，正規部分群とは任意の内部自己同型に対して不変であるから，$(1\;2\;3),(1\;3\;2)$のいずれかを含む．
        $(1\;2\;3)^2=(1\;3\;2),(1\;3\;2)^2=(1\;2\;3)$であるから，$H$は結局いずれも含む．すると(2)より，$H$は全ての位数３の巡回置換を含む．よって(1)より，$H=A_n$．
    \end{enumerate}
\end{proof}
\begin{remarks}
    (1)は$A_n\subset\brac{\{(m_1\;m_2\;m_3)\mid m_1,m_2,m_3は相異なる\}}$しか確認していなくないか？
    これはすごい描像だ．$A_n\;(n\ge 3)$の正規部分群は位数３の巡回置換を１つでも含めば，共役類構造により，全体に伝播する．
\end{remarks}

\subsection{組成列とその完全系列に沿った結合・分解}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    円錐のだるま落としの構造を暴き出す，群論王道の構造定理．
    あるいはfiltrationと呼んでも良い．
    その際の一歩一歩が，「飛びすぎていない」「何かを見落としていない」ことのチェックのために，「商群が単純である」という条件を用いる．
    これを組成列と名付けると，この長さは不変量となる！

    組成列は，その定義からして，だるま落としの構造$G\simeq H\rtimes G/H$が存在した場合，この２つの組成列の結合となる．
    逆に，$G$の組成列がある場合，$i:H\mono G$と$\pi:G\epi G/H$の組成列は，標準射$i,\pi$が引き起こす部分群対応$i^*,\pi_*$により構成できる．
\end{tcolorbox}

\begin{definition}[subnormal series, composition series]
    $G$を群とする．その部分群の列$G=:G_0\supset G_1\supset\cdots\supset G_n=\{e\}$を考える．
    \begin{enumerate}
        \item 任意の$0\le i\le n-1$について，$G_{i+1}$が$G_{i}$の正規部分群である時，この列を\textbf{正規鎖}という．$n$を正規鎖の長さという．
        \item 正規鎖が任意の$0\le i\le n-1$について，$G_i/G_{i+1}$が単純群である時，この列を\textbf{組成列}という．各$G_{i}/G_{i+1}$を組成因子という．
    \end{enumerate}
\end{definition}
\begin{remark}\mbox{}
    \begin{enumerate}
        \item Galois拡大のGalois拡大はGalois拡大とは限らないように，関係$H\triangleleft G$は推移的ではない．
        \item 組成列は真の減少列であることは，自明群は単純ではないことに含意されている．
    \end{enumerate}
\end{remark}

\begin{definition}[length]\mbox{}
    \begin{enumerate}
        \item Abel圏$C$において，対象$X\in C$の長さとは，
        \item Abel圏が$C=\Vect$であった場合，対象$V\in\Vect$の長さとは次元をさす．\footnote{Vectとはsimple objectは（同型を除いて）一次元空間$k$のみで，何度$0$を排出することができるかの階数が次元に当たる．群論的な「積み上げ」構造とは違う構造をしているな．}
    \end{enumerate}
\end{definition}
\begin{example}\mbox{}\label{exp-composition-series}
    \begin{enumerate}
        \item $S_3\supset A_3\supset\{e\}$は$S_3$．組成因子は$\{\Z/2\Z,\Z/3\Z\}$なので単純である．
        \item $n\ge 5$のとき$A_n$は単純であるから，$S_n\supset A_n\supset\{e\}$は$S_n$の組成列であり，長さは2．例\ref{example-extension}も参照．
        \item $\Z$は組成列を持たない．仮に$\Z=G_0\supset\cdots\supset G_n=0$を組成列とすると，特に最後の部分に注目すれば，$G_{n-1}=0$ならば$G_{n-1}/G_n=0$は単純ではなく，$G_{n-1}\ne 0$すなわち$\exists_{k\in\N}\;G_{n-1}\simeq k\Z$ならばやはり$G_{n-1}/G_n\simeq k\Z$が単純であることに矛盾．有限なアーベル群で単純なのは$\Z/p\Z$のみである\ref{exp-simple-Abel-groups}．
    \end{enumerate}
\end{example}

\begin{lemma}[組成列の結合]\label{lemma-composition-of-composition-series-along-exact-sequence}
    商$\pi:G\to G/H$を考える．
    \begin{align*}
        H&=H_0\supset\cdots\supset H_n=\{e\},&G/H&=Q_0\supset\cdots\supset Q_m=\{e\}
    \end{align*}
    とすると，
    \[G=\pi^{-1}(Q_0)\supset\cdots\supset\pi^{-1}(Q_m)=H=H_0\supset\cdots\supset H_n=\{e\}\]
    は$G$の組成列である．さらに，$\pi^{-1}(Q_i)/\pi^{-1}(Q_{i+1})\simeq Q_i/Q_{i+1}$．
\end{lemma}
\begin{proof}
    上記の組成列について，$\pi^{-1}(Q_i)/\pi^{-1}(Q_{i+1})\simeq Q_i/Q_{i+1}$を示せば，組成列であることが従う．
    任意の$i\in m$について，全射の合成$\pi^{-1}(Q_i)\epi^{\pi}Q_i\epi Q_i/Q_{i+1}$は全射であり，その核は$\pi^{-1}(Q_{i+1})$であり，これは$\pi^{-1}(Q_i)$の正規部分群と分かる．
    準同型定理より，$\pi^{-1}(Q_i)/\pi^{-1}(Q_{i+1})\simeq Q_i/Q_{i+1}$が従う．右辺が単純であるから左辺も単純．
\end{proof}
\begin{remarks}[$i$で組成列を押し上げ，$\pi$が組成列を引き戻す]\label{remarks-pullback-along-short-exact-sequence}
    組成列を結合できるという圏論的現象を描写している．
    次の包含写像の列で，２段目の階差列（？）と３段目の階差列は同型対応があるから，
    ３段目を２段目に$\pi$を用いて落として，
    １段目を２段目に押し上げれば，$G$の組成列を得る．
    \[\xymatrix{
        \{e\}=H_n \;\ar@{^{(}->}[r] \;\ar@{^{(}->}[d]&\cdots \;\ar@{^{(}->}[d] \;\ar@{^{(}->}[r]&H\ar@{=}[d]&&\pi^{-1}(Q_i)/\pi^{-1}(Q_{i+1})\ar@{.>}@/^4pc/[ddd]^(.2){\sim}\\
        H_n \;\ar@{^{(}->}[r]&\cdots \;\ar@{^{(}->}[r]&\pi^{-1}(e)\ar@{-->}[d]^-{\pi} \;\ar@{^{(}->}[r]&\cdots \;\ar@{^{(}->}[r]&\pi^{-1}(Q_i)\ar@{-->>}[d]^-{\pi}\ar@{->>}[u] \;\ar@{^{(}->}[r]&\cdots \;\ar@{^{(}->}[r]&G\ar@{->>}[d]^-{\pi}\\
        &&\{e\}=Q_m \;\ar@{^{(}->}[r]&\cdots \;\ar@{^{(}->}[r]&Q_i\ar@{-->}[d]^-{p}\;\ar@{^{(}->}[r]&\cdots \;\ar@{^{(}->}[r]&Q_0=G/H\\
        &&&&Q_i/Q_{i+1}
    }\]
\end{remarks}

\begin{lemma}[有限群の分類への希望]
    有限群$G$は組成列を持つ
\end{lemma}
\begin{proof}
    $G$の位数についての帰納法で示す．$\abs{G}=1$のとき，$G_0=G=\{e\}$は組成列で，長さは$0$である．
    $\abs{G}>1$とする．
    単純群ならば，$G\supset\{e\}$は長さ２の組成列である．
    単純群でないならば，真の正規部分群$H\triangleleft G$が存在するので，これについて帰納法の仮定より，
    $G/H,H$は組成列を持つ．これを補題の方法によって結合すれば良い．
\end{proof}

\begin{lemma}[組成列の分解（双対命題）]\label{lemma-decomposition-of-composition-series-along-exact-sequence}
    $H\triangleleft G$，$G=G_0\supset G_1\supset\cdots\supset G_n=\{e\}$を組成列とする．
    \begin{enumerate}
        \item $J:=\{i\in n\mid H\cap G_i\supsetneq H\cap G_{i+1}\}$とおき，$J\cup\{n\}=:\{j_0<j_1<\cdots<j_r\}$と元を表すと，
        \[H=H\cap G_{j_0}\supset H\cap G_{j_1}\supset\cdots\supset H\cap G_{j_r}=\{e\}\]
        は$H$の組成列である．さらに，任意の$i\in r$について，$(H\cap G_{j_i})/(H\cap G_{j_{i+1}})\simeq G_{j_i}/G_{j_{i}\textcolor{red}{+1}}$．
        \item $K:=\{i\in n\mid \pi(G_i)\supsetneq\pi(G_{i+1})\}$とおき，\footnote{番号が小さくなると部分群は大きくなるが，真に大きくなるときの行き先を$i$と附番していく．}$K\cup\{n\}=:\{k_0<\cdots<k_s\}$とおくと，
        \[G/H=\pi(G_{k_0})\supset\pi(G_{k_1})\supset\cdots\supset\pi(G_{k_s})=\{e\}\]
        は$G/H$の組成列である．さらに，任意の$i\in s$について，$\pi(G_{k_i})/\pi(G_{k_{i+1}})\simeq G_{k_i}/G_{k_i\textcolor{red}{+1}}$．
        \item $J,K$は無縁で，$J\sqcup K=n$が成り立つ．したがって(1),(2)より，置換$\sigma:n\to J\sqcup K$が存在して，
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $j=j_i\in J$を任意にとって，$(H\cap G_{j_i})/(H\cap G_{j_{i+1}})\simeq G_{j_i}/G_{j_{i+1}}$を先に示す．まずすぐにわかることとしては，$H\cap G_j\xrightarrow{i}G_j\xrightarrow{\pi}G_j/G_{j+1}$は準同型であり（全射とは限らないことに注意），その核は$H\cap G_{j+1}$であるから，剰余群の普遍性より，単射$H\cap G_j/H\cap G_{j+1}\mono G_j/G_{j+1}$が引き起こされる．
        これが全射でもあることを示せば良いのだが，これを$G_j/G_{j+1}$の単純性から示す．
        まず，この単射の定義域と像を同一視すると，$(H\cap G_j)/(H\cap G_{j+1})\triangleleft G_j/G_{j+1}$とみなせる．$H\cap G_j\triangleleft G$の全射$\pi:G_j\epi G_j/G_{j+1}$の像だからである．
        すると，$(H\cap G_j)/(H\cap G_{j+1})$は自明であるか$G_j/G_{j+1}$であるかのいずれかであるが，前者は$J$の定め方に反する．
        $J$の定め方から，$H\cap G_{j_i+1}=H\cap G_{j_i+2}=\cdots=H\cap G_{j_{i+1}}$．

        よって，$(H\cap G_j)/(H\cap G_{j+1})$も単純であるから，正規鎖$H=H\cap G_{j_0}\supset H\cap G_{j_1}\supset\cdots\supset H\cap G_{j_r}=\{e\}$は$H$の組成列．\footnote{組成列とは，部分群からなる正規鎖で，各stepが単純であるもの．}
        \item \[\xymatrix{
            G_{k_{i+1}} \;\ar@{^{(}->}[r]\ar[d]&\cdots \;\ar@{^{(}->}[r]&G_{k_i+1} \;\ar@{^{(}->}[r]&G_{k_i}\ar[d]^-{\pi} \;\ar@{^{(}->}[r]&\cdots \;\ar@{^{(}->}[r]&G\ar[d]^-{\pi}\\
            \pi(G_{k_{i+1}}) \;\ar@{^{(}->}[rrr]&&&\pi(G_i)\;\ar@{^{(}->}[r]\ar[d]^-{p_i}&\cdots \;\ar@{^{(}->}[r]&G/H\\
        &&&\pi(G_{k_i})/\pi(G_{k_{i+1}})
        }\]
        射$G_{k_i}\to\pi(G_{k_i})/\pi(G_{k_i+1})$（$\pi(G_{k_{i+1}})=\cdots=\pi(G_{k_i+1})$なのでどっちをとってもいい．便宜上，上の図には乗っていない方を取った\footnote{すると添字$i+1$は登場しないから，$k_i=k$として議論を進めたのが先生の講義ノート．}）の核は，$\pi^{-1}(\pi(G_{k_i+1}))=G_{k_i}\cap G_{k_i+1}H=G_{k_i+1}(H\cap G_{k_i})$\footnote{初めは$\pi^{-1}(\pi(G_{k_i+1}))=G_{k_i+1}\cup H$と書いていた}（補題\ref{lemma-retraction-of-epi}）．これは$H$によって定まらないが，いずれにしろ全射$\wt{\pi}:G_{k_i}/G_{k_i+1}\epi\pi(G_{k_i})/\pi(G_{k_i+1})$は定まる．
        ここで，始域は単純だから，$\Ker\wt{\pi}=\{e\}$が必要．でないと，$\pi(G_{k_i})/\pi(G_{k_i+1})\ne\{e\}$という$K$の元としての条件と$\wt{\pi}$の全射性に矛盾する．
        よって，$G_{k_i}/G_{k_i+1}\simeq\pi(G_{k_i})/\pi(G_{k_i+1})$．添字$j$が$k_i+1$から$k_{i+1}$までのときは群$\pi(G_{j})$は全て同一だから，$G_{k_i}/G_{k_i+1}\simeq\pi(G_{k_i})/\pi(G_{k_{i+1}})$も従う．

        これより，列$(\pi(G_{k_j}))_{j=0,\cdots,s}$は正規鎖であるだけでなく各stepが単純なので，組成列である．
        \item $i\in K\Lrarrow j\notin J$を示せば良い．$i\in K$とした時，まず現状の確認をする．
        (2)の冒頭の，議論が特殊化する前までの議論と同様，射$G_i\xrightarrow{\pi}\pi(G_i)\xrightarrow{p_i}\pi(G_i)/\pi(G_{i+1})$の核は，
        $G_i\cap\pi^{-1}(\pi(G_{i+1}))=G_i\cap G_{i+1}H=G_{i+1}(H\cap G_i)$である．実際，$g\in G_{+1},h\in H$かつ$gh\in G_i$という条件は，$g\in G_{i+1}\Rightarrow g\in G_i$に注目すれば，$g\in G_{i+1},g\in H$かつ$h\in G_i$としても同値．
        よって，準同型定理\ref{thm-homomorphism}より，$G_i/G_{i+1}(H\cap G_i)\simeq\pi(G_i)/\pi(G_{i+1})$である．ここまで一般論．

        特に，$K$の元としての条件と併せると，
        \begin{align*}
            i\in K\Lrarrow \pi(G_i)\supsetneq\pi(G_{i+1})&G_{i+1}(H\cap G_i)\subsetneq G_i\\
            &\Lrarrow G_{i+1}(H\cap G_i)/G_{i+1}\subsetneq G_i/G_{i+1}
        \end{align*}
        まできた．最後の同値変形は，部分群の対応\ref{prop-correspondence-between-subgroup-lattices}より，$\pi_*$は部分群の包含関係を保つため．
        また$G_{i+1}(H\cap G_i)/G_{i+1}$は正規部分群$G_{i+1}(H\cap G_i)\rsub G_i$の標準全射による像だから\ref{prop-image-functor-preserve-regularity}，正規である．
        よって，$G_i/G_{i+1}$の単純性より，$G_{i+1}(H\cap G_i)/G_{i+1}=\{e\}$．
        これは$G_{i+1}(H\cap G_i)=G_{i+1}$，$H\cap G_i\subset G_{i+1}$，$H\cap G_i\subset H\cap G_{i+1}$，$H\cap G_i=H\cap G_{i+1}$（$G_{i+1}\subset G_i$より）と引き出せるから，$i\notin J$と同値であることがわかった．
    \end{enumerate}
\end{proof}
\begin{remarks}
    $H\cap G_i\xrightarrow{i}G_j\xrightarrow{p_i}G_j/G_{j+1}$の核は簡単であるが，射$G_i\xrightarrow{\pi}\pi(G_i)\xrightarrow{p_i}\pi(G_i)/\pi(G_{i+1})$の核は簡単ではないというmono-epi非対称性がある．
    一般に上の可換図式の状況で，$G_i/G_{i+1}(H\cap G_i)\simeq\pi(G_i)/\pi(G_{i+1})$である．
    ここから，(2),(3)は各論に走る．

    (1)は$i$について引き戻す$i^*$，(2)は$\pi$について押し出す$\pi_*$が定めていることに注意．
\end{remarks}

\subsection{Jordan-Hölderの定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=More generally a form of the theorem holds in any homological category.]
    任意の群の組成列は，長さが等しく，置換の別を除いて一意である．こうして得た安定的概念を組成因子という．
    こうしてAbel群には長さ（「次元」）が定まる．
    一般のAbel圏における組成列の概念をJordan-Hölder sequenceという．
\end{tcolorbox}

\begin{theorem}[Jordan-Hölder]\label{thm-Jordan-Hölder}
    群$G$の任意の２つの組成列
    \begin{align*}
        G&=G_0\supset G_1\supset\cdots\supset G_n=\{e\},&G&=G'_0\supset G'_1\supset\cdots\supset G'_m=\{e\},
    \end{align*}
    について，$m=n$であり，かつ，$(G_i/G_{i+1})_{i\in n}$と$(G'_i/G_{i+1})_{i\in m}$は並べ替えと同型（置換の合成の分を除いて同型）である．
    多重集合$\{G_i/G_{i+1}\}_{i\in n}$を$G$の\textbf{組成因子}と呼ぶ．
\end{theorem}
\begin{proof}
    $G$の組成列の長さの最小値$l(G)\in\N$についての帰納法で示す．
    \begin{enumerate}
        \item $l(G)=0$のとき，組成列は$G=\{e\}$の一通りだから条件を満たす．$l(G)=1$のとき$G$は単純群であるから，任意に組成列$(G'_i)_{i=0,\cdots,m}$を取ると，まず$G'_1\rsup G'_0$より，$G'_1=\{e\}$．もし$G'_1=G'_0$ならば$G'_0/G'_1=\{e\}$が単純であることに矛盾．よって，$m=1$であり，$G'_0/G'_1\simeq G_0/G_1=G$．
        \item $l(G)=:n>1$とする．
        組成列$(G'_i)_{i=0,\cdots,m}$を別の組成列とする．単完全列を$G_1\mono^i G\epi^\pi G/G_1$として，これについて
        \begin{align*}
            J&:=\{i\in m\mid H\cap G'_i\supsetneq H\cap G'_{i+1}\},&K&:=\{i\in m\mid \pi(G'_i)\supsetneq\pi(G'_{i+1})\},
        \end{align*}
        とし，$J\cup\{m\}=:\{j_0<\cdots<j_r\},K\cup\{m\}=:\{k_0<\cdots<k_s\}$とする．
        完全系列に沿った組成列の分解補題\ref{lemma-decomposition-of-composition-series-along-exact-sequence}より，
        $(G'_{j_i}\cap G_1)_{i=0,\cdots,r}$は$G_1$の組成列となり，$(\pi(G_{k_i}))_{i=0,\cdots,s}$は$G/G_1$の組成列となる．
        ここで，$G_1$の組成列としてはすでに$G_0$の部分列$(G_i)_{i=1,\cdots,n}$があるから，長さは$n-1$より$r=n-2$で，ある置換$\sigma:\{1,\cdots,n\}\iso\{0,\cdots,n-1\}$が存在して$(G_{j_i}\cap G_1)/(G'_{j_{i+1}}\cap G_1)\simeq G_{\sigma(i)}/G_{\sigma(i)+1}$．
        $G/G_1$は単純だから，長さ2より$s=1$で，$\pi(G_{k_0})/\pi(G_{k_1})\simeq G/G_1$．
        再び補題\ref{lemma-decomposition-of-composition-series-along-exact-sequence}より，$m=r+s=(n-2)+2=n$で，置換$\sigma:m\iso n$が存在して，各$i\in m$について，$G_{i}/G_{i+1}\simeq i^{-1}(G'_{\sigma(i)})/i^{-1}(G'_{\sigma(i)+1})$または$G_{i}/G_{i+1}\simeq \pi(G'_{\sigma(i)})/\pi(G'_{\sigma(i)+1})$となる．
        したがって，$G_i/G_{i+1}\simeq G'_{\sigma(i)}/G_{\sigma(i+1)}$．
    \end{enumerate}
\end{proof}

\begin{example}[対称群の組成因子]\label{exp-composition-series-of-symmetry-group}
    完全系列に沿った組成因子の連結補題\ref{lemma-composition-of-composition-series-along-exact-sequence}と併せると，正規部分群$H\rsub G$が定める完全系列$H\mono G\epi G/H$について，$G$の組成因子を，$H$の組成因子と$G/H$の組成因子の合併として得ることができる．
    対称群の組成因子が考えられる．
    \begin{enumerate}
        \item $S_3$は$\{e\}\xrightarrow{\Z/3\Z}A_3\xrightarrow{\Z/2\Z}(A_3\rtimes C_2\simeq )S_3$．$A_3\rsub S_3$は$A_3=\Ker\sgn$であるし，$\tau^2=1$より$\tau\sigma=\sigma\tau$と考えても良い．また$A_3$は単純であることに注意．単純でないのは$V\rsub A_4$のみ．よって，$S_3$の組成因子は$\{\Z/2\Z,\Z/3\Z\}$．
        \item Kleinの四元群\ref{exp-Klein-four-group}の全射$S_4\epi S_3$に注目すると，その核は$V\simeq\Z/2\Z\times\Z/2\Z$だから，$S_4$の組成因子は$S_3$の組成因子に２つの位数２の巡回群を加えて，$\{\Z/2\Z,\Z/2\Z,\Z/2\Z,\Z/3\Z\}$となる．
        \item $S_n$の組成因子は$n\ge 5$以降のとき，$\{e\}\rsub A_n\rsub S_n$となるから，$\{\Z/2\Z,A_n\}$となる．
    \end{enumerate}
    こうして見ると$S_4$のみが特異的である．親族構造は正規性に関係があるのか？
\end{example}

\section{可解群と冪零群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    構造決定からは別の風景に目をやると，正則鎖に代数的な要件（可換性）を付したくなる．
    これはアーベル群から有限回の拡大を施して得られる群，ということになる．
    一方でこれに対してだるま落としを行うことで特徴づけるのが導来群＝交換子部分群である．
\end{tcolorbox}

\subsection{可解群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    どんな群も正規部分群のだるま落としとして表示できることはみたが，その構成要素が全てAbel群になっているようなクラスの群を考える．
\end{tcolorbox}

\begin{definition}[solvable group]
    群$G$が任意の$i\in n$について$G_i/G_{i+1}$がアーベル群となるような正規鎖$(G_i)$を持つとき，\textbf{可解群}という．
\end{definition}

\begin{lemma}[組成因子による可解性の特徴付け]
    $G$を有限群とすると，これは組成因子を持つ．
    このとき，組成因子が全てAbel群であることと，$G$が可解であることは同値．
\end{lemma}
\begin{proof}
    組成因子が全てAbel群であるとき，この組成列が存在することから$G$が可解群であることが従うから，可解であるときに組成因子が全てAbel群であることを示せば良い．
    群$G$が可解であるとは，Abel群のみからなる正規鎖$(G_i/G_{i+1})$が存在することであった．
    すると$G$の組成因子は，任意の正規部分群$H$について$H/G$の組成因子と$H$の組成因子とを合わせたものとして得られる\ref{exp-composition-series-of-symmetry-group}から，
    $G/G_{i+1}$の組成因子を全て再帰的に集めたものに等しい．Abel群の組成因子は全てAbel群である．
\end{proof}
\begin{example}\mbox{}\label{exp-solvable-groups}
    \begin{enumerate}
        \item アーベル群はどんな部分群もアーベル群だから，必然的に可解である．
        \item 対称群の組成因子\ref{exp-composition-series-of-symmetry-group}を考えると，
        $S_n$が$n\le 4$のとき可解群であり，$n\ge 5$のとき可解群ではない．
        \item これは代数方程式が根号を用いて解くことができるかを反映している．方程式を解くには群の拡大を解消していく．三次方程式は$S_3/A_3\simeq\Z/2\Z$で平方根をとき（二次方程式を解き），$A_3/\{e\}\simeq\Z/3\Z$で立方根を解くこととなる．
        一方四次方程式は，$S_4/A_4\simeq\Z/2\Z$と$A_4/V\simeq\Z/3\Z$とは三次方程式を解くことになる．$V/\{e\}\simeq\Z/2\times\Z/2\Z$で平方根を２回解く？
    \end{enumerate}
\end{example}

\begin{proposition}[可解性の遺伝]
    $H< G$とする．
    \begin{enumerate}
        \item $G$が可解ならば$H$も可解である．また，$H\rsub G$であるときは$G/H$も可解である．
        \item $H\rsub G$で，$H,G/H$が可解であるとする．このとき，$G$も可解である．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $G$が可解のとき，各$G_i/G_{i+1}$が可換であるような正規鎖$(G_i)$が存在する．
        \begin{description}
            \item[$H$の可解性] $(G_i\cap H)$は$H$の正規鎖であり，$(G_i\cap H)/(G_{i+1}\cap H)$は単射準同型$(G_i\cap H)/(G_{i+1}\cap H)\mono G_i/G_{i+1}$によりAbel群である．\footnote{以前は単射準同型があると部分群だと思ってしまうことは乱暴だと感じていたが，これで腑に落ちた．部分群という概念の根拠がmonoの存在であるから，こちらの方が真の数学的概念と考えるのが良いだろう．実際，$i:H\mono G$が存在するとき，$\forall_{h_1,h_2\in H}$について，$i(h_1h_2)=i(h_1)i(h_2)=i(h_2)i(h_1)=i(h_2h_1)$が従う．これが，Abel群の部分群もAbelであることの証明抽出になっている．}
            \item[$G/H$の可解性] $\pi:G\epi G/H$を全射準同型とする．全射準同型の定める像関手は正規性を保つ\ref{prop-image-functor-preserve-regularity}から，$(\pi(G_i))$は$G/H$の正規鎖である．全射$G_i/G_{i+1}\epi\pi(G_i)/\pi(G_{i+1})$より，像$\pi(G_i)/\pi(G_{i+1})$もAbelである．
        \end{description}
        \item 略．
    \end{enumerate}
\end{proof}
\begin{remarks}
    (1)の含む２つの主張が完全なる双対命題になっている．証明も，$i:H\mono G$による引き戻しが定める$i_*:(H\cap G_i)/(H\cap G_{i+1})\mono G_i/G_{i+1}$によるAbel性の遺伝と，
    $\pi:G\epi G/H$による引き戻し$\pi_*:G_i/G_{i+1}\epi\pi(G_i)/\pi(G_{i+1})$によるAbel性の遺伝とで全く双対的である．
    この単完全列による構造の図示は相変わらず要諦\ref{remarks-pullback-along-short-exact-sequence}．
\end{remarks}

\begin{remark}[Abel性についての証明抽出]\mbox{}
    \begin{enumerate}
        \item 単射$H\mono G$があるとき，$G$が可換ならば$H$も可換．実際，$i:H\mono G$が存在するとき，$\forall_{h_1,h_2\in H}$について，$i(h_1h_2)=i(h_1)i(h_2)=i(h_2)i(h_1)=i(h_2h_1)$が従う．
        \item 全射$G\epi H$があるとき，$G$が可換ならば$H$も可換．実際，任意の$h_1,h_2\in H$に対してそのファイバーの元$g_1,g_2\in G$があるから，$h_1h_2=\pi(g_1g_2)=\pi(g_2g_2)=h_2h_1$が従う．
    \end{enumerate}
    この２つはそれぞれ，引き戻しと切断を持つからであろうか．このことはどれくらい直接的な要因になっているのだろうか？
\end{remark}

\subsection{導来列による特徴付け：中心化群と交換子群とAbel化}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    導来列が自明群で有限停止することが可解群の特徴付けになる．
    導来群（交換子部分群）を取ることは，群の拡大の逆である．
    つまり，商群$G/H$を取る時の正規部分群$H$が交換子部分群を含むことが，$G/H$が可換であることに同値．
\end{tcolorbox}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
    title=群構造の持ち上げに続いて，可換性の持ち上げ]
        正規性$\forall_{g\in G}gN=Ng$，すなわち$\{n_1g,n_2g,\cdots,n_rg\}=\{gn_1,gn_2,\cdots,gn_r\}$よりも強い条件を考える．
        これが中心である．明らかに中心$Z(G)$の部分群は全て正規である．
\end{tcolorbox}

\begin{definition}[commutater, derived / commutator subgroup]
    $G$を群，$H_1,H_2\subset G$を部分群とする．
    \begin{enumerate}
        \item 積$[a,b]=aba^{-1}b^{-1}$を元$a,b$の\textbf{交換子}という．これが単位元に等しければ，$a,b$は可換になる．
        \item $[H_1,H_2]:=\{[h_1,h_2]\in H_1H_2\mid h_1\in H_1,h_2\in H_2\}$で生成される部分群$[G,G]$は正規になる．これを\textbf{導来群}または\textbf{交換子群}と呼ぶ．
    \end{enumerate}
\end{definition}
\begin{remark}[perfect group]\mbox{}
    \begin{enumerate}
        \item Abel群は，$[G,G]=\{e\}$を満たす群として特徴付けられる．
        \item $[G,G]=G$を満たす群を\textbf{完全群}という．すなわち，$G^\Ab=\{e\}$となる．有限群の導来列は必ず完全群で停止し，これが自明かどうかが可解かどうかの特徴づけとなる．$\{e\}$は完全で，次に小さいものは$A_5$が完全群である．
    \end{enumerate}
\end{remark}
\begin{example}[交換子部分群の例]\mbox{}\label{exp-commutator-subgroup}
    \begin{enumerate}
        \item $[\GL_n(K),\GL_n(K)]=\SL_n(K)$．
        \item $[S_n,S_n]=A_n$．全ての交換子は偶置換になるから$[S_n,S_n]\subset A_n$．$S_n/A_n\simeq C_2$は可換だから，$A_n\subset[S_n,S_n]$．
        \item $[A_4,A_4]=V$．Kleinの四元群．実は，$[V,V]=\{e\}$．よって$A_4,S_4$は可解．
        \item $[A_n,A_n]=A_n\;(n\ge 5)$（$n\ge 5$のとき可解でない．実は$A_5$が位数最小の非可解群である）．
        任意の長さ３の巡回置換$(ijk)$は，$n\ge 5$のとき，$m,l\in [n]\setminus\{i,j,k\}$を用いて$[(ijm),(ikl)]$と表せるため，$A_n\subset D(A_n)$．
        \item 四元数群について，$[Q_8,Q_8]=\{\pm 1\}$．
    \end{enumerate}
\end{example}

\begin{lemma}[商群がアーベル群になる条件]\label{lemma-commutator-subgroup}
    $G$を群とする．
    \begin{enumerate}
        \item $G$の導来群$[G,G]$は正規部分群である．
        \item $G^\Ab:=G/[G,G]$はAbel群である．これを群$G$の\textbf{アーベル化}という．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $S:=\{[g_1,g_2]\in G\mid g_1,g_2\in G\}$とおくと，$[G,G]=\brac{S}$．
        \begin{description}
            \item[$hSh^{-1}\subset S$] 任意の$g_1,g_2,h\in S$について， \begin{align*}
                h[g_1,g_2]h^{-1}&=hg_1g_2g_1^{-1}g_2^{-1}h^{-1}\\
                &=(hg_1h^{-1})(hg_2h^{-1})(hg_1h^{-1})^{-1}(hg_2h^{-1})^{-1}=[hg_1h^{-1},hg_2h^{-1}]\in S.
            \end{align*}
            \item[$h\brac{S}h^{-1}\subset\brac{S}$] いま，$hSh^{-1}\subset S\Lrarrow S\subset h^{-1}Sh\subset h^{-1}\brac{S}h$より，$\brac{S}=[G,G]\subset h^{-1}\brac{S}h$．すなわち，$h[G,G]h^{-1}\subset[G,G]$．
        \end{description}
        \item 任意の$g,h\in G$について，$(gh)[G,G]=(hg)[G,G]$を示せば良い．実際，$gh=[g,h](hg)$より，$gh\in(gh)[G,G]$と$gh\in[G,G](gh)=(hg)[G,G]$とは同値．
    \end{enumerate}
\end{proof}
\begin{remarks}
    ここからの重要な証明抽出は$xy=xyx^{-1}y^{-1}yx=[x,y]yx$という関係である．
    可解性の特徴付け\ref{prop-characterization-of-solvableness}の(2)で用いる．
\end{remarks}
\begin{remark}[交換子とは自由構成の発想である]
    Abel化関手${}^\Ab:\Grp\to\Ab$は，包含関手$U:\Ab\mono\Grp$の左随伴である．一方で，中心$Z$はこのような関手性を持たない．
    これが実は自由関手であったことは，交換子の発想の形式性の高さからわかる．
\end{remark}

\begin{definition}[derived sequence]
    群$G$に対して，その交換子部分群を取り続けて得られる部分群の列$G=:D^0(G)\supset D^1(G)\supset\cdots\supset D^n(G)\supset\cdots$を次のように定める：
    \begin{enumerate}
        \item $D^0(G):=G$．
        \item $\forall_{n\ge 1}\;D^n(G):=[D^{n-1}(G),D^{n-1}(G)]$．
    \end{enumerate}
    すると補題より，$(D^n(G))$は正規鎖であり，また$D^n(G)/D^{n+1}(G)$はAbel群である．
\end{definition}

\begin{proposition}[可解群の導来列による特徴付け]\label{prop-characterization-of-solvableness}
    群$G$について，次の２条件は同値．
    \begin{enumerate}
        \item $G$は可解である．
        \item $\exists_{n\in\N}\;D^n(G)=\{e\}$．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[(2)$\Rightarrow$(1)] $(D^n(G))$の存在が，$G$が可解であるための要件を充足させる．
        \item[(1)$\Rightarrow$(2)] $G$が可解であるとき，$G_i/G_{i+1}$がAbelであるような正規鎖$(G_i)$が存在する．このとき，$\forall_{n\in\N}\;D^{n}\subset G_{n}$を示す．
        $n=0$のときは$D^0(G)=G\subset G_0$．$n>0$のとき，全射準同型$\pi:G_{n-1}\epi G_{n-1}/G_n$に注目すると，$G_{n-1}/G_n$はAbel群だから，$[G_{n-1},G_{n-1}]\subset\Ker\pi=G_n$．（本質的にはAbel化の普遍性\ref{prop-universality-of-Abelization}による）．

        よって，特に$D^n(G)\subset G_n=\{e\}$より$D^n(G)=\{e\}$である．
    \end{description}
\end{proof}

\begin{proposition}[Abel化の普遍性]\label{prop-universality-of-Abelization}
    任意のアーベル群$M$と準同型$f:G\to M$について，次の図式を可換にする準同型$\o{f}:G^\Ab\to M$がただ一つ存在する：
    \[\xymatrix{
        G\ar[r]^-f\ar@{->>}[d]_-\pi&M\\
        G^\Ab\ar[ur]_-{\o{f}}
    }\]
    すると，$G/H$がAbel群であることと，$[G,G]\subset H\rsub G$であることとは同値．
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 任意の$g_1,g_2\in G$について$f(g_1g_2g_1^{-1}g_2^{-1})=e$より，$S\subset\Ker f$．
        \item よって，$\brac{S}=[G,G]\subset\Ker f$．
        \item 剰余群の普遍性\ref{prop-universality-of-quotient-group}より．
    \end{enumerate}
\end{proof}
\begin{remarks}
    結局この交換子の構成が強力なのは，上の論法が成り立つからである．
\end{remarks}

\begin{theorem}[Feit–Thompson 63]
    位数が奇数な有限群は可解である．
\end{theorem}

\subsection{冪零群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    冪零群とは，（アーベル群の有限回の拡大で表される）可解群のうち，特に中心拡大を繰り返すことで得られる群である．
    つまり，「拡大した結果，$A\mono\wh{G}\epi G$で，$A\subset Z\wh{G}$となる」を繰り返す．
\end{tcolorbox}

\begin{definition}[nilpotent group, central series]
    群$G$が冪零群であるとは，次を満たす正規鎖$(G_i)$が存在することを言う：$\forall_{i\in\N}\;G_i\rsub G$，$\forall_{i\in\N}\;G_i/G_{i+1}\subset Z(G/G_{i+1})$．
    このような正規鎖を\textbf{中心列}という．
\end{definition}
\begin{remarks}[同値な定義]
    冪零群は次の２条件で帰納的に定義される．
    \begin{enumerate}
        \item 自明群$\{e\}$は冪零である．
        \item 冪零群$G''$に対して，完全列$1\to G'\to G\to G''\to 1$が中心拡大である（したがって特に$G'$はAbel群である）とき，$G$も冪零である．
    \end{enumerate}
\end{remarks}

\begin{proposition}[冪零性の遺伝]\label{prop-propagation-of-nilpotentness}
    $H< G$とする．
    \begin{enumerate}
        \item $G$が冪零ならば$H$も冪零である．また，$H\rsub G$であるときは$G/H$も冪零である．
        \item $H\subgrp Z(G)$で，$G/H$が冪零であるとする．このとき，$G$も冪零である．\footnote{冪零群とは，「拡大した結果，$A\mono\wh{G}\epi G$で，$A\subset Z\wh{G}$となる」を繰り返すので，当然である．}
    \end{enumerate}
\end{proposition}

\begin{proposition}[$p$-群は冪零である]
    任意の素数$p$について，$p$-群は冪零である．
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $\abs{G}=1$のとき，自明群は冪零である．
        \item $\abs{G}>1$とする．冪零性の遺伝\ref{prop-propagation-of-nilpotentness}より，$G/Z(G)$が冪零群であることを示せば良い．$\abs{G/Z(G)}$の位数は再び$p$の冪であり$p$-群であるから，帰納法の仮定より従う．
    \end{enumerate}
\end{proof}
\begin{remarks}
    冪零性の遺伝\ref{prop-propagation-of-nilpotentness}より，群$G$が冪零であることを示すには，$G/Z(G)$が冪零であることを示せば良い．
    これは帰納法に繋がる．
\end{remarks}

\begin{example}[冪零群の例]\mbox{}\label{exp-nilpotent-groups}
    \begin{enumerate}
        \item Abel群は可解群であったが，冪零群でもある．というよりも，冪零群とは「ほとんどAbel群」であるという意味で，Abel群の一般化である．
        \item 冪零群の直積は冪零であり，逆に，有限冪零群は$p$-群の直積である．
        \item 任意の体$K$上の$n$次単上三角行列全体のなす乗法群は，冪零度$n-1$の冪零群である．
        \item 最小の非Abelな$p$-群である四元数群$Q_4$は，冪零度$2$の冪零群である．
        \item $S_3$は可解であった\ref{exp-solvable-groups}が，冪零ではない．実際，$C^1(S_3)=[S_3,S_3]=A_3$である．$S_3\simeq A_3\rtimes C_2$の非自明な正規部分群は$A_3$のみであり，$S_3/A_3\simeq C_2$はAbel群であるため．また，$C^2(S_3)=[S_3,A_3]=A_3$である．実際，$(1\;2)\in S_3$は$(1\;2\;3)\in A_3$と交換しない．が，$A_3$はAbel群なので．以上より，$S_3$の降中心列は停止しない．
    \end{enumerate}
\end{example}

\subsection{降中心列による特徴付け}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    可解群における導来列同様，冪零群は降中心列が有限停止することとして特徴付けられる．
    論法としては，標準的な中心列が，降中心列として構成できるのである．
\end{tcolorbox}

\begin{definition}[lower / decending central sequence]
    群$G$に対して，その$G$との交換子部分群を取り続けることで得られる部分群の列$(C^n(G))$を次のように定める：
    \begin{enumerate}
        \item $C^0(G):=G$．
        \item $C^n(G):=[G,C^{n-1}(G)]$．
    \end{enumerate}
\end{definition}

\begin{lemma}
    $G$を群とする．降中心列について，
    \begin{enumerate}
        \item $C^n(G)\rsub G$．
        \item $C^n(G)/C^{n+1}(G)\subgrp Z(G/C^{n+1}(G))$．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $C^0(G)=G\rsub G$より，$n>0$とする．$S:=\{[g_1,g_2]\in G\mid g_1\in G,g_2\in C^{n-1}(G)\}$とおく．任意の$g_1\in G,g_2\in C^n(G),h\in G$について，$h[g_1,g_2]h^{-1}=[hg_1h^{-1},hg_2h^{-1}]\in S$は，$C^{n-1}(G)$が正規部分群であることから従う．したがって，$h\brac{S}h^{-1}\subset\brac{S}$（補題\ref{lemma-commutator-subgroup}の証明抽出）．
        \item 任意の$g\in G,h\in C^{n}(G)$について，$gC^{n+1}(G)\cdot hC^{n+1}(G)=hC^{n+1}(G)\cdot gC^{n+1}(G)$を示せば良い．$gh=ghg^{-1}h^{-1}hg=[g,h](hg)$より，$gh\in(gh)C^{n+1}(G)$と$gh=[g,h](hg)\in C^{n+1}(G)(hg)$は同値．
    \end{enumerate}
\end{proof}

\begin{proposition}[冪零群の特徴付け]
    群$G$について，次の２条件は同値．
    \begin{enumerate}
        \item $G$は冪零である．
        \item $\exists_{n\in\N}\;C^n(G)=\{e\}$．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[(2)$\Rightarrow$(1)] 自明．
        \item[(1)$\Rightarrow$(2)] 略．
    \end{description}
\end{proof}

\begin{definition}[nilpotency class]
    中心列$(C^i(G))_{i=0,\cdots,n}$の長さ$n$は一意とは限らないが，その最小値を\textbf{冪零度}という．
    するとこれは降中心列の長さの最小値に一致する．
    冪零度が$0$の群は自明群ただ一つである．
\end{definition}

\section{Sylowの定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    Lagrangeの定理\ref{thm-Lagrange}の逆（特定の位数の部分群は必ず存在する）が成り立つ場合がある．
    それは，有限群の位数が$\abs{G}=p_1^{m_1}\cdots p_r^{m_r}$と素因数分解できるとき，位数$p_i^{m_i}$の$p$-群が必ず存在し，その個数は$1+r'p\;(r'\in\N)$個であり（個数は確定しない），互いに共役であることがわかる．
\end{tcolorbox}

\subsection{$p$-Sylow部分群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    ある群の部分束の中で，$p$-群は$p$-Sylow部分群を根(root)とした束のようになっている．
    $p$-Sylow部分群$P$はただ一つ存在するか，その周りに$P$による共役作用について，$p$の冪の位数を持った軌道で回っているかのいずれかであり，
    この共役作用を$G$にまで延長すると全ての$p$-Sylow部分群は一つの軌道に入る（したがって，$p$-Sylow部分群がただ一つの場合は，それが正規部分群となり，複数ある場合はどの$p$-Sylow部分群も正規でないことに同値）．
    その結果，任意の部分群$H<G$を指定すれば，$H$を含む$p$-Sylow部分群が巡回道に必ず見つかる．
\end{tcolorbox}

\begin{definition}[Sylow $p$-subgroup]
    有限群$G$と素数$p$について，$P\subgrp G$が\textbf{$p$-Sylow部分群}であるとは，次の２条件を満たすことを言う：
    \begin{enumerate}
        \item $P$は$p$群である．
        \item $\frac{\abs{G}}{\abs{P}}$が$p$と互いに素である．
    \end{enumerate}
\end{definition}
\begin{remarks}[素イデアルに通じる]
    この定義は，位数$\abs{G}$の素因数分解の言葉で特定の部分群を位数によって指定しているだけであるが，これが必ず存在することが従う対象である．
    $S$の部分群束のうち，$p$-部分群がなす束のうち，（必然的に）極大であるものが$p$-Sylow部分群である．存在様態としては素イデアルに少し似ている気がする．
    したがって，群$G$の$p$-Sylow部分群の位数は一定であるし，位数が$p_i^{m_i}$の部分群が存在した場合，それは$p$-群かつ極大であるから，$p$-Sylow部分群そのものである．
    なお，$p$-群の$p$-Sylow部分群とは，自分自身である．
\end{remarks}
\begin{example}[一般線型群]\label{exp-p-Sylow-subgroup-of-GL}
    $G:=\GL_n(\bF_p)\;(n\ge 1,p:素数)$とすると，上三角行列であって対角成分が全て１であるようなもの全体$U\subgrp G$は$p$-Sylow部分群である．
    \begin{enumerate}
        \item $\abs{G}=(p^n-1)(p^n-p)\cdots(p^n-p^{n-1}),\abs{U}=p^{1+2+\cdots+(n-1)}$より，$U$は$p$-群である．$\bF_p^n$の$n$個の基底の行き先となる元を考えると，初めは零ベクトルを除いて$p^n-1$通りある．次に最初に選んだベクトルと平行なベクトル$p$個を除いて，$p^n-p$通りある．これを繰り返す．
        \item $\frac{\abs{G}}{\abs{U}}=(p^n-1)(p^{n-1}-1)\cdots(p-1)$である．
    \end{enumerate}
\end{example}

\begin{lemma}[部分群への$p$-Sylow部分群の遺伝]\label{lemma-p-Sylow-subgroup-of-subgroup}
    $G$を有限群とし$H$をその部分群とする．
    $p$を素数とし，$P$を$G$の$p$-Sylow部分群とする．このとき，
    $g\in G$が存在して，$H\cap gPg^{-1}$は$H$の$p$-Sylow部分群である．
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[構成] 左作用$H\times G/P\to G/p;h*gP=(hg)P$による軌道分解を考える．
        $p$-Sylow部分群$P$の極大性より，$\abs{G/P}=\frac{\abs{G}}{\abs{P}}$は$p$の倍数ではないので，$\forall_{gP\in G/P}\;\abs{H}=\abs{HgP}\abs{\Stab_H(gP)}$\ref{prop-orbit-and-stabilizer}より，全ての軌道は$p$の倍数ではない．
        このとき，任意の元$gP\in G/P$について，
        \begin{align*}
            \Stab_H(gP)&=\Brace{h\in H\mid hgP=gP}\\
            &=\Brace{h\in H\mid g^{-1}hg\in P}\\
            &=\Brace{h\in H\mid h\in gPg^{-1}}=H\cap gPg^{-1}
        \end{align*}
        が成り立つ．
        \item[証明]
        \begin{enumerate}
            \item $H\cap gPg^{-1}$は$p$-群$gPg^{-1}=\Ad(g)(P)$の部分群であるから$p$-群である．
            \item 安定化群と軌道の関係より，$gP$の$H$-軌道の個数が$\frac{\abs{H}}{\abs{\Stab_H(gP)}}=\frac{\abs{H}}{\abs{H\cap gPg^{-1}}}$に等しいから，特に$p$の倍数ではない．
        \end{enumerate}
    \end{description}
\end{proof}
\begin{remarks}
    これとSylowの定理を併せると，$G$の$p$-Sylow部分群の位数$p^a$について，位数$p^b\;(1\le b\le a)$の部分群は必ず存在し，入れ子式になっており，最大のものが$p$-Sylow部分群である．
\end{remarks}

\begin{theorem}[Sylow (1872)]
    $G$を有限群，$p$を素数とする．
    \begin{enumerate}
        \item $G$の$p$-Sylow部分群が存在する．
        \item $P,P'$を$G$の$p$-Sylow部分群とすると，$P$と$P'$は共役である：$\exists_{g\in G}\;P'=gPg^{-1}$．特に，互いに同型である：$P\simeq_{\Ad(g)}P'$．
        \item $G$の$p$-Sylow部分群の個数を$n_{G,p}$とおくと，$n_{G,p}$は$\abs{G}$を割り切り\footnote{指数$[G:P]$を割り切ることに同値．なお，$\gcd([G:P],p)=1$である．}，かつ$n_{G,p}\equiv1\mod p$である．
    \end{enumerate}
\end{theorem}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{description}
            \item[表現の構成] $\bF_p$-線型形式の空間$V:=\Map(G,\bF_p)$は，$G$が有限であることより，有限次元な$\bF_p$-線型空間であるが，これへの作用$G\times V\to V;(g,f)\mapsto (g*f)(g'):=f(g'g)$と定める．
            \begin{enumerate}[(a)]
                \item 対応する表現$\rho:G\to\Aut_\Set(V)$は単射である．実際，$\delta_e(g)=\begin{cases}1,&g=e,\\0,&g\ne e.\end{cases}$という$V$の元に注目すると，\[g\in\Ker\rho\Rightarrow g\delta=\delta\Rightarrow(g\delta)(e)=\delta(e)\Leftrightarrow\delta(g)=1\Leftrightarrow g=e\]
                が従う．
                \item $\rho(g):V\iso V;f\mapsto g*f$は$\bF_p$-線型写像であるから，$\Im\rho\subset\GL(V)=\End_{\bF_p}(V)$である．
            \end{enumerate}
            以上で，単射準同型$\rho:G\mono\GL(V)$を得る．
            \item[一般線型群の消息への帰着]
            有限次元線型空間$V$の基底を取ることで，$n:=\dim V$について$V\simeq\bF_p^n$と見て，$\GL(V)\simeq\GL_n(\bF_p)$と同一視し，$G\mono^\rho\GL(V)\iso\GL_n(\bF_p)$によって$G$を$\GL_n(\bF_p)$の部分群と見る．
            すると，例\ref{exp-p-Sylow-subgroup-of-GL}より，$\GL_n(\bF_p)$には$p$-Sylow部分群$U$が存在する．
            したがって，部分群への$p$-Sylow部分群の遺伝補題\ref{lemma-p-Sylow-subgroup-of-subgroup}より，$g\in\GL_n(\bF_p)$が存在して，$G\cap gUg^{-1}$が$G$の$p$-Sylow部分群となる．
        \end{description}
        \item $p$-Sylow部分群$P'$についても，補題\ref{lemma-p-Sylow-subgroup-of-subgroup}より，$g\in G$が存在して，$P'\cap gPg^{-1}$が$P'$の$p$-Sylow部分群となる．しかしそもそも$P'$も$p$-群なので，$\frac{\abs{P'}}{\abs{P'\cap gPg^{-1}}}=1$が必要．すなわち，$P'\cap gPg^{-1}=P'$である．
        これは$P'\subset gPg^{-1}$を含意する．等号は，$p$-Sylow部分群の位数が一定であることより，$\abs{P'}=\abs{P}=\abs{gPg^{-1}}$から従う．
        \item 
        \begin{enumerate}[(a)]
            \item $n_{G,p}$が$\abs{G}$の約数であることは，$G$の$p$-Sylow部分群全体からなる集合$\cS_p$への共役による作用からわかる．(2)は，この作用はただ一つの$G$-軌道からなることを言っている．そこで，任意の$P\in\cS_p$を取り，$N_G(P):=\Stab_G(P)=\Brace{g\in G\mid gPg^{-1}=P}$と定めると，
            $n_{G,p}=\abs{\cS_p}=\frac{\abs{G}}{\abs{N_G(P)}}$が成り立つ\ref{prop-orbit-and-stabilizer}．よって特に，$n_{G,p}$は$\abs{G}$の既約元は一次式のみという主張が代数学の基本定理なのであるな．
            \item $n_{G,p}\equiv 1\mod p$であることは，この共役作用の$P$への制限$P\times\cS_p\to\cS_p$に注目する．$P$の$P$-軌道は一元集合$\{P\}$である．このとき，任意の他の$p$-Sylow部分群$P'\in\cS_p\setminus\{P\}$に対して，正規化群$N_p(P')=\Brace{g\in P\mid gP'g^{-1}=P'}$が$N_p(P')\subsetneq P$を満たすことを示せば，$(P'のP軌道の元の個数)=\frac{\abs{P}}{\abs{N_P(P')}}$が$p$の倍数となることから，$\abs{\cS_p\setminus\{P\}}$も$p$の倍数だとわかる．
            
            $\forall_{gg'\in N_P(P')P'}\;gg'P'(gg')^{-1}=g(g'P'g'^{-1})g^{-1}=gP'g^{-1}=P'$より，$P'\rsub N_P(P')P'$であるから，第二同型定理\ref{cor-isomorphism-2}より，$N_P(P')P'/P'\simeq N_P(P')/(N_P(P')\cap P')$である．\footnote{実は第二同型定理と設定が違うが，第二同型定理のより簡単な場合となっている．}

            ここで，$N_P(P')$は$P$の部分群より$p$-群．よって位数の等しい$N_P(P')P'/P$も$p$-群．
            $P'$も$p$-群だから$N_P(P')P'$も第二同型定理と剰余群の位数に関するLagrangeの定理\ref{thm-Lagrange}より$\abs{N_P(P')P'}=\frac{\abs{N_P(P')}\abs{P'}}{\abs{N_P(P')}\cap P'}$だから$p$-群であるが，これは$p$-Sylow部分群$P'$を含むでの，$p$-Sylow群の極大性より$P'=N_P(P')P'$が必要．すなわち，$N_P(P')\subset P'$であるから\footnote{$P$の左移動による$G$への作用を考えると，$P'$と同じ軌道に$N_P(P')$も入っているということなので，これは部分群の定義である．}，
            $N_P(P')=P$と仮定すると$P\subset P'$が従い，$p$-Sylow群の位数の一意性から$P=P'$が必要になってしまう．
            よって，$N_P(P')\subsetneq P$．
        \end{enumerate}
    \end{enumerate}
\end{proof}
\begin{remarks}
    各種作用を考えながら地に足のついた結果を統一的に引き出すのが天衣無縫の極み．この先に表現論があるのか？
    \begin{enumerate}
        \item まさかの表現論による有限体の一般線型群\ref{exp-p-Sylow-subgroup-of-GL}への帰着！代数では値域が重要で，これに$F$を取ると$F$-線型表現を得る．特に$F$を有限に取れるのはあまりに強力である．
        \item 部分群の集合に対する共役作用についての中心化群を特に\textbf{正規化群}という．$p$-Sylow部分群への$G$の共役作用を考えると$\abs{\cS_p}$は$\abs{G}$の約数で，その$P$への制限＝$P$による剰余類を考えると$\{P\}$と$p$の倍数の位数を持った軌道とに軌道分解される．というのは結局，$p$-Sylow部分群が一意的でなかった場合は，$P'$に対する$P$の共役$pP'p^{-1}$が必ず他の$p$-Sylow部分群を産んでしまい，その軌道の数は必ず$p$の倍数となることを言っている．
        \item (3)において，$n_{G,p}=1$とは，$p$-Sylow部分群が正規であることに同値となる．$S_4$は正規部分群も$p$-Sylow部分群も持つが，正規な$p$-Sylow部分群は持たない．
    \end{enumerate}
\end{remarks}

\begin{corollary}
    $G$を有限群とし$H$をその部分群とする．
    $p$を素数とし，$H$を$p$-群と仮定する．このとき，$H$を含む$G$の$p$-Sylow部分群が存在する．
\end{corollary}

\subsection{Sylow部分群による構造決定}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    多分，退化して降りてきた$p$-Sylow部分群の理論が，Abel群の構造定理と結びついて威力を発揮する．
    すなわち，$p$-Sylow部分群が正規になるとき，そこへの共役作用の制限を考える．
    正規にならない場合は，$p$-Sylow部分群全体の集合$S_p$のなす構造への作用を考えると，$S_n$への作用が定まる．
\end{tcolorbox}

\begin{proposition}\label{prop-order-pq}
    $p,q$を$p<q$かつ$q\not\equiv1\mod p$を満たす素数とする．このとき，位数$pq$の群（$15,33$など）$G$は$\Z/p\Z\times\Z/q\Z$と同型なAbel群である．
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[$p$-Sylow部分群の決定] $G$の$p$-Sylow部分群$P$を一つとる．$G$の$p$-Sylow部分群の個数$n_{G,p}$は$\abs{G}=pq$の約数であることより，$1,p,q,pq$のいずれかであるが，$n_{G,p}\equiv 1\mod p$より，$n_{G,p}=1$が必要．すると，$P$は$G$の正規で唯一の$p$-Sylow部分群である．
        また位数が$p$であることよりこれは巡回群\ref{cor-prime-order-then-cyclic}で，$P\simeq\Z/p\Z$である（巡回群の分類\ref{thm-classification-of-cyclic-groups}）．
        \item[well-definedness] よって，その可逆元について$\Aut_\Grp(P)\simeq(\Z/p\Z)^\times$が成り立つ．\footnote{どうやら極めて非自明．}
        準同型$\Ad:G\to\Aut_\Grp(P)$の像の位数は，準同型定理より$\abs{\Im\Ad}\abs{\Ker\Ad}=\abs{G}=pq$の約数で，$\Aut_\Grp(P)$の部分群より$\abs{\Aut_\Grp(P)}=p-1$の約数でもある．$p<q$より$pq,p-1$は互いに素であるから，$\Im\Ad=\{\id_P\}$である．したがって，$G$の任意の元は$P$の任意の元と可換である．
        \item[同型の構成]
        $G$の$q$-Sylog部分群$Q$を取ると，全く同様の議論より$Q\simeq\Z/q\Z$である．
        \[\xymatrix@R-2pc{
            \varphi:P\times Q\ar[r]&G\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            (g_1,g_2)\ar@{|->}[r]&g_1g_2
        }\]
        は，$P$の任意の元と$Q$の任意の元は可換であるからwell-definedで，群準同型である．
        \item[可逆性の証明]
        $\abs{P\times Q}=pq=\abs{G}$より，$\varphi$が単射であることを示せば可逆であることが従う．
        任意の$(g_1,g_2)\in\Ker\varphi$を取ると，$g_1g_2=e\Leftrightarrow g_1=g_2^{-1}$より，$g_1,g_2\in P\cap Q$．しかし，Lagrangeの定理\ref{thm-Lagrange}より$\abs{P\cap Q}=1$だから，$g_1=g_2=e$が従う．
    \end{description}
\end{proof}

\begin{proposition}\label{prop-group-of-order-2p}
    $p$を素数とする．位数$2p$の群$G$は次のいずれかである．
    \begin{enumerate}
        \item 巡回群$G\simeq\Z/p\Z\times\Z/2\Z\simeq\Z/2p\Z$．
        \item 二面体群$G\simeq D_p$．
    \end{enumerate}
\end{proposition}
\begin{proof}
    $p=2$のとき，$G=\Z/4\Z,\Z/2\Z\times\Z/2Z$はAbel群である．$p=3$のとき，$G=\Z/6\Z$はAbel群で，$S_3=D_3$は非可換な二面体群である．
    以下，$p\ge 3$の場合を考える．
    \begin{description}
        \item[$p$-Sylow部分群] $G$の$p$-Sylow部分群$P$を取ると，その位数は$p$であるから，これは$P\simeq\Z/p\Z$なる巡回群である．$n_{G,p}|2p$かつ$n_{G,p}\equiv 1\mod p$より，$n_{G,p}=1$より，$P$は正規部分群である．
        \item[$2$-Sylow部分群] $G$の$2$-Sylow部分群$Q$を取るとこれは位数$2$の正規な巡回群で，その元のうち単位元でないもの$\tau$を取ると，$\tau$の位数は$2$だから$\tau\notin P$となり，$G/P=\{P,\tau P\}$と表せる（$\abs{G/P}=2$より）．
        \item[鏡映の定める共役作用への注目] 同型$\Ad(\tau)\in\Aut_\Grp(P)=(\Z/p\Z)^\times$の位数は，$p-1$の約数であるが，２回合成すると必ず恒等写像となるので，$1$か$2$である．
        \begin{enumerate}
            \item $\Ad(\tau)$の位数が$1$であるとき，$Q$の任意の元は$P$の任意の元と可換であるから，同型$P\times Q\iso G;(g_1,g_2)\to g_1g_2$が定まる（命題\ref{prop-order-pq}の証明抽出）．したがって$G\simeq\Z/p\Z\times\Z/2\Z$はAbel群かつ巡回群である．
            \item $\Ad(\tau)$の位数が$2$であるとき，$(\Z/p\Z)^\times$の位数$2$の元は$-1$のみであるから，$\Ad(\tau)(-)=-^{-1}$である．$P$は位数$p$の巡回群であるから，その生成元を$\sigma$と表すと，$G/P=\{P,\tau P\}$と併せて，$G=\{e,\sigma,\cdots,\sigma^{p-1},\tau,\tau\sigma,\cdots,\tau\sigma^{p-1}\}$．
        \end{enumerate}
    \end{description}
\end{proof}
\begin{remark}[二面体群]\label{remark-Dn}
    $n\ge 3$について，$D_n$は$S_n$の部分群で，$n=3$のとき位数$2\cdot 3=3\cdot 2\cdot 1$を比べれば明らかなように，両者は一致し，$n\ge 4$のとき真の部分群になる．
    また，$\varphi:\Z/2\Z\to\Aut_\Set(\Z/n\Z)$を$\varphi(0)=\id_{\Z/n\Z},\varphi(1)(-)={-}^{-1}$と定めると，$D_n=\Z/n\Z\rtimes_\varphi\Z/2\Z$となる．$\Z/2\Z$の元が鏡映変換である．
    また，$D_{2n}=D_n\times\Z/2\Z$．

    二面体群のSylow部分群は，$n$が奇数のとき，$\brac{\tau}=\{\sigma^k,\sigma^k\tau\}\;(k=0,1,\cdots,n-1)$は$2$-Sylow部分群であり，全部で$n$個ある．これらが回転について共役であることに注意．
    中心は単位元のみからなる．一方で$n$が偶数のとき，中心は単位元と180度回転からなる．
\end{remark}

\chapter{Ring}

\begin{quotation}
    群の射が咲き乱れる世界！
\end{quotation}

\section{環の定義と例}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    （単位的）環とは圏Ab内のモノイド対象である
    （ここでは環はunitalでnot-necessarily commutativeとする）．
    non-unitalである場合は半群対象である．
    代数（線型構造と環の構造が両立する対象）は圏$R$-Mod内のモノイド対象であるように．
    乗法が可換であるかと（零元を除いて）可逆であるかがそれぞれ試験紙となる．
    なお，単位的かどうかも試験紙となる．一般の位相空間上の関数？では落とせば良い．

    また，環には演算が２種類あるわけだから，多項式という自由対象とそこへのevaluationの発想が肝要になる．この手法が「方程式」というものである．
\end{tcolorbox}

\begin{definition}[ring]
    次の３条件を満たすアーベル群$A$を環という．
    \begin{enumerate}
        \item $1\in R$．
        \item 双線型写像$\cdot:R\otimes R\to R$が，結合性と$1$に関する単位性を満たす．
    \end{enumerate}
\end{definition}
\begin{remarks}
    演算の整合性$r\cdot(r_1+r_2)=r\cdot r_1+r\cdot r_2$とは，テンソル積の空間から出る双線型性とみなせる．
\end{remarks}

\subsection{圏論的対象}

\begin{example}\mbox{}
    \begin{enumerate}
        \item Ringの終対象は零環$(1,\id_1,\id_1)$である．$1=0$が成り立つことと，零環であることは同値である．
        \item Ringの始対象は整数環$\Z$である\ref{exp-Z-as-initial-object}．群としては生成元が２つ$\pm 1$とあったため大域点としては使えるが始対象ではなかった．もう一つの演算が入ったために方向が確定した，まったく使い勝手が違う．
        \item Grpでは$\Z$だった，大域点として使える対象は$\Z[x]$に移る\ref{cor-Zx-as-global-point}．
    \end{enumerate}
\end{example}

\subsection{数}

\begin{example}
    $\Z,\Q,\R,\C$は可換環である．
\end{example}

\begin{example}[整数の剰余環]
    任意の整数$n\ge 1$に対し，$\Z$の可換環構造が，$\Z/n\Z$の可換環構造を引き起こす．
    これは$\Z/(n)$と同型\ref{exp-quotient-ring-of-Z}．
    $n$が素数$p$である時は$p\Z$は極大イデアルとなる\ref{exp-prime-ideals-of-Z}から$\Z/p\Z$は体となり，$\F_p$とも表す．
\end{example}

\subsection{多項式の環}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    ２つの演算が定まると多項式という一番形式的で一番基本的な対象が定まり，代数幾何学が始まる．
    実は函数芽の環は可換局所環で，極大イデアルは$f(0)=0$を満たす関数の全体と考えられる．\footnote{\url{https://ja.wikipedia.org/wiki/局所環}}
\end{tcolorbox}

\begin{example}
    一般の環$A$に対し，形式的には環$A^\N$の部分環$\Brace{(a_i)\in A^\N\mid a_n=0\;\fe}$として\footnote{ただのplace holderとするから，$X_iX_j=X_jX_i,aX_i=X_ia$とする．}，$A$係数多項式環$A[X]$が構成できる．これは単一生成元$X$上の自由$R$-結合代数である．\footnote{自由対象を内部に持つという点で環という代数系は特徴付けられる？}$A$が可換であることと$A[X]$が可換であることとは同値．
    $k[X^1,\cdots,X^n]$の剰余環として得られる環を体上の有限生成環と言い，特別な対象となる．
    実は，$n$変数多項式について，$(X_1-a_1,X_2-a_2,\cdots,X_n-a_n)$という形のイデアルは極大になり，$F$が代数閉体のとき，この形のものに尽きる．
\end{example}

\begin{example}
    根の数が考えられるのは整域においてである\ref{prop-roots-of-polynomials}．
    整域でない環係数の多項式には，根が無限個存在し得る．
\end{example}

\begin{example}[有理関数体]
    多項式も数に似ていて，構成$\Z\mono\Q$を商体として定式化することにより，有理関数体を得る\ref{exp-field-of-quotients}．
\end{example}

\begin{example}
    位相空間$X$に対して，$C(X)=\Hom_\Top(X,\R)$は可換環となる．
\end{example}

\subsection{作用素の環}

\begin{example}
    環$A$に対し，$M_n(A)\;(n\ge 1)$は行列積に関して環になる．$A$は可換でも$M_n(A)$が可換でない例がある．
\end{example}

\begin{example}
    $M_n(\C)$のイデアルは決定される\ref{exp-ideal-of-Z}．
\end{example}

\subsection{環の射の例}

\begin{example}[Frobenius map]
    $k$を標数$p>0$の体とする．
    $F:k\to k;x\mapsto x^p$は体の準同型となる：$(xy)^p=x^py^p,(x+y)^p=x^p+y^p,1^p=1$．
    $F$は一般に単射であり（一般に被約な環について単射となる），$k$が有限体のとき全射でもあるから可逆である．
    Frobenius写像は，標数$p$の可換環がなす圏の恒等関手の間の自然変換である．
\end{example}

\section{部分環・イデアル・剰余群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    環の乗法は群から可逆性を落とした演算になる．
    すると，部分群の特徴付け\ref{prop-characterization-of-subgroup}の消息を失うわけであるから，必然的に加法部分群$I$であって，$II^{-1}\subset A$を満たすような中間的な性質を持つクラス
    に注目することが自然になる．
    実際，イデアルの概念は数学を通底して重要になる．
    そして最初からイデアルの概念はフィルターの双対であることを感じる．
    
    イデアルの振る舞いは群の場合と対照的で，結びは$I+B$で表せる．
    交わり$I\cap J$について，可換環で$I,J$が互いに素($I+J=A$)ならば，$I\cap J=IJ$という
    結果が中国剰余定理である．
\end{tcolorbox}

\subsection{部分環・中心}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    可換環の生成部分環は，その部分環係数の多項式へ代入して得られる元の全体に他ならない．
    こうして，２つの演算が定められているとき，多項式が一番基本的で形式的な対象となる．
\end{tcolorbox}

\begin{definition}[subring]
    $B\subset A$が部分環であるとは，次の３条件が成り立つことをいう：
    \begin{enumerate}
        \item $B$は$A$の加法に関する部分群である．
        \item $\forall_{b_1,b_2\in B}\;b_1b_2\in B$．
        \item $1\in B$\footnote{一般に環を非単位的とし，部分環と言ったときは単位元が違っていても良いとする定義もある．}．
    \end{enumerate}
\end{definition}

\begin{example}\mbox{}
    \begin{enumerate}
        \item $\Z,\Q,\R$はいずれも$\C$の部分環である．
        \item $A$は$A[X]$の部分環である．上述の数の関係の一般化とみれるのが肝である．
        \item $\{0\}\subset A$は自明な部分群であるが，これは$A$自身が零でない（すなわち$0=1$でない）限り部分環ではない．
        \item $A\times\{0\}\subset A\times B$は部分群であり，積について閉じてもいるが，$B$が零でない限り，$(1,1)\notin A\times B$であるから部分環ではない．
    \end{enumerate}
\end{example}

\begin{definition}[generated ring]
    $S\subset A$を部分集合，$B$を部分環とする．$S,B$の両方を含む部分環で最小であるものが存在する．これを$B[S]$と表す．
\end{definition}

\begin{lemma}[可換環の生成部分環は自由環を潰して作れる]
    $A$が可換であるとき，
    \[B[a_1,\cdots,a_n]=\Brace{f(a_1,\cdots,a_n)\in A\mid f\in B[X_1,\cdots,X_n]}\]
    と表せる．
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[$\subset$] 右辺は確かに，$B,S=\{a_1,\cdots,a_n\}$を含む$A$の部分環である．
        \item[$\supset$] 右辺の元を任意に取ると，$B$の元と$S$の元の有限積の有限和であるから，確かに左辺にも含まれる．
    \end{description}
\end{proof}

\begin{example}\mbox{}
    \begin{enumerate}
        \item $\C$の部分環$\Z$と$\sqrt{2}\in\C$を考えることより，生成される部分環$\Z[\sqrt{2}]$を考えることができる．$\Z[\sqrt{2}]=\Brace{a+b\sqrt{2}\mid a,b\in\Z}$である．
        \item $\R[\sqrt{-1}]=\C$である．
    \end{enumerate}
\end{example}

\begin{lemma}
    中心を
    \[Z(A):=\Brace{a\in A\mid \forall_{b\in A}\;ab=ba}\]
    と定めると，これは$A$の部分環である．
\end{lemma}
\begin{proof}
    アーベル群$Z(A)$は，積について閉じており，$1$も含むため．
\end{proof}

\subsection{部分環の束}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $S_1\cap S_2,S_1S_2$も部分環になるが，この振る舞いはイデアルの振る舞いと対照的である．
    簡単に言えば，部分環は高次項も含むが，イデアルは特定の元を「基底」とみなしてその線型結合で表される元のみに注目する．
\end{tcolorbox}

\subsection{イデアル}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=イデアル＝部分加群]
    正規部分群に当たる概念である．$A$自身を$A$-加群とみなしたときの，部分$A$-加群（空間）の概念に一致．
    生成イデアルも，部分環同様，自由生成を潰すことによって得られる．
    違いは，１次の項しか用いないことである．これがある種の線型性を意味する（部分加群っぽさ）．
\end{tcolorbox}

\begin{definition}[(left, right, two-sided) ideal]
    部分集合$I\subset A$について，
    \begin{enumerate}
        \item $I$が$A$の\textbf{左イデアル}であるとは，次の３条件が成り立つことをいう．
        \begin{enumerate}[(a)]
            \item $0\in I$．
            \item $\forall_{x,y\in I}\;x+y\in I$．
            \item $\forall_{a\in A}\;\forall_{x\in I}\;ax\in I$．
        \end{enumerate}
        \item $I$が$A$の\textbf{右イデアル}であるとは，上述の３条件のうち，(c)を$\forall_{a\in A}\;\forall_{x\in I}\;xa\in I$としたものが成り立つことをいう．
        \item $I$が左イデアルかつ右イデアルであるとき，\textbf{両側イデアル}であるという．
        \item $A$が可換であるとき，３つの概念は同値になり，まとめて\textbf{イデアル}という．
    \end{enumerate}
\end{definition}
\begin{remark}[名前の由来]
    名前の由来は，KummerがFermat予想の研究の際に，素因数分解の一意性を成り立たせるための道具として開発した理想数の概念をDedekindが整理して生まれた．
\end{remark}
\begin{remark}[加法部分群との関係]\mbox{}
    \begin{description}
        \item[加法部分群との関係] 左イデアル$I$は，条件(c)について$a=-1$とすれば$-x\in I$だから，$I$は特に加法について部分群である．
        一般の加法部分群$H<A$が左イデアルでもあるための必要十分条件は，条件(c)を確かめれば良い．
        \item[乗法中立元との関係] $I=A\Lrarrow 1\in I$である．条件(c)について，$x=1$とできてしまえるのならば，これは$\forall_{a\in A}\;a\in I$と同値になってしまうため．
    \end{description}
\end{remark}

\begin{definition}[generated ideal]\mbox{}
    \begin{enumerate}
        \item $S\subset A$を含む最小の左・右・両側イデアルが存在する．
        \item $A$が可換であるとき，これらは一致し，これを$(S)$と表す．
        \item $(S)=I$が成り立つとき，$S$を$I$の\textbf{生成系}であるという．
        \item 有限な生成系が存在する$I$を\textbf{有限生成イデアル}，単元集合を生成元にもつ$I$を\textbf{単項イデアル}という．
    \end{enumerate}
\end{definition}
\begin{remark}
    単項イデアルが，巡回群に当たる概念である．また，最大公約数に関する記法$(a,b)=1$は$(a,b)=(1)$の略記であった．
    では有理式の記法は？
\end{remark}

\begin{lemma}[生成イデアルの表示：部分加群の元の一次結合による表示]\label{lemma-elements-of-ideal}
    $S\subset A$とする．
    \begin{enumerate}
        \item $S$で生成される左イデアルは$\Brace{\sum_{s\in S}a_sS\;\middle|\;(a_s)_{s\in S}\in\bigoplus_{s\in S}A}$．\footnote{$\bigoplus_{s\in S}A$は$\fe$であることに注意．よって，無限和は発生しない．}
        \item $S$で生成される右イデアルは$\Brace{\sum_{s\in S}Sb_s\;\middle|\;(b_s)_{s\in S}\in\bigoplus_{s\in S}A}$．
        \item $S$で生成される両側イデアルは$\bigcup_{n\in\N}\Brace{\sum_{i=1}^na_is_ib_i\;\middle|\;s_i\in S,a_i,b_i\in A}$．ただし，$n=0$のとき，$\sum_{i=1}^0a_is_ib_i=0$とする．
        \item 特に$A$が可換であるとき，$(x_1,\cdots,x_n)=\Brace{\sum^n_{i=1}a_ix_i\;\middle|\;a_1,\cdots,a_n\in A}$．
    \end{enumerate}
\end{lemma}
\begin{proof}
    
\end{proof}

\begin{example}[整数のイデアル]\mbox{}\label{exp-ideal-of-Z}
    \begin{enumerate}
        \item $\Z$のイデアルは，$\Z$の部分群でもあるから，ある$n\in\N$が存在して$I=n\Z$と表せる\ref{prop-Z-classification-of-subgroup}．
        逆に，部分群$n\Z$はイデアルになる：$\forall_{a\in\Z}\;an\Z=n\Z$．よって，$n\Z=(n)$とも表せる．
        \item $\C[X,Y]$のイデアル$(X,Y)$とは，
        \begin{align*}
            (X,Y)&=\Brace{fX+gY\in\C[X,Y]\mid f,g\in\C[X,Y]}\\
            &=\Brace{f\in\C[X,Y]\mid fの定数項は0}
        \end{align*}
        となる．これが単項イデアルではないことは，次のようにしてわかる．$(X,Y)=(f)\Rightarrow X,Y\in(f)\Rightarrow f\in\C^\times$である．すると，$1\in(f)$より，$(f)=\C[X,Y]=(X,Y)$が必要だが，これは矛盾．
        \item 非可換環$M_n(\C)$の左イデアル，両側イデアルを調べる．
    \end{enumerate}
\end{example}

\subsection{剰余環}

\begin{lemma}[quotient ring]
    環$A$とその両側イデアル$I$について，剰余群$A/I$は，
    \[\xymatrix@R-2pc{
        A/I\times A/I\ar[r]&A/I\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        (a+I,b+I)\ar@{|->}[r]&ab+I
    }\]
    を積として環となる．
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[well-definedness] $a+I=a'+I,b+I=b'+I$すなわち$\exists_{x,y\in I}\;a'=a+x,b'=b+y$として，$ab+I=a'b'=I$を導く．$I$は両側イデアルだから，\[
            a'b'=(a+x)(b+y)=ab+xb+ay+xy=ab+I.\]
        \item[環の公理] 乗法の結合性と単位性，分配性は$A$の環構造から自然に従う．
    \end{description}
\end{proof}

\begin{example}\ref{exp-quotient-ring-of-Z}
    $\Z/n\Z=\{\o{0},\cdots,\o{n-1}\}$と形式的に構成した環は，剰余環$\Z/(n)$と同一視できる．
\end{example}

\section{環の射と準同型定理}

\subsection{環の射と引き起こされるイデアル対応}

\begin{definition}
    写像$f:A\to B$が次の３条件を満たすとき，環準同型であるという．
    \begin{enumerate}
        \item $f$は群準同型である．
        \item $\forall_{a,a'\in A}\;f(aa')=f(a)f(a')$．
        \item $f(1)=1$．
    \end{enumerate}
\end{definition}

\begin{example}[整数環は始対象である]\label{exp-Z-as-initial-object}
    任意の環$A$について，$\varphi_A:\Z\to A$が，$\varphi_A(0)=0,\varphi_A(1)=1$の時点で，その他についても帰納的に定まる．
    実際，$f:\Z\to A$も準同型とすると，$f(1)=1=\varphi_A(1)$を満たすが，大域点としての$\Hom(\Z,A)$\ref{prop-characterization-of-additive-group-Z}より，
    $f=\varphi_A$が従う（乗法単位元をどこに移すかで，$\Z$からの写像は一意に定まるということを言い換えただけ）．

    この関係より，$\varphi_A(n)$のことも$n$と表す．$\Z$が可換であるため，$\Im\varphi_A\subset Z(A)$が成り立つ．
\end{example}

\begin{lemma}[可逆性の特徴付け]\label{lemma-characterization-of-invertibleness-of-ring-homomorphism}
    準同型$f:A\to A'$について，次の２条件は同値．
    \begin{enumerate}
        \item $f$は可逆である．
        \item $f$は全単射である．
    \end{enumerate}
\end{lemma}
\begin{proof}
    (2)$\Rightarrow$(1)を示せば良い．$f$が全単射である時，逆写像$f^{-1}$は群準同型である．これが積と単位元を保つことを示せば良い．
    \begin{enumerate}
        \item $a',b'\in A'$を任意にとり，対応する元を$a,b\in A$とすると，$f(ab)=f(a)f(b)=a'b'$より，$f^{-1}(a'b')=ab=f^{-1}(a)f^{-1}(b)$．
        \item $f(1)=1$より，$1=f^{-1}(1)$．
    \end{enumerate}
\end{proof}

\begin{proposition}[イデアルの対応]\label{prop-correspondence-of-ideals}
    $\pi:A\epi A/I$を自然な全射とする．
    このとき，$A$のイデアルで$I$を含むものと，$A/I$のイデアルとの間に，包含関係を保つ全単射$\pi^*,\pi_*$が存在する．
\end{proposition}

\begin{proposition}[剰余環の普遍性]\label{prop-universality-of-quotient-ring}
    $I$を$A$の両側イデアルとする．任意の環準同型$f:A\to A'$に対して，$f(I)=0$を満たすならば，次の図式を可換にする準同型$A/I\to A'$がただ一つ存在する：
    \[\xymatrix{
        A\ar[r]^-f\ar@{->>}[d]_-\pi&A'\\
        A/I\ar@{.>}[ur]_-{\o{f}}
    }\]
\end{proposition}
\begin{proof}
    $f:A\to A'$はアーベル群$A,A'$の間の群準同型であり，$I\rsub A$であるから，剰余群の普遍性\ref{prop-universality-of-quotient-group}より，上の図式を可換にする群準同型$\o{f}:A/I\to A'$がただ一つ存在する．
    これが積と単位元を保ち，環準同型でもあることを示せば良い．
    \begin{enumerate}
        \item 
    \end{enumerate}
\end{proof}

\subsection{多項式環の普遍性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $\Z$はGrpでは$F(1)$と同型であるから大域点として用いることができた．
    Ringでは始対象となった．では大域点として使えるのは何かというと，$\Z[X]$である．
    自由対象とそこへのevaluationというのが，大域点の本質であったのかもしれない．
\end{tcolorbox}

\begin{proposition}[多項式環からの準同型]
    $A,B$を環とし，$n\ge 1$を整数とする．
    \begin{enumerate}
        \item $\Hom(A[X_1,\cdots,X_n],B)\simeq_\Set\Brace{(\phi,b_1,\cdots,b_n)\in\Hom(A,B)\times B^n\mid b_ib_j=b_jb_i,\phi(a)b_i=b_i\phi(a)}$．
        \item 特に，$B$が可換であるとき，$\Hom(A[X_1,\cdots,X_n],B)\simeq\Hom(A,B)\times B^n$
    \end{enumerate}
\end{proposition}
\begin{proof}
    互いに逆な２つの写像を構成する．
    \begin{description}
        \item[$\subset$] $f\in\Hom(A[X_1,\cdots,X_n],B)$に対し，$\phi:=f|_A:A\to B,b_i:=f(X_i)$と定めると，$X_iX_j=X_jX_i,aX_i=X_ia$より，$b_ib_j=b_jb_i,\phi(a)b_i=b_i\phi(a)$が成り立つ．
        \item[$\supset$] $(\phi,b_1,\cdots,b_n)$が定める対応
        \[\sum_{(i_1,\cdots,i_n)\in\N^n}a_{i_1,\cdots,i_n}X_1^{i_1}\cdots X_n^{i_n}\mapsto\sum_{(i_1,\cdots,i_n)\in\N^n}\phi(a_{i_1,\cdots,i_n}b_1^{i_1}\cdots b_n^{i_n})\]
        は環準同型になる．
    \end{description}
\end{proof}

\begin{corollary}[ある種のevaluation]\label{cor-Zx-as-global-point}
    任意の環$A$に対して，
    次の自然な同型が存在する：$\Hom(\Z[X],A)\simeq_\Set U(A)$．
\end{corollary}
\begin{proof}
    $\Z$は始対象である\ref{exp-Z-as-initial-object}から，$\phi:\Z\to A$は一意的に存在する．
    したがって，$f:\Z[X]\to A$と$f(X)$とが対応づけられる．
\end{proof}

\subsection{像と核}

\begin{proposition}\label{prop-kernel-of-ring-homomorphism}
    準同型$f:A\to B$について，
    \begin{enumerate}
        \item 部分群$\Ker f<A$は$A$の両側イデアルである．
        \item 部分群$\Im f<B$は$B$の部分環である．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 任意の$a\in A,x\in\Ker f$について，$f(ax)=f(a)f(x)=0$より，$ax\in\Ker f$．逆も同様．
        \item 任意の$f(a),f(a')\in B$について，$f(a)f(a')=f(aa')\in\Im f,1=f(1)\in\Im f$より．
    \end{enumerate}
\end{proof}

\begin{example}[factor theorem]\label{exp-factor-theorem}
    $(\id,a)\in\Hom(B,A)\times A^n$に対応する群準同型の核を，$B=A[X]$の時について考える．
    \begin{enumerate}
        \item 評価写像$\phi_a:A[X]\to A;f\mapsto f(a)$について，$\Ker\phi_a=(X-a)$が成り立つ．
        \item $n\ge 2$について，$\u{a}:=(a_1,\cdots,a_n)\in A^n$とする．$\phi_{\u{a}}:A[X_1,\cdots,X_n]\to A;f\mapsto f(a_1,\cdots,a_n)$の核は，$\Ker\phi_{\u{a}}=(X_1-a_1,\cdots,X_n-a_n)$である．
    \end{enumerate}
\end{example}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $(X-a)$を因数に含む多項式は$a$で評価すると$0$になるから，$\supset$が成り立つ．$f(X)=c_nX^n+\cdots+c_0\in\Ker\phi_a$を任意に取る．すると$f(a)=0$であるから，
        \[f(X)=f(X)-f(a)=c_n(X^n-a^n)+\cdots+C_1(X-a)\]
        であるが，一般に$k\ge 1$について，$X^k-a^k=(X-a)(X^{k-1}+\cdots+a^{k-1})\in(X-a)$より，$f(X)\in(X-a)$が従う．
        \item $f\in\Ker\phi_{\u{a}}$を任意に取る．一文字固定して，$f_n:=f(X_1,\cdots,X_{n-1},a_n)\in A[X_1,\cdots,X_n]$と置くと，$f_n\in\Ker\phi_{(a_1,\cdots,a_{n-1})}$より，$f_n\in(X_1-a_1,\cdots,X_{n-1}-a_{n-1})\subset A[X_1,\cdots,X_{n-1}]$が帰納法の仮定より従うから，特に，$f_n\in(X_1-a_1,\cdots,X_{n-1}-a_{n-1})\subset A[X_1,\cdots,X_{n}]=A[X_1,\cdots,X_{n-1}][X_n]$．
        すると，$\varphi_{a_n}:A[X_1,\cdots,X_{n-1}][X_n]\to A[X_1,\cdots,X_{n-1}]$について，$(f-f_n)(a_n)=0$より，$f-f_n\in\Ker\phi_{a_n}=(X_n-a_n)\subset A[X_1,\cdots,X_n]$が従う．よって，$f=(f-f_n)+f_n\in(X_1-a_1,\cdots,X_n-a_n)$．
    \end{enumerate}
\end{proof}
\begin{remarks}
    自由生成$A[X_1,\cdots,X_n]=(A[X_1,\cdots,X_{n-1}])[X_n]$が成り立つことに注意．
\end{remarks}

\subsection{準同型定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    準同型定理とは，単完全列への分解である．
    これは変わらないが，第二同型定理が「部分環とイデアル」という非対称性をあらわにしている．
\end{tcolorbox}

\begin{theorem}[準同型定理]\label{thm-ring-homomorphism-decomposition}
    環準同型$f:A\to A'$に対して，次の図式を可換にするただ一つの同型$\o{f}:A/\Ker f\iso\Im f$が存在する：
    \[\xymatrix{
        A\ar[r]^-f\ar@{->>}[d]&A'\\
        A/\Ker f\ar[r]^-{\sim}_-{\o{f}}&\Im f\ar@{^{(}->}[u]
    }\]
\end{theorem}
\begin{proof}
    構成は，全射準同型$f:A\epi\Im f$に対する剰余環の普遍性\ref{prop-universality-of-quotient-ring}による．この
    $\o{f}:A/\Ker f\epi\Im f$が可逆であることを示せば良い．

    これは，その一意性より，$f:A\to\Im f$に剰余群の普遍性を適用して得られる準同型に一致し，群の準同型定理\ref{thm-homomorphism}より，可逆である．
    特に，全単射である．よって，\ref{lemma-characterization-of-invertibleness-of-ring-homomorphism}より，環の同型でもある．
\end{proof}

\begin{corollary}[第二同型定理]
    $I$を$A$の両側イデアル，$B$を$A$の部分環とする．
    \begin{enumerate}
        \item $B+I$は部分環である．
        \item $B\cap I$は両側イデアルである．
        \item $B/(B\cap I)\iso(B+I)/I$．\footnote{はみ出たイデアル$I$で割ると，内部で割ったのと同じ．}
    \end{enumerate}
    \[\xymatrix{
        &B+I\\
        I\ar@[red][ur]&&B\ar[ul]\\
        &B\cap I\ar[ul]\ar@[red][ur]
    }\]
\end{corollary}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 任意の$b+x,b'+x'\in B+I$に対して，$(b+x)(b'+x')=bb'+bx'+xb'+xx'$は，$I$が両側イデアルであることより，再び$B+I$の元．また，$1=1+0\in I+B$．
        \item 合成$\varphi:B\mono^iB+I\epi(B+I)/I$の核は，$\Ker\varphi=i^{-1}(I)=B\cap I$．よって，$B\cap I$は両側イデアルである．
        \item あとは，$\varphi$が全射であることを示せば，準同型定理より，同型$\o{\varphi}:B/B\cap I\iso(B+I)/I$を得る．$(B+I)/I$の元は，任意の$b\in B,x\in I$について$b+x+I=b+I$と表せるが，これは$\varphi(b)$である．
    \end{enumerate}
\end{proof}

\begin{corollary}[第三同型定理]\label{cor-iso-3}
    $I,J$を$A$の両側イデアルで，$I\subset J$とする．
    $J/I$は$A/J$の両側イデアルであり，$A/J\simeq(A/I)/(J/I)$．
    \[\xymatrix{
        A\ar@{->>}[r]^-\pi\ar@{->>}[d]&A/I\ar@{->>}[d]^-{\pi'}\\
        A/J\ar@{.>}[r]^-\sim&(A/I)/(J/I)
    }\]
\end{corollary}
\begin{proof}
    $J/I=\pi_*(J)$より，$J/I$は$A/I$の両側イデアルである（イデアルの対応\ref{prop-correspondence-of-ideals}）．
    
    合成$\varphi:=\pi'\circ\pi$は全射の合成であるから全射である．$\Ker\varphi=\pi^{-1}(\Ker\pi')=\pi^{-1}(J/I)=J$より，準同型定理\ref{thm-ring-homomorphism-decomposition}から，$A/J\iso (A/I)/(J/I)$が引き起こされる．
\end{proof}

\subsection{射の扱い}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    単射は左可逆かはまだ検証していないが，単射の性質が，「部分構造」であるための性質の全てである．
\end{tcolorbox}

\begin{proposition}\mbox{}\label{prop-mono-as-inclusion}
    \begin{enumerate}
        \item $f:A\to B$を準同型とする．イデアル$I\subset A$に対して，$f(I)$は$B$の部分環$\Im f$のイデアルである．
        \item 単射$i:A\mono B$に対して，$A$が零でないとき，$B$が整域ならば$A$も整域．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{enumerate}[(i)]
            \item $0=f(0)\in f(I)$．
            \item 任意の$f(x),f(y)\in f(I)$について，$f(x)+f(y)=f(x+y)\in f(I)$．
            \item 任意の$f(a)\in\Im f,f(x)\in f(I)$について，$f(a)f(x)=f(ax)\in f(I)$．
        \end{enumerate}
        \item 任意の$a,b\in A$について，$ab=0$とする．$i(ab)=i(a)i(b)=0$より，$B$が整域であることから$i(a)=0\lor i(b)=0$である．$i$は単射であるから$\Ker i=\{0\}$より，$a=0\lor b=0$が従う．
    \end{enumerate}
\end{proof}

\section{可換環論}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    可換環の重要なクラスを２つ定義する．
    \begin{enumerate}
        \item 非自明な零因子を持たない可換環を整域という．
        \item 非自明な不可逆元を持たない可換環を体という．
    \end{enumerate}
    可逆元は正則元だから，体は整域である．
\end{tcolorbox}

\begin{notation}\label{notation-ideal-generated-by-image}
    $I,J$を可換環$A$のイデアルとすると，次のようにイデアルの構成を定める．
    \begin{enumerate}
        \item $I+J$は再び$A$のイデアルである．
        \item $IJ:=(xy\in A\mid x\in I,y\in J)$．$I^k\;(k\in\N)$も同様に定める．$IJ\subset I\cap J$に注意．逆も成り立つのは$I,J$が互いに素のとき\ref{lemma-product-of-ideals}．
        \item 環準同型$f:A\to B$について，$f(I)$で生成される$B$のイデアルを$f(I)B:=(f(I))$と定める．
        \footnote{イデアルの対応により，一般に$f(I)$は$\Im f$のイデアルではあるが，$B$のイデアルであるとは限らない．}
        $f(I)$の生成する$B$のイデアルの任意の元は$bx\;(b\in B,x\in f(I))$と表せる（補題\ref{lemma-elements-of-ideal}）からである．
        $f$がmonoなど明らかな場合は$IB$とも表す．
    \end{enumerate}
\end{notation}
\begin{example}[イデアルとしてのn次以上の式]
    体係数多項式の環$F[X,Y]$のイデアル$I=(X,Y)$について，$I^k=(X^k,X^{k-1}Y,\cdots,Y^k)\;(k\ge 1)$．
\end{example}

\subsection{整域}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=非自明な零因子を持たない可換環]
    整域の概念は整数全体の成す環の一般化になっており、整除可能性を調べるのに自然な設定を与える。
    $A[X]$の可逆元は$A^\times$だけに思えるが，これは可換環$A$が整域である場合にしか成り立たない（非自明な零因子がなければ良い）．
\end{tcolorbox}

\begin{definition}[regular, zero divisor, integral domain]
    $A$を可換環とする．
    \begin{enumerate}
        \item $a\in A$が\textbf{正則元}であるとは，これが定める左移動$\varphi_a:A\to A$が単射であることをいう．正則でない元を\textbf{零因子}と呼ぶ．\footnote{左移動$\varphi_a:A\to A$が単射でないとは非自明な核を持つということだから，非自明な零を発生させ得る因子ということである．}
        \item 可換環$A$が\textbf{整域}であるとは，$\{a\in A\mid aは正則\}=A\setminus\{0\}$が成り立つことをいう．
    \end{enumerate}
\end{definition}
\begin{remark}\mbox{}\label{remark-integral-domain}
    \begin{enumerate}
        \item 可逆元＝単元は，左移動は全単射となるため，正則元である．
        \item 零因子は非可換環についても左・右・両側が考えられる．
        \item 零環は整域となるには単純すぎる．$\{a\in A\mid aは正則\}=A$が成り立ってしまうため．
        \item $A$が整域であることの必要十分条件は，$A\ne 0$かつ任意の零でない元が正則であること，また，$A\ne 0$かつ$\forall_{a,b\in A}\;ab=0\Leftrightarrow a=0\lor b=0$．すなわち，$0\subset A$が素イデアルになることと同値．
    \end{enumerate}
\end{remark}

\begin{proposition}\label{prop-if-A-polynomials-is-integral-domain}
    $A$が整域ならば，$A[X]$も整域であり\footnote{$A\subset A[X]$より，実はこれが必要十分条件である}，$A[X]^\times=A^\times$．
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[整域である] $A\ne 0$より，$A\subset A[X]\ne 0$である．任意に$f,g\in A[X]\setminus\{0\}$をとり，$fg\ne 0$を示す．$f,g$の最高次項を$aX^m,bX^n\;(a,b\in A\setminus\{0\},m,n\ge 0)$とおくと，$ab\ne 0$より，$fg$の最高次項は$abX^{m+n}\ne 0$（環$A$の可換性を使った）．
        \item[乗法群] $A^\times\supset A[X]^\times$を示せば良い．$f\in A[X]^\times$を任意にとると，$fg=1$を満たす$g\in A[X]^\times$が存在する．$f,g$の最高次項をそれぞれ$aX^n,bX^m$と置くと，$abX^{n+m}=1$より（環$A$の可換性を使った），$ab=1,n+m=0$すなわち$a\in A^\times,n=0$が必要．よって，$f=a\in A^\times$．
    \end{description}
\end{proof}
\begin{remark}
    $A$を整域でない可換環とすると，$A=\Z/p^2\Z$が反例となる．
    $(\o{p}X+\o{1})(-\o{p}X+\o{1})=-\o{p}^2X^2+\o{1}=\o{1}$である．
\end{remark}

\begin{proposition}[多項式の根の数]\label{prop-roots-of-polynomials}
    $A$を整域とし，$f\in A[X]\setminus\{0\}$とする．$n:=\deg f$とすると，
    \[\Abs{\{a\in A\mid f(a)=0\}}\le n.\]
\end{proposition}
\begin{proof}
    因数定理\ref{exp-factor-theorem}による．
    \begin{description}
        \item[$n=0$のとき] $\Abs{\{a\in A\mid f(a)=0\}}=\abs{\emptyset}=0\le 0$．
        \item[$n>0$のとき] $\{a\in A\mid f(a)=0\}\ne\emptyset$とすると，$f(a_1)=0$を満たす$a_1\in A$が存在する．すると，$a_1$での評価写像$\ev_{a_1}:A[X]\to A$について，$\Ker\ev_{a_1}=(X-a_1)$であるから，ある$g(X)\in A[X]$が存在して，$f(X)=g(X)(X-a_1)$と表せる．特に，$\deg g<n$．このとき， \begin{align*}
            f(a)=0&\Leftrightarrow g(a)(a-a_1)=0\\
            &\Leftrightarrow g(a)=0\lor a=a_1&\because Aは整域
        \end{align*}
        より，$\{a\in A\mid f(a)=0\}=\{a\in A\mid g(a)=0\}\cup\{a_1\}$．
    \end{description}
\end{proof}

\subsection{体}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=体とは素数である]
    非自明な不可逆元を持たない可換環を体という．
    この体にはイデアルが２つ（非自明なイデアルを持たない）という特徴づけがある．
    これは単純群同様，素数の一般化と思える．
    連結性も，ある種の素数性をいう．
\end{tcolorbox}

\subsubsection{定義と特徴付け}

\begin{definition}[field]
    可換環$A$が体であるとは，$A^\times=A\setminus\{0\}$を満たすことをいう（$A$を一般の環とするとき，斜体という）．
\end{definition}
\begin{remark}[too simple to be prime]\mbox{}\label{remark-field}
    \begin{enumerate}
        \item 零環は体ではない．$A^\times=\{0\}\ne A\setminus\{0\}=\emptyset$である．
        \item 可換環$A$が体であるための必要十分条件は，$A\ne 0$かつ$A\setminus\{0\}$の任意の元が可逆であること．
    \end{enumerate}
\end{remark}

\begin{proposition}[体の特徴付け]\label{prop-characterization-of-field}
    可換環$A$について，
    \begin{enumerate}
        \item $A$は体である．
        \item $A$のイデアルは２つである．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[$\Rightarrow$] $0\subsetneq A$に注意．$0\subsetneq I\subset A$を満たすイデアル$I$を任意に取ると，零でない元$x\in I\setminus\{0\}$が取れる．これは可逆だから，$y\in A$が存在して$xy=1\in I$．よって，$A=I$が従う．
        \item[$\Leftarrow$] 零環のイデアルはただ一つなので，$A\ne 0$．任意に$a\in A\setminus\{0\}$を取ると，これが生成するイデアルは$(a)=A$である．よって，$1\in(a)$，すなわち，$\exists_{b\in A}\;ab=1$．
    \end{description}
\end{proof}

\begin{corollary}[体とは素数である]
    可換環$\bF_p=\Z/p\Z$は体である．
\end{corollary}
\begin{proof}
    任意にイデアル$I\subset\bF_p$を取ると，これは特に部分群だから，$\abs{I}=1,p$である\ref{cor-Lagrange}．
\end{proof}

\subsubsection{体からの射は単射}

\begin{proposition}[体から出る射]\label{prop-morphism-from-fields}
    $F$を体，$A$を零でない環とする．任意の環準同型$f:F\to A$は単射である．
\end{proposition}
\begin{proof}
    $\Ker f$は体$F$のイデアル\ref{prop-kernel-of-ring-homomorphism}なので，$\Ker f=0$または$F$（体の特徴付け\ref{prop-characterization-of-field}）．
    しかし，$\Ker f=F$とすると，$1=f(1)=0$が従うので，$A$が零環であることが必要だが，これは仮定に矛盾する．
\end{proof}

\subsubsection{体の乗法群は巡回群}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    体の乗法群の有限部分群は巡回群になる．これは殆ど多項式の根の数\ref{prop-roots-of-polynomials}より従う．
\end{tcolorbox}

\begin{proposition}
    $F$を体，$G$を$F^\times$の有限部分群とする．このとき，$G$は巡回群である．
    特に，有限体$F$の乗法群$F^\times$は巡回群である（原始根の存在定理）．\footnote{ただし原始根とは，有限体$\bF_p$について，$(\bF_p)^\times$を生成する元のことをいう．}
\end{proposition}
\begin{proof}
    $F$は体であり特に可換環であるから，その乗法群の部分群$G$はAbel群である．
    有限Abel群が巡回群であるための特徴付け\ref{thm-fundamental-theorem-of-finite-cyclic-groups}より，任意の素数$p$について$\abs{\Brace{x\in G\mid x^p=1}}\le p$であることを示せば良い．
    これは，体$F$は特に整域であるから，多項式の根の数\ref{prop-roots-of-polynomials}より従う．
\end{proof}

\subsection{環の捩れと根基}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    群の捩れとは，$\exists_{n\in\N}\;g^n=e$を満たす元を呼ぶのであった（定義\ref{def-torsion}）．
    環の冪零元とは，$\exists_{n\in\N}\;a^n=0$を満たす元を呼ぶ．
    このような元の集まりを冪零根基と呼ぶ．
    歴史上この概念を一般化して，「$n$乗するとイデアル$I$に入る元全体の集まり」を根基$\sqrt{I}$というようになった．冪零根基は$I=0$の場合である．
\end{tcolorbox}

\begin{definition}[radical]\mbox{}
    \begin{enumerate}
        \item 
    \end{enumerate}
\end{definition}

\begin{definition}[nilpotent, nilradical, reduced]\mbox{}
    \begin{enumerate}
        \item 可換環の元$a\in A$が\textbf{冪零}であるとは，次が成り立つことをいう：$\exists_{n\in\N}\;a^n=0$．
        \item $A$の冪零元全体はイデアルをなし，$A$の\textbf{冪零根基}といい，$\sqrt{0}$と表す．
        \item $\sqrt{0}=0$を満たす，冪零根基の縮退した可換環を\textbf{被約}という．\footnote{商環$R/\sqrt{0}$を簡約部分(reduced part)と呼ぶ．}
    \end{enumerate}
\end{definition}
\begin{remark}[radical]
    環のイデアル$I\subset R$について，対応する\textbf{根基}とは，新たなイデアル$\sqrt{I}:=\Brace{r\in R\mid \exists_{n\in\N}\;r^n\in I}$を指す．
    冪零根基とは自明なイデアル$0\subset R$に対応する根基である．
    この根基の対応が実は関手的であり（根基関手），これを研究する分野をtorsion theoryと呼ぶ．
\end{remark}
\begin{proof}
    $\sqrt{0}$がイデアルの３つの公理を満たすことを確認する．
    \begin{enumerate}
        \item $0\in\sqrt{0}$である．
        \item 任意に$x,y\in\sqrt{0}$を取ると，$\exists_{n,m\in\N}\;x^m=y^n=0$．すると，$A$は可換環であるから，二項展開して$(x+y)^{m+n}=\sum^{m+n}_{i=0}\begin{pmatrix}m+n\\i\end{pmatrix}x^iy^{m+n-i}=0$より，$x+y\in\sqrt{0}$．
        \item 任意に$a\in A,x\in\sqrt{0}$を取ると，$ax\in\sqrt{0}$．
    \end{enumerate}
\end{proof}

\begin{example}[有限体の冪零根基]
    $\Z/p^m\Z\;(m\ge 1)$の冪零根基は$p\Z/p^m\Z$である．よって，$\Z/p^m\Z$が被約であることは，$p\Z/p^m\Z=0$すなわち$m=1$と同値．
    実際，
    \begin{align*}
        \o{a}\in\sqrt{0}&\Leftrightarrow\exists_{n\in\N}\;p^m\mid a^n\\
        &\Leftrightarrow\exists_{n\in\N}\;p\mid a\Leftrightarrow \o{a}\in p\Z/p^m\Z.
    \end{align*}
\end{example}

\section{素イデアルと極大イデアル}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    素イデアルの性質は半順序を定める．束と双対なのが強調される．
\end{tcolorbox}

\subsection{素イデアル・極大イデアルの定義と特徴付け}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    整数環$\Z$の性質$p\mid ab\Rightarrow p\mid a\lor p\mid b$とは，イデアルの言葉では$ab\in (p)\Rightarrow a\in(p)\lor b\in(p)$である．
    これが素イデアルの源霊性である．
    素イデアルは割ると整域になり，極大イデアルは割ると体になる（ように作った）．
    つまり，$\pi:A\epi A/I$が定めるイデアルの対応により，$A/I$の言葉で特徴付けられる．$0$というイデアルは特別であり，これとどのように対応づくかによってイデアルの性質が決まる．
    実は素イデアルの例に極大イデアルがある．ここで極大性が現れるとは．近いのか．
\end{tcolorbox}

\begin{definition}[prime, maximal]
    可換環$A$のイデアルについて，
    \begin{enumerate}
        \item イデアル$\p$が\textbf{素}であるとは，次の２条件を満たすことをいう：
        \begin{enumerate}[(a)]
            \item (properness) $\p\ne A$．
            \item $\forall_{a,b\in A}\;ab\in\p\Rightarrow a\in\p\lor b\in\p$．
        \end{enumerate}
        \item イデアル$\m$が\textbf{極大}であるとは，次の２条件を満たすことをいう：
        \begin{enumerate}[(a)]
            \item (properness) $\m\ne A$．
            \item $A$のイデアル$I$であって，$\m\subsetneq I\subsetneq A$を満たすものは存在しない．
        \end{enumerate}
    \end{enumerate}
\end{definition}

\begin{proposition}[素・極大の特徴付け]\label{prop-characterization-of-prime-and-maximal-ideal}
    $I$を可換環$A$のイデアルとする．
    \begin{enumerate}
        \item $I$が素であることは，$A/I$が整域であることに同値．
        \item $I$が極大であることは，$A/I$が体であることに同値．
    \end{enumerate}
\end{proposition}
\begin{proof}
    まず，$I$が真のイデアルであることは，$A/I$が零でないことに同値．したがって，残りは整域と体の特徴付け\ref{remark-integral-domain},\ref{remark-field}を確認すれば良い．
    \begin{enumerate}
        \item $I$が素であるための条件(b)$\forall_{a,b\in A}\;ab\in I\Rightarrow a\in I\lor b\in I$は（逆は自明），$A/I$が整域であるための条件\ref{remark-integral-domain}$\forall_{a',b'\in A/I}\;a'b'=0\Leftrightarrow a'=0\lor b'=0$に同値．
        \item 体の特徴付け\ref{prop-characterization-of-field}より，$A/I$が体であることは$0\subsetneq\o{J}\subsetneq A/I$を満たす$A/I$のイデアル$\o{J}$が存在しないことと同値で，これはイデアルの対応\ref{prop-correspondence-of-ideals}より，$I$が極大であるための条件(b)$I\subsetneq J\subsetneq A$を満たす$A$のイデアル$J(=\pi^*(\o{J}))$が存在しないことに同値．
    \end{enumerate}
\end{proof}

\begin{corollary}
    極大イデアルは素である．
\end{corollary}
\begin{proof}
    体は整域である（可逆元は正則なので）ことと，素イデアルの特徴付け\ref{prop-characterization-of-prime-and-maximal-ideal}より．
\end{proof}

\begin{example}[素イデアルと極大イデアル]\mbox{}\label{exp-prime-ideals-of-Z}
    \begin{enumerate}
        \item $\Z$のイデアルは$n\Z$の形をしている\ref{exp-ideal-of-Z}．$n\Z$が素であることは，$\Z/n\Z$が整域であることに同値だから，$n=0$であるか，$n$が素数であることに同値．$n\Z$が極大であることは，$n$が素数であることに同値．
        \item $(X-a)$は$F[X,Y]$の素イデアルであるが，極大イデアルではない．実際，評価写像$\ev_a:F[X,Y]\epi F[Y]$について，準同型定理より$F[X,Y]/(X-a)\simeq F[Y]$であるが，$F[Y]$は$F$が体だから整域である\ref{prop-if-A-polynomials-is-integral-domain}が，体ではない．
        \item $(X-a,Y-b)$は$F[X,Y]$の極大イデアルになる：$\o{\ev_{a,b}}:F[X,Y]/(X-a,Y-b)\iso F$．
    \end{enumerate}
\end{example}
\begin{remark}[体上有限生成環の理論]
    体上有限生成環とは，$k[X^1,\cdots,X^n]$の剰余環として得られる環のことであり，
    代数幾何学におけるaffine代数多様体の理論\footnote{これは一般の代数多様体の局所理論にあたる．}や，
    Noether環のイデアル論の雛形として重要であった．
    Hilbertの零点定理とは，このような体上有限生成環$A$の素イデアルは，これを含む極大イデアルの共通部分として書けることを主張する．
    $n$変数多項式について，$(X_1-a_1,X_2-a_2,\cdots,X_n-a_n)$という形のイデアルは極大になり，$F$が代数閉体のとき，この形のものに尽きる．
    したがって，$F^n$の元(affine平面)と$F[X_1,\cdots,X_n]$の極大イデアルとが対応する．素イデアルも考えるのはscheme論．
\end{remark}

\subsection{素イデアル・極大イデアルの対応}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    イデアルが素であるまたは極大であるという性質は，射$\pi:A\to A/I$について
    関手的である．これは妙である．
    また，素イデアルの逆像は素イデアルである．
\end{tcolorbox}

\begin{proposition}[逆像関手は素イデアルを保つ]\label{prop-preimage-of-prime-ideal-is-prime}
    $f:A\to B$を環準同型とする．$B$の素イデアル$\p$に対し，$f^{-1}(\p)$は$A$の素イデアルである．
\end{proposition}
\begin{proof}
    $f$が定める単射$\o{f}:A/f^{-1}(q)\mono B/q$について，$B/q$が整域だから$A/f^{-1}(q)$も整域となる（包含写像としての単射\ref{prop-mono-as-inclusion}）．
\end{proof}
\begin{remark}
    整域の部分環は整域だが，一方で体の部分環は体とは限らない（その部分環が，全ての逆元も含んでいるとは限らない）．
    したがって，同様の命題は極大イデアルについては成り立たない．$f:\Z\mono\Q$の$f^{-1}(0)=0$が反例となる．
\end{remark}
\begin{example}[characteristic]
    体の素イデアルは$0$だけだから，体$F$への，ただ一つの整数環からの射$\phi_F:\Z\to F$の核$\Ker\phi_F$は素イデアルになる．
    よって，$\exists_{n\in\N}\;\Ker\phi_F=n\Z$で，$n=0$または$n$は素数である\ref{exp-ideal-of-Z}．この$n$を体$F$の\textbf{標数}という．
\end{example}

\begin{proposition}[素イデアル・極大イデアルの対応]\label{prop-correspondence-of-prime-and-maximal-ideals}
    $\pi:A\epi A/I$を標準全射とする．$\pi^*,\pi_*$は素イデアル，極大イデアルを保つ．すなわち，
    \begin{enumerate}
        \item $A$の素イデアルであって$I$を含むものと，$A/I$の素イデアルとは包含関係も含めて一対一に対応する．
        \item $A$の極大イデアルであって$I$を含むものと，$A/I$の極大イデアルとは包含関係も含めて一対一に対応する．
    \end{enumerate}
\end{proposition}
\begin{proof}
    $I\subset J\subset A$について，第３同型定理\ref{cor-iso-3}より$A/J\simeq(A/I)/(J/I)$であるから，$A/J$が整域・体であることと$(A/I)/(J/I)$が整域・体であることは同値．
\end{proof}

\subsection{極大イデアルの存在と局所環}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    イデアルは可換環の部分集合系$P(A)$の中で帰納的順序集合を成している．その極大イデアルが一意的＝上に完備な束を成しているとき，これを局所環という．
    代数幾何学的立場からは，空間内の１点の局所的な振る舞いを記述すると考えられる．
    函数芽の環は可換局所環で，極大イデアルは$f(0)=0$を満たす関数の全体と考えられる．\footnote{\url{https://ja.wikipedia.org/wiki/局所環}}
\end{tcolorbox}

\begin{proposition}[AC]\label{prop-existence-of-maximal-ideals}
    可換環$A$が零でないならば，極大イデアルは存在する．特に，素イデアルは存在する．\footnote{体論への帰着が使える．}
\end{proposition}
\begin{proof}
    \[\cS:=\Brace{I\subsetneq A\mid IはAのイデアル}\]
    とすると，$\cS$は包含順序について帰納的である．
    実際，任意の全順序部分集合$\Lambda\subset\cS$を取ると，$\Lambda=\emptyset$ならば$0\in\cS$は上界になる（$A$が零環でないことより）．
    $\Lambda\ne\emptyset$の場合は，$I_\Lambda:=\cup_{I\in\Lambda}I\in\cS$が上界になることを示す．
    \begin{enumerate}
        \item 任意の$x,y\in I_\Lambda$を取ると，$I,I'\in\Lambda$が存在して，$x\in I,y\in I'$．すると$\Lambda$は全順序だから$I\subset I'$または$I'\subset I$で，$I,I'$の大きい方を$I''$とすると，$x,y\in I''$が成り立つ．よって，$x+y\in I''\subset I_\Lambda$．
        \item $\forall_{a\in A}\;\forall_{x\in I_\Lambda}\;ax\in I_\Lambda$は$a=0$の場合も含めて明らかに成り立つ．
        \item $1\notin I_\Lambda$より，$I_\Lambda\ne A$より，確かに$I_\Lambda\in\cS$．
    \end{enumerate}
    よって，Zornの補題から，$\cS$は極大元$\m$を持つが，$\cS$の極大元とは，$A$の極大イデアルに他ならない．
\end{proof}
\begin{remarks}
    Zornの補題の要件である帰納的順序集合とは，「任意の全順序部分集合は上界を持つ」であるが，これは空でないことも含意している．
    また，重要な証明抽出として，イデアルの任意合併はイデアルである．任意共通部分も同じだろうか？
    ネーター環の議論もそうであるが，環論が基礎論に近づいていくのは面白い．イデアルがここまで基本的な対象であることが不思議である．
\end{remarks}

\begin{corollary}\label{cor-maximal-ideal-connected-to-other-ideals}
    任意の可換環のイデアル$I\subsetneq A$に対して，$A$の極大イデアルであって$I$を含むものが存在する．
\end{corollary}
\begin{proof}
    商環$A/I$に関する極大イデアルの存在\ref{prop-existence-of-maximal-ideals}と極大イデアルの対応\ref{prop-correspondence-of-prime-and-maximal-ideals}より．
\end{proof}
\begin{remarks}
    極大イデアルは一般に複数存在し，イデアル$I\subsetneq A$を指定するたびに，いくつかが対応する描像が浮かび上がる．例えば$\Z$の構造\ref{exp-prime-ideals-of-Z}．
\end{remarks}

\begin{definition}[local ring (38年)]
    可換環$A$の極大イデアルが一意的であるとき，これを\textbf{局所環}という．
\end{definition}
\begin{example}\mbox{}
    \begin{enumerate}
        \item 体は一意な極大イデアル$0$を持つので，局所環である．
        \item $n\ge 1$について，$\Z/n\Z$が局所環であることと，$n$を割り切る素数がただ一つであることは同値．実際，$\Z$の極大イデアルは素数$p$を用いて$p\Z$と表せるものに限られる\ref{exp-prime-ideals-of-Z}から，極大イデアルの対応\ref{prop-correspondence-of-prime-and-maximal-ideals}より．
    \end{enumerate}
\end{example}

\begin{proposition}[局所環の特徴付け]
    可換環$A$について，次の２条件は同値．
    \begin{enumerate}
        \item $A$は局所環である．
        \item $\m:=A\setminus A^\times$は$A$のイデアルである．
    \end{enumerate}
    また，この同値な条件が成り立つとき，$\m$は$A$のただ一つの極大イデアルとなる．
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] $A$は局所環だから，極大イデアル$\m_A$が一意的に存在する．$\m=\m_A$と示す． \begin{enumerate}
            \item $\m_A\subset\m$を示す．$a\in\m_A$のとき，$a\notin A^\times$である．$a\in A^\times$ならば，$a^{-1}\in A$について，$a^{-1}a=1\in\m_A$がしたがって$\m_A\ne A$に矛盾．よって，$a\in\m_A\Rightarrow a\in\m$．
            \item $\m_A\supset\m$を示す．$a\in A\setminus A^\times$ならば，$1\notin(a)$より，$(a)\subsetneq A$．よって，$(a)$を含む極大イデアルが存在することが必要である\ref{cor-maximal-ideal-connected-to-other-ideals}が，これが$\m_A$である必要があるから，$(a)\subset\m_A\subsetneq A$．よって特に，$a\in\m_A$．
        \end{enumerate}
        \item[(2)$\Rightarrow$(1)] $\m:=A\setminus A^\times$が$A$のイデアルになるとする．$A=0$ならば$A\setminus A^\times=\emptyset$はイデアルではないから，$A\ne 0$．
        よって，極大イデアル$\m'\subsetneq A$が存在する\ref{prop-existence-of-maximal-ideals}．極大イデアルについては$\m'\subset A\setminus A^\times=\m$が成り立つ．しかし，$\m\ne A$で，$\m'$は極大イデアルであるから，これは$\m=\m'$を意味する．よって，$A$の極大イデアルは一意的であるから，$A$は局所環である．
    \end{description}
\end{proof}
\begin{remarks}
    一般に極大イデアルがただ一つしか存在しない場合は，その表示は$\m:=A\setminus A^\times$となり，この構成がイデアルを作る場合は必ず一意的な極大イデアルとなる．
    また，次の２条件とも同値．
    \begin{enumerate}
        \item $R$と異なるイデアルは$\m$に含まれる．
        \item $\m$の任意の元$x$に対し，$1+x$は単元である．
    \end{enumerate}
\end{remarks}

\section{局所化と商体}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    環に分母を付けて元を増やし，特に単元を増やす操作を考える．
    $s\in S$について，
    $\iota(s)=\frac{s}{1}$となるから，これに対して$\frac{1}{s}$という逆元が見つかる．
    非可逆元を積閉集合$S$に入れるのが良い．
    環を一番大きくする構成が商体の構成であり，$\Z\mono\Q$にあたる．
\end{tcolorbox}

\subsection{局所化の定義と普遍性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    局所環とは$A\setminus A^\times$が極大イデアルを与えるような環である．
    環に分母を附ける操作を一般化する．素イデアルが点で，その間の準同型が関数であり，局所化は近傍を表す．
    局所化の普遍性は，目標の積閉集合$S$を単元に埋め込むようなもののうち，最小のもの（始対象）である．
\end{tcolorbox}

\begin{definition}[multiplicative subset]
    可換環の部分集合$S\subset A$が\textbf{積閉集合}であるとは，次の２条件を満たすことをいう：
    \begin{enumerate}
        \item $1\in S$．
        \item $\forall_{s,t\in S}\;st\in S$．
    \end{enumerate}
\end{definition}
\begin{example}\mbox{}
    \begin{enumerate}
        \item $A$の素イデアル$\p$に対して，$A\setminus\p$は積閉集合である．実際，素イデアルの公理の同値変形となっている．
        \begin{enumerate}[(a)]
            \item $\p\ne A\Lrarrow 1\in A\setminus\p$．
            \item $\forall_{a,b\in\p}\;ab\in\p\Rightarrow a\in\p\lor b\in\p\Lrarrow a\notin\p\land b\notin\p\Rightarrow ab\notin\p$．
        \end{enumerate}
        \item $f\in A$に対し，$\Brace{f^n\in A\mid n\in\N}$は積閉集合となる．
    \end{enumerate}
\end{example}

\begin{definition}[localization]
    可換環$A$とその積閉集合$S\subsetneq A$について，
    \begin{enumerate}
        \item 関係$(a,s)\sim(a',s'):\Leftrightarrow \exists_{t\in S}\;t(as'-a's)=0$は$A\times S$上に同値関係を定める．\footnote{$A$が整域であり，$0\notin S$ならば，この関係は$as'=a's$と同値．また，$0\in S$の時は潰れた同値関係$A\times S$を定める．}
        \item 商集合を$S^{-1}A:=A\times S/\sim$と表し，その元を$\frac{a}{s}:=[(a,s)]$と表す．すると，次の演算について，$S^{-1}A$は再び可換環となる：\[\frac{a}{s}+\frac{a'}{s'}=\frac{as'+a's}{ss'},\quad\frac{a}{s}\cdot\frac{a'}{s'}=\frac{aa'}{ss'}.\]
        \item $A$のイデアル$I$に対し，$S^{-1}I$は$S^{-1}A$のイデアルである．
    \end{enumerate}
\end{definition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{enumerate}[(a)]
            \item $t(as-as)=0$より$(a,s)\sim(a,s)$．
            \item $(a,s)\sim(a',s')\Rightarrow(a',s')\sim(a,s)$．
            \item $(a,s)\sim(a',s'),(a',s')\sim(a'',s'')$とする．すなわち，$\exists_{t,t'\in S}\;t(as'-a's)=t'(a's''-a''s')=0$．すなわち，$tas'=ta's,t'a's''=t'a''s'$．第二式の両辺に$ts$を乗じて，$t'':=tt's$とおくと，$A$が可換であることに注意して，
            \[tst'a's''=tst'a''s'\Lrarrow (ta's)t's''=(tt's')a''s\Lrarrow tas't's''=t''as''=t''a''s.\]
        \end{enumerate}
        \item 加法は結合的で，$\frac{0}{1}$を単位元とし，$\frac{a}{s}$の逆元は$\frac{-a}{s}$である．積も結合的で可換で，$\frac{1}{1}$を単位元とする．最後に分配法則も成り立つ．
    \end{enumerate}
\end{proof}
\begin{remarks}
    分数とは「比が同じ」という同値類である．
    しかし，その関係は$S$が正則元のみからなるとは限らない場合は非自明で，$\frac{a}{s}=\frac{a'}{s'}\Leftrightarrow\exists_{t\in S}\;tas'=ta's$となる．
\end{remarks}
\begin{remark}
    $0\in S\Leftrightarrow S^{-1}A=\{0\}$．
\end{remark}

\begin{proposition}[局所化の普遍性]\label{prop-universality-of-localization}\mbox{}
    \begin{enumerate}
        \item 写像$\iota:A\to S^{-1}A;a\mapsto\frac{a}{1}$は環準同型である．また，$S$が$A$の正則元のみからなるとき，そしてその時に限り，単射である．特に，$A$が整域であり，$0\notin S$であるとき，単射である．
        \item 任意の環準同型$f:A\to B$に対して，$f(S)\subset B^\times$ならば，環準同型$g:S^{-1}A\to B$であって次を可換にするものが一意的に存在する：\[\xymatrix{
            A\ar[r]^-f\ar[d]_-\iota&B\\
            S^{-1}A\ar@{.>}[ur]_-{g}
        }\]
        また，このときの$g:S^{-1}A\to B$とは，$g\paren{\frac{a}{s}}=f(s)^{-1}f(a)$で定まる写像である．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $S^{-1}A$の加法・乗法の定め方より，$\iota$は演算を明らかに保ち，環準同型となる．$\iota(a)=0$とは$\frac{a}{1}=0$すなわち$\exists_{s\in S}\;as=0$ということであるから，$S$が$A$の正則元のみからなるときこれは$a=0$を意味し，$\iota$は単射である．
        \item 写像$g:S^{-1}A\to B$を$\frac{a}{s}\mapsto f(s)^{-1}f(a)$と定めると，これは写像としてwell-definedであり，環の準同型であり，図式を可換にし，一意的であることを示す．
        \begin{description}
            \item[well-definedness] 任意の$a,a'\in A,s,s'\in S$について，$\frac{a}{s}=\frac{a'}{s'}$を満たすと仮定し，$f(s)^{-1}f(a)=f(s')^{-1}f(a')$を導く．仮定より，$\exists_{t\in S}\;tas'=ta's$．したがって，$f(t)f(a)f(s')=f(t)f(a')f(s)$であるが，仮定の$f(s),f(s'),f(t)\in\Im f\subset B^\times$より，$f(s)^{-1}f(a')=f(s')^{-1}f(a)$が従う．
            \item[準同型] 環準同型の３公理は次のように示される： \begin{align*}
                g\paren{\frac{a}{s}+\frac{a'}{s'}}&=g\paren{\frac{as'+a's}{ss'}}=f(ss')^{-1}f(as'+a's)\\
                &=f(s)^{-1}f(a)+f(s')^{-1}f(a')=g\paren{\frac{a}{s}}+g\paren{\frac{a'}{s'}}\\
                g\paren{\frac{a}{s}\cdot\frac{a'}{s'}}&=g\paren{\frac{aa'}{ss'}}=f(ss')^{-1}f(aa')=g\paren{\frac{a}{s}}\cdot g\paren{\frac{a'}{s'}}\\
                g\paren{\frac{1}{1}}&=f(1)^{-1}f(1)=1.
            \end{align*}
            \item[図式の可換性]
            $g(\iota(a))=g\paren{\frac{a}{1}}=f(1)^{-1}f(a)=f(a)$より．
            \item[一意性]
            $g':S^{-1}A\to B$も$g'\circ\iota=f$を満たすとして，$g'=g$を導く．任意の$a\in A,s\in S$に対して，$sa=sa\cdot 1$より，$\frac{s}{1}\cdot\frac{a}{s}=\frac{sa}{s}=\frac{a}{1}$が成り立つから，
            \begin{align*}
                g'\paren{\frac{s}{1}}g'\paren{\frac{a}{s}}&=g'\paren{\frac{a}{1}}=g'(\iota(a))=f(a),\\
                g'\paren{\frac{s}{1}}&=g'(\iota(s))=f(s),
            \end{align*}
            より，$f(s)g'\paren{\frac{a}{s}}=f(a)$であるから，$g'\paren{\frac{a}{s}}=f(s)^{-1}f(a)=g\paren{\frac{a}{s}}$が従う．よって，$g=g'$．
        \end{description}
    \end{enumerate}
\end{proof}
\begin{remarks}
    局所化も大きな空間を作ってから割っているので，テンソル積の普遍性と似ている．
\end{remarks}

\subsection{局所化の性質と普遍性の利用}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    局所化の構成$\iota:A\to S^{-1}A$とは，積閉集合を$S^{-1}A$の単元に「埋め込む」．積閉集合$S$は，$S^{-1}A$で可逆になる：$\iota(S)\subset(S^{-1}A)^\times$．$\iota(s)=\frac{s}{1}$の逆元は$\frac{1}{s}$である．一般に$\frac{1}{s}\in\iota(S)$ではない．\footnote{$1/2$などは整数としては表せないということ．}
    $S$が$A$の正則元のみからなるとき，単射になる．$A=\Z,S=\Z\setminus\{0\}$とした場合が$\Z\mono\Q=\Frac\Z$の構成に当たる．
\end{tcolorbox}

\begin{proposition}[局所化の局所化]\label{prop-localization-of-localized-ring}
    $S,S'\subset A$を積閉集合で，$S\subset S'$を満たすものとする．$\iota:A\to S^{-1}A$による$S'$の像も$S'$と表すと，$S'^{-1}A\simeq S'^{-1}(S^{-1}A)$が成り立つ．
    \[\xymatrix{
        A\ar[d]_-\iota\ar@{.>}[dr]^-\sim\\
        S^{-1}A\ar[r]_-{\iota'}&S'^{-1}(S^{-1}A)
    }\]
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[互いに逆な射の構成] 合成$\iota'\circ\iota:A\to S'^{-1}(S^{-1}(A))$による$S'$の像は$(S'^{-1}(S^{-1}A))^\times$に含まれるので，局所化の普遍性\ref{prop-universality-of-localization}より，準同型
        \[\xymatrix@R-2pc{
            f:S'^{-1}A\ar[r]&S'^{-1}(S^{-1}A)\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            \frac{a}{s'}\ar@{|->}[r]&\iota'(\iota(s))^{-1}\iota'(\iota(a))=\frac{a/1}{s'/1}
        }\]
        が引き起こされる．また，仮定$S\subset S'$より，$\iota'':A\to S'^{-1}A$による$S$の像も$(S'^{-1}A)^\times$に含まれるから，局所化の普遍性\ref{prop-universality-of-localization}より，
        \[\xymatrix@R-2pc{
            g:S^{-1}A\ar[r]&S'^{-1}A\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            \frac{a}{s}\ar@{|->}[r]&\iota''(s)^{-1}\iota''(a)=\frac{a}{s}
        }\]
        が引き起こされ，さらに$g$による$S'$の像も，$\iota''(S')$に等しいから$(S'^{-1}A)^\times$に含まれ，局所化の普遍性\ref{prop-universality-of-localization}より，
        \[\xymatrix@R-2pc{
            h:S'^{-1}(S^{-1}A)\ar[r]&S'^{-1}A\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            \frac{a/s}{s'/1}\ar@{|->}[r]&g\paren{\frac{s'}{1}}^{-1}g\paren{\frac{a}{s}}=\frac{a}{ss'}
        }\]
        が引き起こされる．
        \item[互いに逆であることの証明] $h\circ f=\id_{S'^{-1}A},f\circ h=\id_{S'^{-1}(S^{-1}A)}$が成り立つ．
    \end{description}
\end{proof}
\begin{remarks}
    これは$S\mono S'$のとき$S'^{-1}A\mono S^{-1}A$という描像ではないのか？それで準同型定理を使ったらどうなる？
\end{remarks}

\begin{proposition}[局所化と剰余環の関係]\label{prop-isomorphism-between-localizaion-and-quotient}
    $S\subset A$を積閉集合，$I\subset A$をイデアルとする．$\pi:A\epi A/I$による$S$の像も$S$と表すと，$S^{-1}A/S^{-1}I\simeq S^{-1}(A/I)$が成り立つ．
    \[\xymatrix{
        A\ar[r]^-\pi\ar[d]_-\iota&A/I\ar[d]^-{\iota'}\\
        S^{-1}A\ar[r]^-{\pi'}&S^{-1}A/S^{-1}I\simeq S^{-1}(A/I)
    }\]
\end{proposition}
\begin{proof}
    合成$\iota'\circ\pi:A\to S^{-1}(A/I)$について，$\iota'\circ\pi(S)\subset(S^{-1}(A/I))^\times$より（記号の混用に注意），局所化の普遍性\ref{prop-universality-of-localization}から
    \[\xymatrix@R-2pc{
        \pi'':S^{-1}A\ar[r]&S^{-1}(A/I)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        \frac{a}{s}\ar@{|->}[r]&\frac{\pi(a)}{\pi(s)}(=\iota'\pi(s)^{-1}\iota'\pi(a))
    }\]
    が引き起こされる．$\pi:A\epi A/I$が全射だから，$\pi'':S^{-1}A\to S^{-1}(A/I)$も全射に定まっている\footnote{$\iota'$はどうやっても単射なので，図式を可換にするに当たっては全射ではないが，準同型自体は全射に定まっているという状況……！？}．
    $S^{-1}I=\Ker\pi''$を示す．
    \begin{enumerate}
        \item $S^{-1}I\subset\Ker\pi''$：任意の$\frac{a}{s}\in S^{-1}I$について，$\pi''\paren{\frac{a}{s}}=\frac{\pi(a)}{\pi(s)}=\frac{0}{\pi(s)}=0$．
        \item $S^{-1}I\supset\Ker\pi''$：$\frac{a}{s}\in\Ker\pi''$とする．$\frac{\pi(a)}{\pi(s)}=0$より，$\exists_{t\in S}\;\pi(t)\pi(a)=\pi(ta)=0$．すなわち，$ta\in\Ker\pi=I$．よって，$\frac{a}{s}=\frac{ta}{ts}\in S^{-1}I$が従う．
    \end{enumerate}
    よって準同型定理より，$\o{\pi''}:S^{-1}A/S^{-1}I\iso S^{-1}(A/I)$を得る．
\end{proof}
\begin{remarks}
    剰余環を取る操作と局所化を取る操作は，同型を除いて可換であるという関手的消息．
    具体例は，$S=\Brace{f^n\in A\mid n\in\N,f\in A}$の場合がわかりやすい．$f$の冪を分母に持つ数同士の分数は，$f$の冪を括り出せる．
\end{remarks}

\subsection{局所化に於けるイデアルの対応}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    \begin{itemize}
        \item $A$の素イデアルであって$S$と交わらないもの
        \item $S^{-1}A$の素イデアル
    \end{itemize}
    が，包含関係を保って対応する．
    まさに「割り算」に対する「素数」のような振る舞い$\frac{a}{s}\in S^{-1}\p\Leftrightarrow a\in\p$をする（$S\cap\p=\emptyset$のとき，分母を払える）．
\end{tcolorbox}

\begin{lemma}[イデアルの表現]\label{lemma-expression-of-ideal-of-localization}
    $\iota:A\to S^{-1}A$を局所化とする．
    \begin{enumerate}
        \item $A$のイデアル$I$に対し，対応する$S^{-1}A$のイデアルは$S^{-1}I=\iota(I)S^{-1}A$（$\iota(I)$で生成されるイデアル\ref{notation-ideal-generated-by-image}）と表せる．
        \item $S^{-1}A$のイデアル$J$に対し，$J=S^{-1}(\iota^{-1}(J))$が成り立つ．この意味で「対応」する．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{description}
            \item[$S^{-1}I\subset\iota(I)S^{-1}A$] $S^{-1}I$の任意の元は，任意の$x\in I,s\in S$を用いて$\frac{x}{s}\in S^{-1}I$と表せる．$\frac{x}{s}=\iota(x)\cdot\frac{1}{s}\in\iota(S)\cdot S^{-1}A$．
            \item[$S^{-1}I\supset\iota(I)S^{-1}A$] 任意の$x\in I,a\in A,s\in S$に対して，$\iota(x)\cdot\frac{a}{s}=\frac{ax}{s}\in S^{-1}I$．
        \end{description}
        \item \begin{description}
            \item[$S^{-1}(\iota^{-1}(J))\subset J$] $a\in\iota^{-1}(J),s\in S$に対して，$\frac{a}{s}=\frac{1}{s}\iota(a)\in J$．
            \item[$S^{-1}(\iota^{-1}(J))\supset J$] 任意の$\frac{a}{s}\in J$に対して，$\iota(a)=\frac{a}{1}=\frac{s}{1}\cdot\frac{a}{s}\in J$より$a\in\iota^{-1}(J)$だから，$\frac{a}{s}\in S^{-1}(\iota^{-1}(J))$．
        \end{description}
    \end{enumerate}
\end{proof}
\begin{remark}
    (2)の逆の主張$I=\iota^{-1}(S^{-1}(I))$が任意の$A$のイデアル$I$について成り立つとは限らない．
    が，これが失敗する場合は，$S\cap\p\ne\emptyset$であるために，$S^{-1}\p$が$1\in S^{-1}\p$となって$S^{-1}A$全体に拡散してしまう場合に限る．
\end{remark}
\begin{remarks}
    $S^{-1}I=\iota(I)S^{-1}A$は，分母の$I$を$I=IA$と表せるのを利用しているように思える．
\end{remarks}

\begin{proposition}[素イデアルの対応]\mbox{}\label{prop-correspondence-of-prime-ideals-of-localization}
    \begin{enumerate}
        \item $A$の素イデアル$\p$が$S\cap\p=\emptyset$を満たすならば，$S^{-1}\p$は$S^{-1}A$の素イデアルである．
        \item $\q$を$S^{-1}A$の素イデアルとするとき，$\iota^{-1}(\q)$は$A$の素イデアルであり，$S\cap\iota^{-1}(\q)=\emptyset$が成り立つ．
        \item すなわち，$A$の素イデアルであって$S$と交わらないものと$S^{-1}A$の素イデアルが，包含関係を保って対応する．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{enumerate}[(a)]
            \item 補題より，$\frac{1}{1}\notin\S^{-1}\p\Lrarrow 1\notin\p$なので，$S^{-1}\p\ne S^{-1}A$が成り立つ．
            \item 任意の$a,a'\in A,s,s'\in S$について，$\frac{aa'}{ss'}\in S^{-1}\p\Lrarrow aa'\in\p$が成り立つと仮定する．$\p$は素イデアルだから，$a\in\p\lor a'\in\p$．したがって再び補題より，$\frac{a}{s}\in S^{-1}\p\lor\frac{a'}{s'}\in S^{-1}\p$．
        \end{enumerate}
        \item $\iota^{-1}(\q)$は素イデアルである\ref{prop-preimage-of-prime-ideal-is-prime}．$s\in S\cap\iota^{-1}(\q)$が取れると仮定して矛盾を導く．$\frac{s}{1}=\iota(s)\in\q$より，$1=\frac{1}{s}\cdot\frac{s}{1}\in\q$が従い，$\q$が素イデアルであることに矛盾．
        \item $S^{-1}(\iota^{-1}(\q))=\q$は前の補題に含意される．$\iota^{-1}(S^{-1}\p)=\p$は，$S\cap\p=\emptyset$のとき，補題より，$a\in\iota^{-1}(S^{-1}\p)\Leftrightarrow\frac{a}{1}\in S^{-1}\p\Leftrightarrow a\in\p$より従う．$\p\mapsto S^{-1}\p,\q\mapsto\iota^{-1}(\q)$は明らかに包含関係を保つ．
    \end{enumerate}
\end{proof}

\begin{lemma}
    $A$の素イデアル$\p$が$S\cap\p=\emptyset$を満たすとき，$\forall_{a\in A}\;\forall_{s\in S}\;\frac{a}{s}\in S^{-1}\p\Lrarrow a\in\p$．
\end{lemma}
\begin{proof}
    $\Rightarrow$を示せば良い．
    $\frac{a}{s}\in S^{-1}\p$のとき，$\frac{a}{s}=\frac{a'}{s'}$を満たす$a'\in\p,s'\in S$が存在するから，$\exists_{t\in S}\;t(as'-a's)=0$．このとき，$tas'=ta's\in\p$である．$S$は積閉集合であるから$ts'\in S$であり，$S\cap\p=\emptyset$の仮定より$ts'\notin\p$を得る．よって，$\p$は素イデアルだから$a\in\p$が従う．
\end{proof}
\begin{remarks}
    おそらく，$S\cap\p=\emptyset$ならば，分子に$\p$以外の元がこないこと，$\frac{\p}{\p}=\frac{1}{1}$のようなことが起こらないことを言っている．
\end{remarks}

\subsection{商体・局所環}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    局所環の例に商体がある．
    整域の局所化において，商体はある種の終対象である（一番大きい）．
    そこで，単射$A\mono\Frac A$を用いて，$A$の元を$\Frac A$の中に埋め込んで$\Frac A$での式として考える手法が多々用いられる．
    一意分解整域において単項分数イデアルを考えること\ref{prop-characterization-of-coprime-in-UFD}など．
\end{tcolorbox}

\begin{definition}[field of fractions / field of quotients]
    $A$を可換環とする．
    \begin{enumerate}
        \item $A$が整域であるとき，$A$の$A\setminus\{0\}$による局所化は体になる．これを$A$の\textbf{商体}とよび，$\Frac A$と表す．
        \item $\p$を$A$の素イデアルとするとき，$A$の$A\setminus\p$による局所化$A_\p$は局所環であり，その極大イデアルは$\p A\p$である．また，$A_\p/\p A\p\simeq\Frac A/\p$が成り立つ．$A_\p$を\textbf{$A$の$\p$に於ける局所化}と呼ぶ．
    \end{enumerate}
\end{definition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $S:=A\setminus\{0\}$と交わらないようなイデアルは$0$のみであり，$A$が整域であるという仮定から$0$は素イデアルである\ref{remark-integral-domain}．よって，素イデアルの対応\ref{prop-correspondence-of-prime-ideals-of-localization}より，$0=S^{-1}0$は$S^{-1}A$の唯一の素イデアルである．特に$0$は$S^{-1}A$の極大イデアルである必要があるから，$S^{-1}A$は体である．
        \item $S:=A\setminus\p$とする．
        \begin{enumerate}[(a)]
            \item $S$に含まれない素イデアルのうち最大であるものが$\p$だから，$S^{-1}\p=\p A_\p$（イデアルの表示\ref{lemma-expression-of-ideal-of-localization}）\footnote{任意の$\p$の元は$\p A$とかけることから，$S^{-1}\p=\p A_\p=\p S^{-1}A$}は$A_\p$の素イデアルであり，$A_\p$の任意の素イデアルは$\p A_\p$に含まれる．（$A_\p$は素イデアル$\p A_\p$を持つので零でないから）極大イデアル$\m$を任意に取ると，$\m$も素イデアルであり，$\m\subset\p A_\p$が従う．よって，$\m=\p A_\p$が従い，$\p A_\p$は$A_\p$の唯一の極大イデアルである．
            \item イデアルの表現\ref{lemma-expression-of-ideal-of-localization}と局所化と剰余環の関係\ref{prop-isomorphism-between-localizaion-and-quotient}より，
            $A_\p/\p A_\p=S^{-1}A/S^{-1}\p\simeq S^{-1}(A/\p)$．$\pi:A\epi A/\p$による$S=A\setminus\p$の像は$\pi(S)=(A/\p)\setminus\{0\}$であるから，$S^{-1}(A/\p)=\Frac A/\p$である．
        \end{enumerate}
    \end{enumerate}
\end{proof}
\begin{example}[商体の例]\label{exp-field-of-quotients}\mbox{}
    \begin{enumerate}
        \item $\Z$の商体が$\Q=\Frac\Z$である．
        \item $F$係数多項式環$F[X_1,\cdots,X_r]\;(r\ge 1)$は整域であり，この商体を\textbf{有理関数体}という：$\Frac K[X]=K(X)$．
        \item 形式冪級数環$K[[X]]$も整域であり，この商体を\textbf{形式Laurent級数体}$K((X))$と表す．
    \end{enumerate}
\end{example}

\begin{proposition}[整域の局所化に於ける商体の立ち位置]\label{prop-localization-of-integral-domains}
    $A$を整域，$S$をその積閉集合とする．$0\notin S$ならば$S^{-1}A$も整域であり，単射準同型$S^{-1}A\mono\Frac A$が存在する．さらに，$\Frac S^{-1}A\simeq\Frac A$が成り立つ．
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[$S^{-1}A$も整域] 
        $A$は整域であるから，$0$は$A$の素イデアルであり\ref{remark-integral-domain}，仮定$0\notin S$より$0\cap S=\emptyset$．よって素イデアルの対応\ref{prop-correspondence-of-prime-ideals-of-localization}により，$0=S^{-1}0$は$S^{-1}A$の素イデアルである．よって，$S^{-1}A$は整域．
        \item[単射の存在]
        $S':=A\setminus\{0\}$とおくと，$\Frac A=S'^{-1}A$及び$S\subset S'$が成り立つから，命題\ref{prop-localization-of-localized-ring}より，$\varphi:S'^{-1}(S^{-1}A)\iso S'^{-1}A=\Frac A$が存在する．一方，$\iota:A\mono S^{-1}A$は単射で$0\notin S'$だから，$S'$の$S^{-1}A$における像$\iota(S')$も$0$を含まず，したがって$\iota':S^{-1}A\mono S'^{-1}(S^{-1}A)$も単射である（局所化の普遍性\ref{prop-universality-of-localization}）．よって，$\varphi\circ\iota':S'A\mono\Frac A;\frac{a}{s}\mapsto\frac{a}{s}$は単射．
        \item[局所化の商体と同型]
        $S'':=(S^{-1}A)\setminus\{0\}$とおくと，$\Frac S^{-1}A=S''^{-1}(S^{-1}A)$と表せる．単射$\varphi\circ\iota':S^{-1}A\mono\Frac A$による$S''$の像は$(\Frac A)^\times=\Frac\setminus\{0\}$に含まれるから，局所化の普遍性\ref{prop-universality-of-localization}より，環準同型$f:\Frac S^{-1}A\to\Frac A$が引き起こされる．
        \[\xymatrix{
            S^{-1}A\;\ar@{^{(}->}[r]^-{\varphi\circ\iota'}\ar@{^{(}->}[d]&\Frac A\\
            \Frac S^{-1}A\ar@{.>}[ur]_-f
        }\]
        任意の$\frac{a}{b}\in\Frac A\;(a\in A,b\in A\setminus\{0\})$に対して，$\frac{b}{1}\in S''=(S^{-1}A)\setminus\{0\}$であるから，$\frac{a/1}{b/1}\in f^{-1}\paren{\frac{a}{b}}$が見つかり，$f$は全射．
        また，$\Frac S^{-1}A$は体であり，$\Frac A$は零でないから，$f$は単射\ref{prop-morphism-from-fields}．
    \end{description}
\end{proof}

\subsection{冪零根基}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    冪零根基は，全ての素イデアルの共通部分である．
    すごい，極めて非自明だ．
\end{tcolorbox}

\begin{lemma}[冪零根基の元の特徴付け]
    $f\in A$に対し，$A$の積閉集合$\{f^n\in A\mid n\in\N\}$による局所化を$A_f$と表す．このとき，$f\in\sqrt{0}\Lrarrow A_f=0$．
\end{lemma}
\begin{proof}
    \[A_f=0\Lrarrow\frac{1}{1}=\frac{0}{1}\overset{def}{\Lrarrow}\exists_{n\in\N}\;f^n\cdot 1=f^n=0.\]
    というより，$0\in S\Leftrightarrow S^{-1}A=0$より．
\end{proof}
\begin{corollary}[冪零根基の表現]
    $A$を可換環とするとき，$\bigcap_{\p:Aの素イデアル}\p=\sqrt{0}$．
\end{corollary}
\begin{proof}\mbox{}
    \begin{description}
        \item[$\cap\p\supset\sqrt{0}$] 任意の$A$の素イデアル$\p$について$\p\supset\sqrt{0}$が成り立つことを示せば良い．任意に$a\in\sqrt{0}$を取ると，$\exists_{n\in\N}\;a^n=0\in\p$であるから，$a\in\p$が従う．
        \item[$\cap\p\subset\sqrt{0}$] $f\in\bigcap_{\p:Aの素イデアル}\p$を任意に取る．すると，$A$の素イデアルは必ず$f$を含むから，$A_f$は素イデアルを持たない（素イデアルの対応\ref{prop-correspondence-of-prime-ideals-of-localization}）．よって，素イデアルの存在\ref{prop-existence-of-maximal-ideals}の対偶より，$A_f=0\Lrarrow f\in\sqrt{0}$．
    \end{description}
\end{proof}

\section{単項イデアル整域}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    \[体\mono (ユークリッド整域)\mono 単項イデアル整域\mono 一意分解整域\mono 整域\mono 可換環\]
    $\Z,F[X]$はEuclid整域である．
    一意分解整域係数の多項式環は一意分解整域であるが，単項イデアル整域係数の多項式は単項イデアル整域とは限らない．
    体係数多項式環は単項イデアル整域である．
    体係数の多変数多項式環は一意分解整域である．
\end{tcolorbox}

\subsection{定義と例}

\begin{definition}[PID: principal ideal domain]
    整域$A$について，$A$の任意のイデアルが単項イデアルであるとき，$A$を\textbf{単項イデアル整域}という．
\end{definition}
\begin{definition}[degree function, Euclidean ideal]\mbox{}
    \begin{enumerate}
        \item 整域$A$について，写像$H:A\setminus\{0\}\to\N$が\textbf{Euclid関数}であるとは，次が成り立つことをいう：$\forall_{a\in A}\;\forall_{b\in A\setminus\{0\}}\;\exists_{q,r\in A}\;a=qb+r\land(r=0\lor H(r)<H(b))$．
        \item Euclid関数を少なくとも１つ持つような整域$A$を\textbf{Euclid整域}という．
    \end{enumerate}
\end{definition}
\begin{example}[Euclid整域]\mbox{}\label{exp-Euclidean-ideal}
    \begin{enumerate}
        \item $A=\Z$に対し，$H:\Z\setminus\{0\}\to\N$を$H(-)=\abs{-}$と定めると，これはEuclid関数である．
        \item $F$を体とする．$A=F[X]$に対し，$H:F[X]\setminus\{0\}\to\N$を$H=\deg$と定めると，これはEuclid関数である（この主張を剰余定理という）．
    \end{enumerate}
\end{example}

\begin{proposition}\label{prop-Euclidean-ideal-then-PID}
    Euclid整域は単項イデアル整域である．
\end{proposition}
\begin{proof}
    Euclid整域$A$上の
    Euclid関数$H:A\setminus\{0\}\to\N$を任意に取る．
    $I\subset A$を任意のイデアルとし，これが単項生成可能であることを示せば良い．
    \begin{description}
        \item[構成] $I=0$のときは$I=(0)$であるから，$I\ne 0$の場合を考える．$\Brace{H(a)\in\N\mid a\in I\setminus\{0\}}$を最小にする$a_0\in I\setminus\{0\}$を１つ取ると，$I=(a_0)$であることを示す．
        \item[証明] $a\in I$を任意に取ると，$a=qa_0+r$かつ$r=0\lor H(r)<H(a_0)$を満たす$q,r\in A$が存在する．$r\ne 0$ならば，$r=a-qa_0\in I\setminus\{0\}$より，$a_0$の定め方より$H(a_0)\le H(r)$が必要だが，これは矛盾を起こすから$r=0$が必要．すなわち，$a=qa_0\in (a_0)$である．
    \end{description}
\end{proof}
\begin{remarks}
    抽象化された剰余計算である．
\end{remarks}

\subsection{素イデアルの消息}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    素イデアルは２階層になっていて，$\p=0$であるか，極大イデアルであるかのいずれかである．
    さらに単項イデアル整域は一意分解整域でもあるから，素元と既約元は一致し，既約元が生成する単項イデアルは（既約元は零でないので）極大イデアルである．
\end{tcolorbox}

\begin{proposition}[PIDの極大イデアルの特徴付け]\label{prop-maximal-ideal-of-PID}
    $A$を体でない単項イデアル整域とする．次の２条件は同値．
    \begin{enumerate}
        \item 素イデアル$\p$が極大である．
        \item $\p\ne 0$．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] $A/0=A$は体ではないので，$0$は極大イデアルではない．よって，$\p\ne 0$．
        \item[(2)$\Rightarrow$(1)] $\p\subsetneq I$を満たす任意のイデアル$I$に対し，$A=I$を導く．
        $A$は単項イデアル整域であるから，$\p\ne 0$であるとき，ある$a\in A\setminus\{0\}$が存在して$\p=(a)$となり，$x\in A$が存在して$I=(x)$となる．仮定$\p\subset I$は$\exists_{y\in A}\; a=xy$を含意する．
        すると特に$xy\in(a)=\p$より，$x\in\p\lor y\in\p$が従う．

        $x\in\p$ならば$I=(x)\subset\p$となるから，仮定に反する．$y\in\p$のとき，$\exists_{z\in A}\;y=az$であり，$a=xy$と併せて$a=xaz\Lrarrow a(xz-1)=0$．$A$は整域で$a\ne 0$としたから，$xz=1\in(x)=I$が従う．よって，$I=A$．
    \end{description}
\end{proof}

\subsection{局所化についての閉性}

\begin{proposition}
    $A$を単項イデアル整域とし，$S$をその積閉集合とする．$0\notin S$ならば，$S^{-1}A$は再び単項イデアル整域である．
\end{proposition}
\begin{proof}
    $0\notin S$のとき，整域の局所化は整域である\ref{prop-localization-of-integral-domains}から，$S^{-1}A$は整域である．
    $J$を$S^{-1}A$の任意のイデアルとし，これが単項生成であることを示せば良い．
    単射$\iota:A\mono S^{-1}A$について，$\iota^{-1}(J)$も$A$のイデアル\ref{prop-kernel-of-ring-homomorphism}であり，したがって単項生成である．
    イデアルの表現\ref{lemma-expression-of-ideal-of-localization}(1)(2)より，$J=\iota(\iota^{-1}(J))\cdot S^{-1}A$より，$J$も単項イデアルである．
\end{proof}

\section{一意分解整域}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    単項イデアル性も大きな性質であったが，より中間的な性質である$\Z$の素因数分解の一意性に迫る．
    これは単項イデアル整域よりも広いクラスとなる．
\end{tcolorbox}

\subsection{整域の元の性質}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $\Z$の単元は２つであること
    $\Z^\times=\{\pm 1\}$を念頭におく．$\Z^\times$の作用により同じ軌道の属する元を同伴という．
    この性質を，イデアルに注目することで一般の整域に適用する．
    $\Z$の既約元とは，素数とその$-1$倍をいう．
    $\Z$や$\Z[X_1,\cdots,X_n]$などの一意分解整域においては既約元と素元が一致する．
    既約元の見つけ方は素イデアルに注目するのがよく，素イデアルを生成する零でない元を素元という．
\end{tcolorbox}

\begin{definition}[associated element, irreducible element, prime element]
    $A$を整域とする．
    \begin{enumerate}
        \item $a,b\in A$が\textbf{同伴}であるとは，次が成り立つことをいう：$\exists_{u\in A^\times}\;b=ua$．
        \item $a\in A$が\textbf{既約元}であるとは，$a\notin A^\times\cup\{0\}$かつ$\forall_{b,c\in A}\;a=bc\Rightarrow b\in A^\times\lor c\in A^\times$が成り立つことをいう．
        \item $a\in A$が\textbf{素元}であるとは，$a\ne 0$かつ$(a)$が素イデアルであることをいう．\footnote{後者の条件が$a\notin A^\times$も含んでいることに注意．}
    \end{enumerate}
\end{definition}
\begin{example}[多項式環の既約元と素元]
    多項式環$F[X]$の部分環$F[X^2,X^3]$において，$X^2$は既約元であるが素元ではない．

    実際，$f,g\in F[X^2,X^3]$が$X^2=fg$を満たすとき，いずれかは$0$次式，すなわち単元である必要がある．しかし，$(X^3)^2=(X^2)^3\in(X^2)$であるが，$X^3\notin (X^2)$であるので，素イデアルを生成しない．
\end{example}

\begin{lemma}[同伴性の特徴付け・素元は既約]\label{lemma-characterization-of-associatedness-and-prime-is-irreducible}
    $A$を整域とする．
    \begin{enumerate}
        \item $a,b\in A$が同伴であることは，同じイデアルを生成すること$(a)=(b)$に同値．
        \item $A$の任意の素元は既約元である．
        \item 同伴な元の既約性はすべて同値．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{enumerate}[(a)]
            \item $a,b\in A$が同伴であるとき，$\exists_{u\in A^\times}\;a=ub$より，$x\in(a)\Leftrightarrow \exists_{u\in A}x=ya=yub\in(b)$より，$(a)=(b)$が従う，
            \item 逆に，$(a)=(b)$であるとき，$a,b\in A$が同伴であることを示す．$(a)=(b)=0$ならば$a=b=0$より，$u=1\in A^\times$とすれば$b=ua$が成り立つ．$0\subsetneq(a)=(b)$のとき，$ab\ne 0$．
            特に$b\in(a)$より，$\exists_{u\in A}\;b=ua$で，$a\in(b)$より，$\exists_{u'\in A}\;a=u'b$．併せて，$a=u'b=u'ua$及び$a\ne 0$から，$A$が整域なので$uu'=1$すなわち$u\in A^\times$が従う．
        \end{enumerate}
        \item $p\in A$を素元とする．
        \begin{enumerate}[(a)]
            \item $(p)$は素イデアルなので，$(p)\subsetneq A$より，$p$は単元ではない．
            \item 任意に$a,b\in A$をとり，$p=ab\in(p)$を満たすとすると，$a\in(p)\lor b\in(p)$が従う．$a\in(p)$のとき，$\exists_{c\in A}\;a=pc$より，$p=ab=pcb$で，$p\ne 0$から，$A$が整域なので$cb=1$となって$b\in A^\times$が従う．同様に，$b\in(p)$の時は$a\in A^\times$が従う．
        \end{enumerate}
        \item $\exists_{u\in A^\times}\;b=ua$であるとき，$u$の定める左移動は全単射である．\footnote{さらに言えば，これが$A$の自己同型だからであろう．}
        したがって，条件$b(=ua)=xy\Rightarrow x\in A^\times\lor y\in A^\times\lor$の$x,y\in A$それぞれについて，$u^{-1}x,y$についての条件を考えれば良い．
    \end{enumerate}
\end{proof}
\begin{remarks}
    単項イデアル整域の極大イデアルの特徴付け\ref{prop-maximal-ideal-of-PID}で(2)(b)と同様の議論をした．
\end{remarks}

\subsection{定義と例}

\begin{definition}[UFD: unique factorization domain]
    整域$A$に対して，任意の元$a\in A\setminus\{0\}$に対する次の３条件は同値である．
    \begin{enumerate}
        \item (\textbf{既約元分解}と一意性) $a=up_1\cdots p_r\;(a\in A^\times,p_1,\cdots,p_r:既約元,r\in\N)$と順番と同伴の別を除いて一意に表せる．ただし，$r=0$の時は$p_1\cdots p_r=1$と約束する．すなわち，$a=up_1\cdots p_r=vq_1\cdots q_s$ならば，$r=s$かつ$\exists_{\sigma\in S_r}\;\forall_{i\in[r]}\;p_iとq_{\sigma(i)}は同伴$が成り立つ．
        \item (既約元分解と既約元と素元の一致) 既約元分解を持ち，かつ，$A$の任意の既約元は素元である．
        \item (\textbf{素元分解}) $a=up_1\cdots p_r\;(a\in A^\times,p_1,\cdots,p_r:素元,r\in\N)$と表せる．ただし，$r=0$の時は$p_1\cdots p_r=1$と約束する．
    \end{enumerate}
    整域$A$がこの同値な条件を満たすとき，\textbf{一意分解整域}という．特に，素元分解は既約元分解だから，一意分解整域において，任意の元$a\in A\setminus\{0\}$に素元分解は存在して順番を除いてと同伴の別を除いて一意である．
\end{definition}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] 
        任意の既約元$p\in A$を取り，これが素元であることを示せば良い．$p$は既約元だから$p\ne 0$．あとは$(p)$が素イデアルであることを示せば良い．
        特に$p$は単元ではないから，$p\subsetneq A$．
        よって，あとは$ab\in(p)\Rightarrow a\in(p)\lor b\in(p)$を示せば良い．
        $ab=0$の時は，$A$が整域であることから従うから，$ab\ne 0$の場合を考える．仮定$ab\in (p)$より，$\exists_{c\in A}\;ab=pc$．
        すると$a,b,c(\ne 0)$の既約元分解とその一意性により，$a$または$b$の既約元分解に，$p$と同伴な既約元が現れる．これより特に，$a\in(p),b\in(p)$．
        \item[(2)$\Rightarrow$(3)] この場合は任意の既約元分解が素元分解を与える．
        \item[(3)$\Rightarrow$(2)]
        素元は既約元\ref{lemma-characterization-of-associatedness-and-prime-is-irreducible}(2)であるから，任意の$a\in A\setminus\{0\}$は既約元分解を持つ．
        そこで，任意の既約元$a\in A$について，これが素元であることを示せば良い．素元分解$a=up_1\cdots p_r$を考えると，$a\notin A^\times$より$r\ge 1$である．
        $p_1$は素元なので，特に単元ではなく，$up_1\notin A^\times$．よって，$p_2\cdots p_r\in A^\times\Rightarrow p_2\in A^\times\land\cdots p_r\in A^\times$が従う．これは不合理なので，$r=1$で$a=up_1$，すなわち$(a)=(p_1)$であることがわかった．
        $(p_1)$は素イデアルであるから，$a$は素元である．
        \item[(2)$\Rightarrow$(1)]
        任意の$a\in A\setminus\{0\}$を取り，既約元分解を２つ$a=up_1\cdots p_r=vq_1\cdots q_s\;(r\le s)$と取り，一意性を示せば良い．
        $r=0$ならば，$a=u\in A^\times$となり，$s=0$が必要．よって成立．残った$r\ge 1$の場合を考える．

        特に$vq_1\cdots q_s\in(p_1)$で，$p_1$は既約元より，仮定から素元だから，$(p_1)$は素イデアルで，$v\notin(p_1)$と併せるとある$i\in[s]$が存在して，$q_i\in(p_1)$が必要．
        $q_i$は既約元であり，$p_1\notin A^\times$なので，$p_1$と$q_i$は同伴である：$\exists_{u_1\in A}\;q_i=u_1p_1$かつ$u_1\in A^\times$．
        このとき，$up_2\cdots p_r=u_1vq_1\cdots q_{i-1}q_{i+1}\cdots q_s$．これを繰り返すことで，$u=v'(残ったq_jがs-r個)\in A^\times$となるから，$r=s$が必要．
        こうして，全単射$\sigma:[r]\iso[r]$であって，$\forall_{i\in[r]}\;q_{\sigma(i)}=u_ip_i$を満たすものが定まる．
    \end{description}
\end{proof}
\begin{remarks}
    $p_2\cdots p_r\in A^\times\Lrarrow p_2\in A^\times\cdots p_r\in A^\times$などの単元の性質を何度か使った．単元と不可逆元との積は不可逆である．
\end{remarks}

\begin{proposition}\label{prop-PID-then-UFD}
    単項イデアル整域は一意分解整域である．
\end{proposition}
\begin{proof}
    条件(3)を用いて，ある元$a\in A\setminus\{0\}$が素元分解を持たないとして矛盾を導く．$a\in A^\times$ならば$r=0$の場合が素元分解となるから，$a\notin A^\times$の場合を考える．
    $A$の極大イデアル$\m$が存在して，$(a)\subset\m$が成り立つ（系\ref{cor-maximal-ideal-connected-to-other-ideals}）．
    $A$は単項イデアル整域なので，$\exists_{p_1\in A}\;(p_1)=\m$である．$p_1=0\Rightarrow\m=0\Rightarrow a=0$が従うから，$p_1\ne 0$かつ$(p_1)$は特に素イデアルより，$p_1$は素元である．
    したがって，$(a)\subset(p_1)=\m$は$\exists_{a_1\in A\setminus\{0\}}\;a=a_1p_1$を意味する．$a_1\in A^\times$ならばこれが素元分解を与えるから，$a_1\in A\setminus(A^\times\cup\{0\})$とする．
    同様の条件を得たから，この議論は繰り返すことができ，$\exists_{p_2:素元}\;\exists_{a_2\in A\setminus\{0\}}\;a_1=a_2p_2$となり，$a_2\notin A^\times$．
    これを繰り返すと，素元の列$(p_i)$と$A\setminus(A^\times\cup\{0\})$の列$(a_j)$であって，$a_i=a_{i+1}p_{i+1}\;(i\ge 1)$を満たすものを得る：$(a_1)\subset(a_2)\subset\cdots$．
    $I:=\cup_{i\ge 1}(a_i)$は$A$のイデアルであるから（極大イデアルの存在\ref{prop-existence-of-maximal-ideals}の証明抽出），
    $\exists_{x\in A}\;I=(x)$が必要．すると，ある$i\in I$について，$x\in (a_i)$であるから，$(x)\subset(a_i)\subset(a_{i+1})\subset I=(x)$を含意する．これは$(a_i)=(a_{i+1})$を意味する．
    よって補題\ref{lemma-characterization-of-associatedness-and-prime-is-irreducible}(1)より，$a_i$と$a_{i+1}$は同伴．$a_i=a_{i+1}p_{i+1}$と併せると，$a_{i+1}\ne 0$より$p_{i+1}\in A^\times$だが，これは$p_{i+1}$が素元であることに矛盾．
\end{proof}
\begin{remarks}[単項イデアル整域はNoether環である]
    単項イデアル整域が$A=\Z$の時は，イデアルの任意の昇鎖列$\{(a_i)\}_{i\in\N}$があった時，$\abs{a_i}$という値が減少するので，必ず有限停止をする．
    同じことを，一般の単項イデアル整域で議論した．この性質が，一意分解性を導く．
\end{remarks}

\begin{definition}[Noetherian ring]
    イデアルの包含関係が整礎的であるような環を\textbf{ネーター環}という．
    これはイデアルの上で帰納法が使えることを意味する．
\end{definition}

\subsection{局所化についての閉性}

\begin{lemma}
    $A$を一意分解整域，$S$をその積閉集合，$p\in A$を素元であるとする．
    \begin{enumerate}
        \item $(p)\cap S=\emptyset$ならば$\frac{p}{1}=\iota(p)$は$S^{-1}A$の素元である．
        \item $(p)\cap S\ne\emptyset$ならば$\frac{p}{1}=\iota(p)$は$S^{-1}A$の単元である．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $(p)\cap S=\emptyset$ならば，素イデアルの対応\ref{prop-correspondence-of-prime-ideals-of-localization}より，$(p)$に対応するイデアル$S^{-1}(p)=\iota((p))S^{-1}A=(\iota(p))$（$\iota(p)$が生成するイデアル\ref{lemma-expression-of-ideal-of-localization}(1)）は素イデアルである．$p\ne 0$より$\frac{p}{1}\ne 0$で，$\iota(p)\in S^{-1}A$も素元である．
        \item $(p)\cap S\ne\emptyset$のとき，$ap\in S$を満たす$a\in A$が存在する（$(p)$の任意の元は$ap$と表せる\ref{lemma-elements-of-ideal}ため）．
        このとき，$1=\frac{p}{1}\cdot\frac{a}{ap}$より，$\iota(p)$は$S^{-1}A$の単元である．
    \end{enumerate}
\end{proof}

\begin{proposition}
    $A$を一意分解整域とし，$S$をその積閉集合とする．$0\notin S$ならば，$S^{-1}A$は再び一意分解整域である．
\end{proposition}
\begin{proof}
    $S^{-1}A$は整域である（命題\ref{prop-localization-of-integral-domains}）．
    $S^{-1}A\setminus\{0\}$の任意の元は$a\in A\setminus\{0\},s\in S$を用いて$\frac{a}{s}$と表せる．これが素元分解を持つことを示す．

    $A$は一意分解整域としたから，素元分解$a=up_1\cdots p_r$が取れる．$p_1,\cdots,p_r$は，ある$1\le k\le r$について，
    \[\begin{cases}
        (p_i)\cap S\ne\emptyset,&1\le i\le k,\\
        (p_i)\cap S=\emptyset,&k+1\le i\le r
    \end{cases}\]
    を満たすように取る．すると，補題より，
    \[\frac{a}{s}=\underbrace{\frac{u}{s}\cdot\frac{p_1}{1}\cdots\frac{p_k}{1}}_{\in(S^{-1}A)^\times}\frac{p_{k+1}}{1}\cdots\frac{p_r}{1}\]
    は$\frac{a}{s}$の素元分解となっている．
\end{proof}

\subsection{単項分数イデアル}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=分数イデアル：分母が許されたイデアルの拡張を商体の部分$A$加群に注目して定義する]
    一意分解整域では，「最大公約数」「最小公倍数」の概念が定義できる．
    単元倍の任意性のある概念である（$\gcd(6,9)=\pm 3$？）から，元の代わりにそれが生成する単項イデアルについて定義した方が明快になる．
    しかし，単項イデアルの積は再び単項イデアルであるが，逆元が存在するとは限らない．
    それがAbel群の構造を定めるように，議論の場所を商体に移し，概念を拡張する．
    \textbf{$\Frac A$上での部分$A$加群として概念を拡張すれば良い}のである．
    すると，単項分数イデアル全体は，$A$の単項素イデアル全体の積で表せる（まさに素因数分解への引き戻し）．
    そしてこの演算について，単項分数イデアルの「最大公約数」「最小公倍数」を考えるのである．すると，$A$の商体の零でない元全てについて最小公倍数と最大公約数の概念が定まる．
    イデアルの演算というこれ以上無いほどに複雑な構造に仮託しているが，どうしてイデアルの方が概念として安定なのだろうか？
\end{tcolorbox}

\begin{definition}[principal fractional ideal]
    $A$を一意分解整域，$F:=\Frac A=(A\setminus\{0\})^{-1}A$をその商体とする．
    商体の単元$x\in F^\times(\overset{def}{=}F\setminus\{0\})$に対し，$(x)=\Brace{ax\in F\mid a\in A}$とおくと，これは$F$の部分$A$-加群になり，$y\in(x)\land a\in A\Rightarrow ay\in(x)$を満たす．
    この形で表せる$F$の部分集合を，$A$の\textbf{単項分数イデアル}といい，$x$をその\textbf{生成元}という．
\end{definition}
\begin{remark}[fractional ideal]\mbox{}\label{remark-PFI}
    \begin{enumerate}
        \item 単項イデアル（の$F$への埋め込み）は単項分数イデアルである．
        \item $x,y\in F^\times$について，$(x)=(y)\Lrarrow xy^{-1}\in A^\times$が成り立つ．この条件も，単元の軌道分解による同値類に入るから，$x$と$y$は\textbf{同伴}であるという．\footnote{$xy^{-1}\in H\Lrarrow\exists_{h\in H}\;x=hy$が部分群の特徴付なのであった．}
        \item $A$の単項分数イデアル全体は，体の上で考えているから，積を$(x)\cdot(y):=(xy)$としてAbel群となる．単位元は$A=(1)$で，逆元は$(x^{-1})$である．
        \item 一般に，体$F$の部分$A$-加群$I$で$\exists_{r\in A\setminus\{0\}}\;rI\subset A$を満たすものを\textbf{分数イデアル}という．
        $A$がNoether環であるとき，この定義は，部分$A$-加群$I$が有限生成であることと同値になる．\footnote{$I=A\frac{1}{2}+A\frac{1}{3}$などは２元生成の$\Z$の分数イデアルである．}
        代数的整数論で大事になる概念で，「分母が許されたイデアルの概念拡張」のようなものである．
    \end{enumerate}
\end{remark}

\begin{lemma}[単項分数イデアルのAbel群の構造：単項素イデアルへの注目]\label{lemma-reduction-of-PFI-into-Z}
    $A$を一意分解整域，$F:=\Frac A=(A\setminus\{0\})^{-1}A$をその商体とする．
    $A$の$0$でない単項素イデアル全体の集合を$P_A$とする．
    \begin{enumerate}
        \item Abel群$\Z$の添字$\p\in P_A$による直和から$A$の単項分数イデアルのなすAbel群への写像
        \[\xymatrix@R-2pc{
            \Phi:\bigoplus_{\p\in P_A}\Z\ar[r]&\Brace{Aの単項分数イデアル全体}\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            (m_\p)_{\p\in P_A}\ar@{|->}[r]&\prod_{\p\in P_A}\p^{m_\p}
        }\]
        は全単射な群準同型（したがって同型\ref{prop-Grp-is-balanced}）である．\footnote{ただし，$\p^0=A$とする．整数環における事象$n^0=1$に当たる．}
        $\Phi$の逆写像を$I\mapsto(m_\p(I))_{\p\in P_A}$と表す．
        \item $A$の単項分数イデアル$I,J$に対して，$I\subset J\Lrarrow\forall_{\p\in P_A}\;m_\p(I)\ge m_\p(J)$が成り立つ．すなわち，$\bigoplus_{\p\in P_A}\Z$にそのような順序を入れると，$\Phi$は単調（減少）写像である．\footnote{この逆転構造はなんだ？}
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 積の構造は確かに保たれ，$\Phi$は群準同型である．
        \footnote{$\p^0=A$と約束したとき，確かに単位元は単位元に写り，$\Phi$は群準同型である．}
        \begin{description}
            \item[全射性] $I=(x)\;(x\in F^\times)$を任意の単項分数イデアルとし，$\Phi$による逆像の元を構成すれば良い．
            \begin{enumerate}[(a)]
                \item 特に$x\in A\setminus\{0\}$の場合を考える．$A$は一意分解整域だから，素元分解$x=up_1\cdots p_r$が取れる．任意の$\p\in P_A$に対して，$m_\p(I):=\Abs{\Brace{i\in[r]\mid(p_i)=\p}}$とおくと，$(m_\p(I))_{\p\in P_A}\in\bigoplus_{\p\in P_A}\Z$で（素元分解$(p_i)$は有限列なので，$m_\p(I)\ne 0$を満たす$\p\in P_A$は有限個），$I=\prod_{\p\in P_A}\p^{m_\p(I)}=\Phi((m_\p)_\p)$である．このとき，$m_\p(I)\ge 0$であることに注意．
                \item 一般の$x\in F^\times$の場合については，任意の元は$x=\frac{a}{b}\;(a,b\in A\setminus\{0\})$と表せる．$m_\p(I):=m_\p((a))-m_\p((b))$と定めると，$\Phi((m_\p(I))_{\p\in P_A})=(a)(b)^{-1}=(x)=I$となる．
            \end{enumerate}
            \item[単射性] 
            $(m_\p)_{\p\in P_A}\in\bigoplus_{\p\in P_A}\Z$が$\prod_{\p\in P_A}\p^{m_\p}=A$を満たすと仮定し，$\forall_{\p\in P_A}\;m_\p=0$を示す．
            $P_+:=\Brace{\p\in P_A\mid m_\p>0},P_-:=\Brace{\p\in P_A\mid m_\p<0}$とおいて，$P_+=P_-=\emptyset$を示せば良い．
            このとき，$\prod_{\p\in P_+}\p^{m_\p}=\prod_{\p\in P_-}\p^{-m_\p}$が成り立つ．\footnote{$\prod_{\p\in P_A}\p^{m_\p}=A$の分母を払ったことに当たる．この後は，両辺の素元分解を考えれば良い．}
            ただし，$P_\pm=\emptyset$ならば，$\prod_{\p\in P_\pm}\p^{m_\p}=A$とする．
            よって，各単項素イデアル$\p\in P_A$の生成元$p_\p$を考えると，両辺の生成元は$\prod_{\p\in P_+}p_\p^{m_\p}$と$\prod_{\p\in P_-}p_\p^{-m_\p}$になり，これらは同伴になる（注\ref{remark-PFI}）．\footnote{$P_\pm$が一般の濃度の場合に，これらの$A$の元がwell-definedであるか不安になる．}
            $A$は一意分解整域だから，素元分解の一意性より，$P_+\ne\emptyset$ならば，$\p_1\in P_+$を取ると，$\p'_1\in P_-$であって，$p_{\p_1}$と$p_{\p'_1}$とが同伴であるものが存在するが，このとき$\p_1=(p_{\p_1})=(p_{\p'_1})=\p'$が従い，$P_+\cap P_-=\emptyset$に矛盾する．
            よって，$P_+=\emptyset$である．同様に，$P_-=\emptyset$が導ける．
        \end{description}
        \item
        \begin{description}
            \item[$\Rightarrow$] $I=(x),J=(y)$となる$x,y\in F^\times$が存在する．
            $I\subset J\Leftrightarrow(x)\subset(y)$のとき，特に$x\in(y)$で，$\exists_{z\in A\setminus\{0\}}\;x=yz$が成り立つから，$J':=(z)$とおくと，$I=JJ'$．よって，$\forall_{\p\in P_A}\;m_\p(I)=m_\p(JJ')=m_\p(J)+m_\p(J')$．このとき，$z\in A\setminus\{0\}$より，全射性の証明の(b)での議論の通り$m_\p(J')\ge 0$なので，$m_\p(I)\ge m_\p(J)$が示された．
            \item[$\Leftarrow$] $\forall_{\p\in P_A}\;m_\p(I)\ge m_\p(J)$のとき，$I=\prod_{\p\in P_A}\p^{m_\p(I)}\subset\prod_{\p\in P_A}\p^{m_\p(J)}=J$が従う．$\p^0=A$なので，零でない$m_\p$が多いほど，積の結果得るイデアルは小さくなることに注意．
        \end{description}
    \end{enumerate}
\end{proof}
\begin{remarks}[素元ではなく単項素イデアルに注目する]
    $A$の単項分数イデアルを，素イデアルの（負冪も含めた）積でみたとき，素因数分解のように使えるという補題である．
    これによって，整数で慣れ親しんだ概念を，一般の一意分解整域に素イデアルの言葉を通して流入させることができる．
\end{remarks}

\begin{definition}[最大公約イデアル・最小公倍イデアル]\mbox{}\label{def-gcd-lcm-in-UFD}
    \begin{enumerate}
        \item $A$を一意分解整域とし，$I_1,\cdots,I_n$を$A$の単項分数イデアルとする．
        \begin{enumerate}[(a)]
            \item 単項分数イデアル$\prod_{\p\in P_A}\;\p^{\max_{1\le i\le n}m_\p(I_i)}$を$I_1,\cdots,I_n$の\textbf{最小公倍イデアル}という．
            \item 単項分数イデアル$\prod_{\p\in P_A}\;\p^{\min_{1\le i\le n}m_\p(I_i)}$を$I_1,\cdots,I_n$の\textbf{最大公約イデアル}という．
        \end{enumerate}
        \item $a_1,\cdots,a_n\in F^\times$に対し，
        \begin{enumerate}[(a)]
            \item 単項分数イデアル$(a_1),\cdots,(a_n)$の最小公倍イデアルの生成元を，\textbf{最小公倍数}という．
            \item 単項分数イデアル$(a_1),\cdots,(a_n)$の最大公約イデアルの生成元を，\textbf{最大公約数}という．
        \end{enumerate}
        これらは，同伴の別を除いて定まる．\footnote{おそらく単元$u$の左移動による作用が$A$の自己同型を定めるからであろう．}
        \item $a,b\in A$の最大公約数が$A$の単元となる（したがって，単項イデアル$(a),(b)$の最大公約イデアルが$A$である）とき，これらを\textbf{互いに素}という．
    \end{enumerate}
\end{definition}
\begin{example}[整数環での例]
    $\Z$の単項分数イデアル$I=\paren{\frac{48}{25}},J=\paren{-\frac{28}{125}}$を考える．$I=(2)^4(3)(5)^{-2},J=(2)^{2}(5)^{-3}(7)$である．
    よって，最小公倍イデアルは$(2)^4(3)(5)^{-2}(7)=\paren{\frac{336}{25}}$であり，最大公約イデアルは$(2)^2(5)^{-3}=\paren{\frac{4}{125}}$である．
    よって，$\frac{48}{25},-\frac{28}{125}$の最小公倍数は$\pm\frac{336}{25}$で，最大公約数は$\pm\frac{4}{125}$．
    分母の最小公倍は，あくまで$-3<-2$のとき$-2$を採用する．
\end{example}
\begin{remarks}
    最大公約数が小さいとき，対応する最大公約イデアルは大きいことに注意．
\end{remarks}

\subsection{互いに素}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    互いに素であるということは，同伴でない素元を２つ含むイデアルは必ず自明であることで捉えられる．
    ２つの主イデアルの和が主イデアルになる整域で必ずBézoutの補題は成立するから，このようなクラスをBézout整域という．
    単項分数イデアルの全体はある種のBézout整域である．
\end{tcolorbox}

\begin{proposition}[最小公倍・最大公約イデアルの特徴付け]\label{prop-characterization-of-gcd-lcm}
    $A$を一意分解整域とし，$I_1,\cdots,I_n$をその単項分数イデアルとする．
    \begin{enumerate}
        \item $I_1,\cdots,I_n$の最小公倍イデアルは，$\forall_{i\in[n]}\;J\subset I_i$を満たす単項分数イデアル$J$のうち最大のものである．
        \item $I_1,\cdots,I_n$の最大公約イデアルは，$\forall_{i\in[n]}\;I_i\subset J$を満たす単項分数イデアル$J$のうち最小のものである．
        \item 任意の単項分数イデアル$J$について，$J\gcd(I_1,\cdots,I_n)=\gcd(JI_1,\cdots,JI_n),J\lcm(I_1,\cdots,I_n)=\lcm(JI_1,\cdots,JI_n)$である．
    \end{enumerate}
\end{proposition}
\begin{proof}
    補題\ref{lemma-reduction-of-PFI-into-Z}の写像$\Phi^{-1}$によって，$\bigoplus_{\p\in P_A}\Z$での議論に還元すれば明らか．
\end{proof}

\begin{proposition}[互いに素の特徴付け？]\label{prop-characterization-of-coprime-in-UFD}
    $A$を一意分解整域とする．$a,b\in A$について，次の３条件は同値か？
    \begin{enumerate}
        \item $a$と$b$は互いに素．
        \item (Bézout's lemma) $\exists_{x,y\in A}\;ax+by=1$．
        \item $a$も$b$も素元で，互いに同伴でない．
    \end{enumerate}
    $A$が単項イデアル整域ならば(3)$\Rightarrow$(2)が明らかなのでこれらは同値である．
    問題は，一意分解整域でも並行な議論が成り立つかどうかだ．
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] 仮定より，$(a)\subset I,(b)\subset I$を満たす最小の単項分数イデアル$I$について$I=A$である\ref{prop-characterization-of-gcd-lcm}．
        このとき$I$の任意の元は$ax+by\;(x,y\in A)$と表される\ref{lemma-elements-of-ideal}から\footnote{というより，$I$は$A$加群なので，$I$の最小性から$I\subset Aa+Ab$が必要．}，
        $(a)+(b)=I=A$が成り立つ．特に$\exists_{x,y\in A}\;ax+by=1$．
        \item[(2)$\Rightarrow$(1)]
        (2)の仮定は，$a,b$を含む（単項分数）イデアルは必ず$A$になることを含意する．これは，$(a),(b)$の最大公約イデアルについても例外ではない．
        \item[(3)$\Rightarrow$(1)] 一意分解整域について，これは成り立つはず．逆は自信がない．

        ２つの同伴でない素元$a,b$が生成する素イデアルについて，$(a)\subsetneq I,(b)\subsetneq I$を満たす最小の単項分数イデアル$I$は，$I=A$であるという，単項イデアル整域の消息\ref{prop-maximal-ideal-of-PID}に似たことを示せば良い（$a,b$が同伴でないことは$(a)\ne (b)$に同値\ref{lemma-characterization-of-associatedness-and-prime-is-irreducible}で，$(a),(b)\subsetneq I$に注意）．
        $I$は単項分数イデアルなので，$\exists_{x\in F^\times}\;I=(x)$と表せる．
        仮定$(a)\subsetneq I$は，$\exists_{y\in A}\;a=xy$を含意する．
        特に$xy\in (a)$ヨリ，$x\in (a)\lor y\in (a)$が従う．$x\in (a)$ならば$I\subset (a)$が必要だから仮定に反する．したがって$y\in (a)$であるが，このとき$\exists_{z\in A}\;y=za$であり，$a=xy$と併せて$a=xza\Leftrightarrow a(1-xz)=0$．これは商体$F=\Frac A$上の等式とみなせて，特に整域だから，$xz=1\in I$が必要．したがって，$I=A$である．
    \end{description}
\end{proof}
\begin{remarks}[同伴でない素元を２つ含むイデアルは必ず自明である]
    単項分数イデアルの言葉で互いに素であることを定義した．
    すると，ある種の単項イデアル整域に議論領域が限定されるため，素イデアルの様子が
    単項イデアル整域の場合\ref{prop-maximal-ideal-of-PID}に類似する．
    これが整数論で有名な「$a$と$b$が互いに素$\Leftrightarrow\;\exists_{x,y\in A}\;ax+by=1$」である．
\end{remarks}
\begin{remark}
    一意分解整域$k[X]$でのBézoutの補題が非自明である．互いに素な$f_1(x),f_2(x)$について，$g_1(x)f_1(x)+g_2(x)f_2(x)=1$とできる．
\end{remark}

\subsection{一意分解整域上の多項式環は一意分解整域}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=一意分解整域上の$n$変数多項式環は一意分解整域である]
    $\Z$は一意分解整域だから，$\Z[X]$も一意分解整域である．
    任意の体$K$について，$K[X]$はEuclid整域\ref{prop-Euclidean-ideal-then-PID}であり，多変数多項式$K[X_1,\cdots,X_n]$は一意分解整域である．
    
    原始多項式はある種の正規化された対象である．単項分数イデアルの概念を引き継ぎ，$F:=\Frac A$係数多項式上に拡張して捉える視点が肝要になる．
\end{tcolorbox}

\begin{definition}[primitive polynomials]
    $A$を一意分解整域とし，$F=\Frac A$をその商体とする．多項式$f=a_nX^n+\cdots+a_1X+a_0\in F[X]\setminus\{0\}$に対し，
    その係数が定める単項分数イデアル$(a_0),\cdots,(a_n)$のうちの$0$でないものの最大公約イデアルを$I(f)$とおく．
    \begin{enumerate}
        \item $I(f)=A$を満たすような$f\in F[X]\setminus\{0\}$を\textbf{原始多項式}と呼ぶ．\footnote{すなわち，内容＝係数の最大公約数が$\pm 1$であるような多項式である．}
        $a_i\in A$（特に$a_i\in A^\times$）でないと$A\subset(a_i)$を満たさないので，
        特に$A[X]\setminus\{0\}$の元である．
        \item 単項分数イデアル$I(f)$の生成元を$c(f)$と書き，$f$の\textbf{内容}という．これは同伴を除いて一意に定まる．
    \end{enumerate}
\end{definition}

\begin{lemma}[$I$の関手性と内容–原始成分分解]\label{lemma-functority-of-I}
    $A$を一意分解整域，$F=\Frac A$をその商体，$f,g\in F[X]\setminus\{0\}$を多項式とする．
    \begin{enumerate}
        \item $f,g$が原始多項式ならば$fg$も原始多項式である．
        \item $a\in F^\times$に対し，$I(af)=(a)I(f)$が成り立つ．特に，$a$を$I(f)$の生成元とすると，$a^{-1}f$は原始多項式である．
        \item $I(fg)=I(f)I(g)$である．
        \item 任意の$A[X]$の元は，内容と原始多項式の積に，$A$の単元倍を除いて一意的に分解できる．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $f,g$は原始多項式だから，特に$f,g\in A[X]$である．$A$が整域であることより$A[X]$も整域\ref{prop-if-A-polynomials-is-integral-domain}だから，$f,g\ne 0$の仮定より$fg\ne 0$が従う．
        ここで，$fg\in A[X]\setminus\{0\}$が原始多項式ではない，すなわち$I(fg)\subsetneq A$と仮定して矛盾を導く（$a_i\in A$のとき，$(a_i)\subset A$に注意）．

        $I(fg)\subsetneq A$のとき，$I(fg)\subset(p)\subsetneq A$を満たす素元$p\in A$が存在する．これは$I(fg)$の生成元の素元分解に現れる素元を任意に取れば良い．\footnote{単項分数イデアル全体はAbel群をなすので，$I(fg)$も単項分数イデアルであることに注意．}
        このような$p$を１つ取ると，$fg$の係数は全て$p$で割り切れるということであるから，全射準同型$p:A[X]\to A/(p)[X]$の像$\o{f}:=p(f),\o{g}:=p(g)$について，$\o{f}\cdot\o{g}=0$が成り立つ．$p\in A$は素元より$(p)$は素イデアルで$A/(p)$は整域，したがって$A/(p)[X]$も整域\ref{prop-if-A-polynomials-is-integral-domain}だから，$\o{f}=0\lor\o{g}=0$が従う．
        $\o{f}=0$のとき，$f$の係数が全て$p$で割り切れるということだから，$I(f)\subset(p)\subsetneq A$が成り立ち，$f$が原始多項式であることに矛盾．$\o{g}=0$の場合も同様．
        \item 最大公約イデアルの性質\ref{prop-characterization-of-gcd-lcm}より，
        \[I(af)\overset{def}{=}\gcd((aa_0),\cdots,(aa_n))=(a)\gcd((a_0),\cdots,(a_n))=(a)I(f).\]
        また，$a$が$I(f)$の生成元であるとき，$(a)=I(f),(a^{-1})=(a)^{-1}=I(f)^{-1}$より，$I(a^{-1}f)=I(f)^{-1}I(f)=(1)=A$より，$a^{-1}f$は原始多項式である．
        \item 
        $a\in I(f),b\in I(g)$をそれぞれの生成元とすると，(2)より$a^{-1}f,b^{-1}g$は原始多項式である．よって，(1)より，$(a^{-1}f)(b^{-1}g)$は原始多項式である．よって，(2)より，
        \begin{align*}
            I(fg)&=I(ab(a^{-1}f)(b^{-1}g))=(ab)I((a^{-1}f)(b^{-1}g))\\
            &=(ab)A=(ab)=(a)(b)=I(f)I(g).
        \end{align*}
    \end{enumerate}
\end{proof}

\begin{theorem}[Gaussの補題：既約元の特徴付け]\label{thm-Gauss}
    $A$を一意分解整域，$F=\Frac A$をその商体とする．１次以上の多項式$f\in A[X]\setminus A$に対して，次の２条件は同値．
    \begin{enumerate}
        \item $f$は$A[X]$の既約元である．
        \item $f$は原始多項式であり，かつ，$F[X]$の既約元である．
    \end{enumerate}
\end{theorem}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] 
        \begin{description}
            \item[$f$は原始多項式である] 
            $I(f)(\ne\emptyset)$の生成元$a\in F^\times=F\setminus\{0\}$をとる．補題\ref{lemma-functority-of-I}(2)より，$a^{-1}f$は原始多項式だから，特に$a^{-1}f\in A[X]$で，また$f\in A[X]$より$I(f)\subset A$より特に$a\in A$．
            よって，$f=a(a^{-1}f)\on A[X]$であるが，$f$の$A[X]$での既約性から，$a\in A[X]^\times=A^\times$または$a^{-1}f\in A[X]^\times=A^\times$が従う\ref{prop-if-A-polynomials-is-integral-domain}．仮定より$a^{-1}f$は１次以上の多項式だから，前者が成り立ち，$I(f)=(a)=A$を得る．
            \item[既約元である]
            まず$f$は一次以上という仮定より，零ではなく，$f\notin F^\times=F[X]^\times$である．よって，あとは，任意の$f=gh$を満たす$g,h\in F[X]$について，$g\in F^\times\lor h\in F^\times$を導けば良い．

            $a,b\in F^\times$をそれぞれ$I(g),I(h)$の生成元とすると，補題\ref{lemma-functority-of-I}(3)より，
            $A=I(f)=I(gh)=I(g)I(h)=(ab)$となるので，$ab\in A^\times$が成り立つ．$u:=ab$とおくと，$f=(a^{-1}\cdot ub^{-1})gh=(a^{-1}g)(ub^{-1}h)$である．
            $a^{-1}g,b^{-1}h$は原始多項式であるから，$a^{-1}g,ub^{-1}h\in A[X]$より，$f$が$A[X]$の既約元という仮定から$a^{-1}g\in A[X]^\times\lor ub^{-1}h\in A[X]^\times$，特に$a^{-1}g\in F[X]^\times\lor ub^{-1}h\in F[X]^\times$が従う．$a,b\in F^\times$より$a^{-1},ub^{-1}\in F^\times$だから，$g\in F[X]^\times,h\in F[X]^\times$がわかった．
        \end{description}
        \item[(2)$\Rightarrow$(1)]
        $f$が$F[X]$の既約元より$f\notin F[X]^\times$なので，$f\notin A[X]^\times$は明らか．あとは$g,h\in A[X]$が$f=gh$を満たすと仮定して，$g\in A[X]^\times\lor h\in A[X]^\times$を導けば良い．

        $f$は$F[X]$の既約元としたから，$g\in F[X]^\times\lor h\in F[X]^\times$である．$F[X]^\times=F^\times$\ref{prop-if-A-polynomials-is-integral-domain}より，$g,h\in A[X]$と併せると，$F^\times\cap A=A\setminus\{0\}$より$g\in A\setminus\{0\}\lor h\in A\setminus\{0\}$が解る．
        このとき前者が成り立つと仮定しても一般性を失わない．$I(f)=I(g)I(h)=(g)I(h)\subset(g)A=(g)$より（$h\in A[X]$より$I(h)\subset A$に注意\ref{prop-characterization-of-gcd-lcm}），
        $I(f)=A$という仮定と合わせると，$(g)=A$が必要．したがって，$g\in A^\times$である．
    \end{description}
\end{proof}
\begin{remarks}
    (1)$\Rightarrow$(2)の考え方が肝要で，定理\ref{thm-UFD-polynomials}の証明でも使われる．
\end{remarks}

\begin{theorem}\label{thm-UFD-polynomials}
    $A$が一意分解整域であるとき，多項式環$A[X]$も一意分解整域である．
    すなわち，次の２条件が成り立つ．
    \begin{enumerate}
        \item $A$を一意分解整域とするとき，$A[X]\setminus\{0\}$の任意の元は既約元分解を持つ．
        \item $A$を一意分解整域とするとき，$A[X]$の任意の既約元は素元である．
    \end{enumerate}
\end{theorem}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $f\in A[X]\setminus\{0\}$を任意に取る．$f$を商体$F:=\Frac A$上の多項式と見ると，体上の多項式環$F[X]$はEuclid整域より単項イデアル整域\ref{prop-Euclidean-ideal-then-PID}で，したがって一意分解整域\ref{prop-PID-then-UFD}であるから，
        $F[X]$内で既約元分解
        \[f=ug_1\cdots g_r\qquad(u\in F^\times,g_1,\cdots,g_r:F[X]の既約元)\]
        をもつ．
        \begin{enumerate}[(a)]
            \item $a\in A\setminus\{0\},b_1,\cdots,b_r\in F^\times$をそれぞれ$I(f),I(g_1),\cdots,I(g_r)\subset F$の生成元とすると，補題\ref{lemma-functority-of-I}より，
            \[(a)=I(f)=(u)I(g_1)\cdots I(g_r)=(ub_1\cdots b_r)\]
            が成り立つ．よって，$u':=a^{-1}ub_1\cdots b_r$と定めると，$(u')=(1)$より，$u'\in A^\times$である．
            \item $A[X]$上の等式$f=au'(b_1^{-1}g_1)\cdots(b_r^{-1}g_r)$をよく考えると，実はこれは既約元分解を与えている．
            まず，項$b_i^{-1}g_i\in A[X]$は$F[X]$において既約元$g_i$と同伴であるから$F[X]$の既約元で\ref{lemma-characterization-of-associatedness-and-prime-is-irreducible}(3)，
            また原始多項式であるから，Gaussの補題\ref{thm-Gauss}より，$b^{-1}_ig_i$は$A[X]$の既約元である．
            続いて，$A$は一意分解整域だから，$au'\in A\setminus\{0\}$は$A$において既約元分解$au'=u''p_1\cdots p_s$を持つ．
            $A[X]^\times=A^\times$も考え合わせると，$A$の既約元は$A[X]$でも既約元だから，これは$A[X]$上での既約元分解でもある．
            以上より，等式$f=au'(b_1^{-1}g_1)\cdots(b_r^{-1}g_r)$は$A[X]$上の既約元分解を与える．
        \end{enumerate}
        \item $f\in A[X]$を任意の既約元とする．あとは$(f)\subset A[X]$が素イデアルであることを示せば良い．
        \begin{description}
            \item[$f\in A$のとき] $A^\times=A[X]^\times$より，$f$は$A$の既約元でもあるから，$A$が一意分解整域であることより，$f$は$A$の素元である．
            したがって$A/(f)$は整域で$A/(f)[X]$も整域だから，
            $A[X]/(f)\simeq A/(f)[X]$より，$(f)$は$A[X]$の整域でもある（素イデアルの特徴付け\ref{prop-characterization-of-prime-and-maximal-ideal}）．
            \item[$f\notin A$のとき] 
            \begin{enumerate}[(a)]
                \item 
            $f$は一次以上の多項式であるから，
            Gaussの補題\ref{thm-Gauss}より，$f$は$F[X]$の既約元であるような原始多項式である．
            いま$F[X]$は一意分解整域であるから，$f$は$F[X]$の素元でもある．すなわち，単項イデアル$(f)_{F[X]}$は素イデアルである．
            したがって，素イデアルの逆像は素イデアルだから\ref{prop-preimage-of-prime-ideal-is-prime}，$i:A[X]\mono F[X]$について，$i^{-1}((f)_{F[X]})=A[X]\cap(f)_{F[X]}=(f)_{A[X]}$を示せば十分．
                \item
            $A[X]\cap (f)_{F[X]}\supset(f)_{A[X]}$は$f\in A[X]$と$(f)_{A[X]}=f\cdot A[X]$\ref{lemma-elements-of-ideal}より明らかだから，$A[X]\cap (f)_{F[X]}\subset(f)_{A[X]}$を示せば良い．
                任意に$g\in A[X]\cap (f)_{F[X]}$を取ると，$\exists_{h\in F[X]\setminus\{0\}}\;g=fh$．補題\ref{lemma-functority-of-I}より，
                $I(g)=I(f)I(h)=AI(h)=I(h)$であるから，$g\in A[X]$より$I(g)\subset A$である（最大公約イデアルの特徴付け\ref{prop-characterization-of-gcd-lcm}）ことと併せて，$I(h)\subset A$を得る．これより$h\in A[X]$が従うので，\footnote{$I(h)\subset A$とは，最大公約イデアルの特徴付け\ref{prop-characterization-of-gcd-lcm}より，$h$の係数の生成する単項分数イデアル$(a_i)\subset F$が全て$A$以外の元を含まないことを意味するから．}$g\in (f)_{A[X]}$である．
            \end{enumerate}
        \end{description}
    \end{enumerate}
\end{proof}

\begin{corollary}
    $F$を体とし，$n\ge 1$を整数とする．$F[X_1,\cdots,X_n]$は一意分解整域である．
\end{corollary}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item Euclid整域$F[X_1]$は単項イデアル整域である\ref{prop-Euclidean-ideal-then-PID}から，一意分解整域である\ref{prop-PID-then-UFD}．
        \item $F[X_1,\cdots,X_n]\simeq(F[X_1,\cdots,X_{n-1}])[X_n]$であるから，定理\ref{thm-UFD-polynomials}より，帰納的に$F[X_1,\cdots,X_n]$は一意分解整域である．
    \end{enumerate}
\end{proof}

\subsection{Eisensteinの既約判定法}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    引き続き多項式環の研究で，Gaussの補題\ref{thm-Gauss}からさらに踏み込んで，既約元を特徴づける結果を考える．
    monicな多項式は$A[X]$の中で乗法についてモノイドをなす（モニック多項式の積はモニック）．
    体の拡大の理論で方程式の既約性の判定が肝要になってくる．
\end{tcolorbox}

\begin{theorem}[Eisensteinの既約判定法]\label{thm-Eisenstein}
    $A$を整域とする．$A$係数のモニックな多項式$f=X^n+a_{n-1}X^{n-1}+\cdots+a_0\in A[X]\;(n\ge 1)$に対して，素イデアル$\p\subset A$が存在して次の２条件を満たすならば，$f$は$A[X]$の既約元である．
    \begin{enumerate}[(a)]
        \item $\forall_{i\in n}\;a_i\in\p$．
        \item $a_0\notin\p^2$．
    \end{enumerate}
    特に$A$が一意分解整域である場合は，$F=\Frac A$とおくと$f$は$F[X]$の元としても既約である（Gaussの補題\ref{thm-Gauss}）．\footnote{この場合は，$\p$として単項イデアルを取る場合が多い．}
\end{theorem}
\begin{proof}
    $f=1\in A^\times$の場合，条件(a),(b)を満たす素イデアル$\p$は存在しないから，確かに$f$は$A[X]$の既約元ではない．そこで，$\deg f\ge 1$の場合のみを考えれば良い．したがって，あとは$f=gh$を満たす$g,h\in A[X]$について，$g\in A^\times\lor h\in A^\times$を導けば良い．
    \begin{enumerate}
        \item \begin{align*}
            g&=b_rX^r+\cdots+b_1X+b_0,&h&=c_sX^s+\cdots+c_1X+c_0,
        \end{align*}
        とおく($b_rc_s\ne 0$)．すると$gh$の最高次項は$b_rc_sX^{r+s}$であり，$b_rc_s=1.r+s=n$が必要．特に$b_r,c_s\in A^\times$．
        \item この$g,h$の係数に関しても$\forall_{i\in r,j\in s}\;b_i,c_j\in\p$であることを示す．
        \begin{align*}
            i_0&:=\min\Brace{i\in r\mid b_i\notin\p},&j_0&:=\min\Brace{j\in s\mid c_j\notin\p},
        \end{align*}
        とおいて，$i_0=r,j_0=s$を示せば良い．いま$i_0\le r,j_0\le s$なので，$i_0+j_0=r+s$を示せば十分．そこで，$i_0+j_0<r+s$と仮定して矛盾を導く．
        等式$f=gh$の$X^{i_0+j_0}$の項の係数を比較することで，
        \[a_{i_0+j_0}=\sum_{i,j\ge0,i+j=i_0+j_0}b_ic_j\in b_{i_0}c_{j_0}+\p\]
        を得る．仮定より，$a_{i_0+j_0}\in\p$であるから，$b_{j_0}c_{j_0}\in\p$でもあるが，これは$b_{j_0},c_{j_0}$の取り方に矛盾する．よって，$b_i,c_j\in\p\;(i\in r,j\in s)$．
        \item もし$r\ge 1\land s\ge 1$ならば，(2)より$b_0,c_0\in\p$なので，$f=gh$の定数項について比較することで，$a_0=b_0c_0\in\p^2$が従うが，これは仮定(b)に矛盾．よって，$r=0\lor s=0$である．すなわち，$g\in A^\times\lor h\in A^\times$．
    \end{enumerate}
\end{proof}
\begin{remarks}
    係数比較と係数の積についての整域の性質による議論を繰り返すのみで得られる性質であり，
    あまりにも精密機械のような証明の仕組みに呆れた．
\end{remarks}

\begin{example}[既約多項式]\label{exp-Eisenstein}
    素数$p$について，$f(X)=X^{p-1}+X^{p-2}+\cdots+X+1\in\Z[X]$は$\Q[X]$の既約元である．

    このままでは全ての係数が$1$なので，素イデアル$\p$は見つからない．
    $\Q[X]$の商体$\Q(X)$において，
    \[f(X+1)=\frac{(X+1)^p-1}{X-1}=X^{p-1}+pX^{p-2}+\cdots+p\]
    が成り立ち，最左辺と最右辺との等式は$\Z[X]$上においても成り立つ．
    \begin{itemize}
        \item $0\le i\le p-2$に対して，$X^i$の係数は$\begin{pmatrix}p\\i+1\end{pmatrix}$であるから$p$の倍数である．
        \item $f(X+1)$の定数項$p$は$p^2$の倍数ではない．
    \end{itemize}
    よって，Eisensteinの既約判定法\ref{thm-Eisenstein}より，$f(X+1)$は$\Z[X]$の既約元であり，したがって$f(X)$も$\Z[X]$の既約元である．\footnote{$X\mapsto X+1$は$\Z[X]$の自己同型を定め，整域の自己同型について元の既約性は保たれるため．}
    Gaussの補題\ref{thm-Gauss}より，$f(X)$は$\Q[X]$の既約元でもある．
\end{example}

\section{中国剰余定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=可換環の剰余環の形は，剰余を互いに素なイデアルについて分解すれば決定できる]
    一意分解整域上\ref{def-gcd-lcm-in-UFD}だけでなく，一般の可換環にも互いに素の概念が定義できる．
    これは特に単項整域イデアルでは，一意分解整域での定義と同値になるが，より一般の場合はそれより強い（一般に互いに素ならば，一意分解整域の意味でも互いに素である）．
    すると，イデアルの演算について更なる美しい性質が成り立つ．$A/(I_1\cdots I_n)$は，$I_1,\cdots,I_n$が「互いに素」なとき，分解しても同型である．
\end{tcolorbox}

\subsection{互いに素}

\begin{definition}[coprime]\mbox{}
    \begin{enumerate}
        \item 可換環$A$のイデアル$I,J$が\textbf{互いに素}であるとは，$I+J=A$が成り立つことをいう．
        \item イデアルの有限列$I_1,\cdots,I_n$が互いに素であるとは，$\forall_{1\le i<j\le n}$について$I_i$と$I_j$が互いに素であることをいう．
    \end{enumerate}
\end{definition}

\begin{lemma}\label{lemma-characterization-of-coprime}
    $A$を一意分解整域とし，$a,b\in A\setminus\{0\}$とする．
    一般に(1)$\Rightarrow$(2)が成り立ち，$A$が単項イデアル整域であるとき，(2)$\Rightarrow$(1)も成り立つ．後者の主張をBézoutの補題ともいう．
    \begin{enumerate}
        \item ２つのイデアル$(a)$と$(b)$が互いに素である．
        \item ２つの元$a,b$は互いに素である（定義\ref{def-gcd-lcm-in-UFD}）．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] 
        $(a)$と$(b)$の最大公約イデアル$I$について，$I=A(=(1))$を示せば良い．

        最大公約イデアルの特徴付け\ref{prop-characterization-of-gcd-lcm}(2)より，
        $I\subset A$は$(a)\subset I,(b)\subset I$を満たす最小の単項分数イデアルであり，
        定義\ref{def-gcd-lcm-in-UFD}より，$(a),(b)$がいずれも単項イデアルであるから$I$もイデアルである（$(a)$も$(b)$も$A$の素イデアルの正冪で表されるから，$I$の素イデアルへの分解も正冪しか現れない）．
        したがって，$(a)+(b)\subset I$が必要だが，$(a)$と$(b)$が互いに素であることより，これは$A\subset I$を意味する．
        \item[(2)$\Rightarrow$(1)]
        $A$は単項イデアル整域であるから，$\exists_{x\in A}\;(a)+(b)=(x)$．
        すると，特に$(a)+0=(a)\subset(x),0+(b)=(b)\subset(x)$より，$(x)$は$(a),(b)$を共に含み，かつ，最小のイデアルである（イデアルの表示\ref{lemma-elements-of-ideal}より，$\{a,b\}$で生成されるイデアルは$Aa+Ab=(a)+(b)$という形をしている）から，
        最大公約イデアルの特徴付け\ref{prop-characterization-of-gcd-lcm}(2)より，これが$(a)$と$(b)$の最大公約イデアルに他ならず，$a,b$が互いに素という仮定よりこれは$A$に等しい：$(x)=A$．よって，$(a)+(b)=(x)=A$を得る．
    \end{description}
\end{proof}
\begin{counterexample}
    一般の一意分解整域における(2)$\Rightarrow$(1)の反例は，$F[X,Y]$における$(X),(Y)$である．
    $X,Y\in F[X,Y]$の最大公約イデアルは$F[X,Y]$であるから互いに素であるが，$(X)+(Y)=(X,Y)\ne F[X,Y]$より（$F[X,Y]^\times$を含まない），
    ２つのイデアル$(X),(Y)$は互いに素ではない．
\end{counterexample}

\begin{lemma}\label{lemma-product-of-ideals}
    可換環$A$のイデアル$I,J$が互いに素であるとき，$IJ=I\cap J$が成り立つ．
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[$IJ\subset I\cap J$] イデアルの定義より，$IJ\subset I$かつ$IJ\subset J$であるから，$IJ\subset I\cap J$である．
        \item[$IJ\supset I\cap J$] 
        任意に$a\in I\cap J$を取る．$I$と$J$が互いに素であるとしたから，$I+J=A$より，特に$\exists_{x\in I,y\in J}\;x+y=1$．
        これを用いて，$a=a(x+y)=ax+ay=JI+IJ=IJ$．
    \end{description}
\end{proof}

\subsection{中国剰余定理}

\begin{theorem}[Chinese remainder theorem]\label{thm-Chinese-remainder-theorem}
    $A$を可換環とし，$I_1,\cdots,I_n$を互いに素なイデアルとする．このとき，次が成り立つ．
    \begin{enumerate}
        \item $I_1\cap\cdots\cap I_n=I_1\cdots I_n$．
        \item $A/I_1\cdots I_n=A/(I_1\cap\cdots\cap I_n)\iso A/I_1\times\cdots\times A/I_n$．
    \end{enumerate}
\end{theorem}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $I_1,\cdots,I_n$が互いに素なイデアルであるという仮定の下で，任意の$1\le i\le n-1$に対して，$I_i$と$I_{i+1}\cdots I_n$が互いに素であることを示せば，補題を繰り返し適用することにより，
        \[I_1\cdots I_n=I_1\cap I_2\cdots I_n=I_1\cap I_2\cap I_3\cdots I_n=\cdots=I_1\cap I_2\cap\cdots\cap I_n\]
        が従う．

        $i<j\le n$を満たす任意の$j$に対して，仮定より$I_i+I_j=A$であるから特に$\exists_{a_j\in I_i,b_j\in I_j}\;a_j+b_j=1$だから，$\prod_{j=i+1}^n(a_j+b_j)=1$．
        ここで左辺は，$b_{i+1}b_{i+2}\cdots b_n\in I_{i+1}\cdots I_n$を除いてその他の項は$I_i$の元だから，$1\in I_i+I_{i+1}\cdots I_n$となる．よって，$I_i+I_{i+1}\cdots I_n=A$が従う．
        \item 
        標準全射$\pi_i:A\epi A/I_i\;(i\in[n])$について，$\pi:=(\pi_1,\cdots,\pi_n):A\to A/I_1\times\cdots\times A/I_n$が定まる．
        $\Ker\pi=I_1\cap\cdots\cap I_n$であるから，$\pi$が全射であることを示せば，準同型定理\ref{thm-ring-homomorphism-decomposition}より$A/(I_1\cap\cdots\cap I_n)\iso\Im\pi=A/I_1\times\cdots\times A/I_n$が従う．
        これを帰納法によって示す．
        \begin{description}
            \item[$n=2$のとき] $(x_1,x_2)\in A/I_1\times A/I_2$を任意に取る．$y_1\in\pi_1^{-1}(x_1),y_2\in\pi_2^{-1}(x_2)$を取る．仮定より$I_1+I_2=A$だから，特に$a+b=1$を満たす$a\in I_1,b\in I_2$を取れる．
            これらに対して$z:=by_1+ay_2$と定めると，$a\in I_1=\Ker\pi_1,b\in I_2=\Ker\pi_2$より，
            \begin{align*}
                \pi_1(z)&=\pi_1(by_1+ay_2)=\pi_1(y_1-ay_1+ay_2)=\pi_1(y_1)=x_1,\\
                \pi_2(z)&=\pi_2(by_1+ay_2)=\pi_2(by_1+y_2-by_2)=\pi_2(y_2)=x_2.
            \end{align*}
            よって，$z\in\pi^{-1}(x_1,x_2)$．
            \item[$n>2$のとき]
            帰納法の仮定より，$\pi':=(\pi_2,\cdots,\pi_n):A\epi A/I_2\times\cdots\times A/I_n$は全射だから，
            $\o{\pi'}:A/(I_2\cap\cdots\cap I_n)\iso A/I_2\times\cdots\times A/I_n$を定める．
            $\pi'':=(\pi_1,\pi_{2\cdots n}):A\epi A/I_1\times A/(I_2\cdots I_n)$と定めると，$I_1$と$I_2\cdots I_n$は互いに素であったから（(1)の証明抽出），$n=2$の場合より$\pi''$も全射．
            \[\xymatrix@1{
                A\ar[r]^-{\pi''}&A/I_1\times A/(I_2\cdots I_n)\ar@{=}[r]^-{\mathrm{(1)}}&A/I_1\times A/(I_2\cap\cdots\cap I_n)\ar[r]^-{\id_{A/I_1}\times\o{\pi'}}_-{\sim}&A/I_1\times A/I_2\times\cdots\times A/I_n
            }\]
            より，$\pi=(\id_{A/I_1}\times\o{\pi'})\circ\pi''$と全射の合成で表せるから，$\pi$も全射である．
        \end{description}
    \end{enumerate}
\end{proof}
\begin{remarks}
    互いに素であることの定義って，大体$a+b=1$となるものを選び出すために使うんだね．
    そしてこれがパズルの極めて肝心なピースとなる．
    命題\ref{prop-characterization-of-coprime-in-UFD}で考察したが，$(a),(b)\subset I$を満たす$I$は$Aa+Ab=I$という表示を持つから，$(a)+(b)=I$ならば$a,b$は互いに素である．なお，$(a)+(b)=I$は$\exists_{x,y\in A}\;ax+by=1$と同値（命題\ref{prop-characterization-of-coprime-in-UFD}）．
    この逆が言えるかが問題になるが，任意の単項イデアル整域で正しい（これがBézoutの補題）．
    単項（分数でない）イデアルの最大公約イデアルが再び単項イデアルになるか？という問いの答えは常に真だろうが，
    単項イデアルの和が単項イデアルになるかはBézout整域というクラスを定めるようだ．
\end{remarks}

\begin{remark}
    $\Z/(m_1\cdots m_r)\simeq\Z/(m_1)\times\cdots\times\Z/(m_r)$の場合が特に有名である．
    互いに素な$m_1,\cdots,m_r$について，それぞれの剰余を指定されれば，$m_1\cdots m_r$までの中に対応する数がただ一つ見つかる．
\end{remark}

\subsection{構造決定}

\begin{example}[多項式の生成するイデアルによる剰余環の構造決定]
    \[\R[X]/(X^3-1)\simeq\R\times\C\]
    である．
    \begin{enumerate}
        \item $X^3-1=(X-1)(X^2+X+1)$は既約元分解を与えている．例\ref{exp-Eisenstein}より分かるが，$X^2+X+1$が既約でない，したがって一次式の積として書けたとすると，実数解を持つこととなり矛盾する．$\C[X]$の既約元は一次式のみという主張が代数学の基本定理なのであるな．
        \item $X-1,X^2+X+1$は同伴でない素元であるから，互いに素である\ref{prop-characterization-of-coprime-in-UFD}．
        $\R[X]$はEuclid整域\ref{exp-Euclidean-ideal}であるから特に単項イデアル整域であること\ref{prop-Euclidean-ideal-then-PID}に注意すると，補題\ref{lemma-characterization-of-coprime}より，$(X-1),(X^2+X+1)$も互いに素である．
        または，$\R[X]$はEuclid整域であるから特に$(X-1)+(X^2+X+1)=\R[X]$に同値であるが，これはたしかに満たされる：$(X+2)(X-1)-(X^2+X+1)=-3$．
        \item 中国剰余定理\ref{thm-Chinese-remainder-theorem}より，\[\R[X]/(X^3-1)=\R[X]/(X-1)(X^2+X+1)\iso\R[X]/(X-1)\times\R[X]/(X^2+X+1).\]
        \item $\ev_1:\R[X]\epi\R$は全射準同型であり，その核はイデアル$(X-1)$であるから，準同型定理より$\R[X]/(X-1)\iso\R$．
        \item $\om:=\frac{-1+\sqrt{3}}{2}\in\C$について$\ev_\om:\R[X]\epi\C$は全射準同型であり，$\Ker\ev_\om=(X^2+X+1)$である．実際，$\Ker\ev_\om\supset(X^2+X+1)$は分かる．$(X^2+X+1)$は素イデアルであるから，単項イデアル整域$\R[X]$の極大イデアルである\ref{prop-maximal-ideal-of-PID}．よって，$\Ker\ev_\om=(X^2+X+1)\lor\Ker\ev_\om=\R[X]$であるが，後者は$1=0$が必要であるため，$\C$が零環でないことに矛盾．よって，準同型定理から，$\R[X]/(X^2+X+1)\simeq\C$．
    \end{enumerate}
\end{example}

\section{体の拡大}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=体の消息を群論で調べる]
    Galois理論とは，$F$の有限次拡大体$E$に対して，$F\subset M\subset E$を満たす\textbf{中間体}を，群論に写し取って記述する理論である．
    $S_n$の可解性から$n$次方程式の解の公式の存在，またSylowの定理と$p$-群の可解性から代数学の基本定理を導く架け橋となる．
    代数的整数論ではこの架け橋を頻繁に往復する．
\end{tcolorbox}

\begin{definition}\mbox{}
    \begin{enumerate}
        \item 体$F$を部分環として含む体$E$を，$F$の\textbf{拡大体}という．
        \item $E$は乗法について$F$-線型空間となる．この時の次元を$[E:F]$で表し，体拡大$F\mono E$の\textbf{拡大次元}という．
        \item $[E:F]<\infty$のとき，$E$は$F$の\textbf{有限次拡大体}という．
    \end{enumerate}
\end{definition}

\begin{definition}
    任意の$f\in F[X]\setminus F$に対して，$\{a\in F\mid f(a)=0\}\ne\emptyset$となるとき，$F$を\textbf{代数閉体}という．
\end{definition}

\begin{theorem}
    任意の$F$について，$F$の拡大体であって代数閉体であるものが存在する．
\end{theorem}

\begin{definition}
    $F$を体，$\o{F}$を$F$の拡大体であって代数閉体であるものとする．
    \begin{enumerate}
        \item $f\in F[X]\setminus F$が\textbf{分離多項式}であるとは，$f$が$\o{F}$において重根を持たないことをいう．
        \item 分離多項式$f\in F[X]\setminus F$に対し，根を$\{a\in\o{F}\mid f(a)=0\}=:\{\alpha_1,\cdots,\alpha_d\}\;(d:=\deg f)$と表し，$F_f=F(\alpha_1,\cdots,\alpha_d)$とおく\footnote{$F$上で$\alpha_1,\cdots,\alpha_d$で生成されるような$\o{F}$の部分体を表す．これは分数も含むということを意味するが，実は生成される部分環$F[\alpha_1,\cdots,\alpha_n]$に一致することも証明できる．}．この$F_f$を$f$の\textbf{分解体}という．
        \item ある分離多項式$f\in F[X]$を用いて$F_f$の形で表せる$F$の有限次拡大体の$F$を\textbf{Galois拡大体}という．\footnote{Galois理論はGalois拡大体についてのみ適用可能である．}
    \end{enumerate}
\end{definition}
\begin{example}
    $F=\Q,\o{F}=\C$とする．
    \begin{enumerate}
        \item $f(X)=X^2-2$ならば，$\Q_f=\Q(\sqrt{2})=\Q[\sqrt{2}]$．
        \item $\Q(\sqrt[3]{2}),\Q(\sqrt[4]{2})$は$\Q$の有限次拡大体だが，重根を持ってしまうので，Galois拡大体ではない．
    \end{enumerate}
\end{example}

\begin{definition}
    $F$のGalois拡大体$E$に対して，$F$上恒等であるような$E$の体自己同型からなる集合$\Gal(E/F)=\Brace{f\in\Aut_\Ring(E)\mid\forall_{a\in F}\;f(a)=a}$を$F\mono E$の\textbf{Galois}群と呼ぶ．\footnote{$[E:F]=\Abs{\Gal(E/F)}$なので，必ず有限になる．}
\end{definition}

\begin{theorem}[Galois理論の基本定理]
    $E$を$F$のGalois拡大体とする．部分群$H\mono\Gal(E/F)$に対し，$E^H:=\Brace{a\in E\mid\forall_{f\in H}\;f(a)=a}$とおく．これは$F\subset E$の中間体である．
    この構成の定める対応$H\mapsto E^H$は，$\Gal(E/F)$の部分群と$F\subset E$の中間体の間に全単射を引き起こす．逆写像は$M\mapsto\Gal(E/M)$で定まる．また，この写像は包含関係を逆転させる単調写像である．
\end{theorem}
\begin{remarks}
    $\Gal(E/F)$に対応する中間体は$F$自身である：$E^{\Gal(E/F)}=F$．
\end{remarks}


\chapter{組み合わせ論}

\begin{quotation}
    具体例を見るとき特に位数が大事．
\end{quotation}

\section{2021年度期末試験}


問題１
\begin{enumerate}
    \item $\abs{Gx}=\frac{\abs{G}}{\abs{\Stab_G(x)}}$．
    Lagrangeの定理より$\frac{\abs{G}}{\abs{\Stab_G(x)}}=\abs{G/\Stab_G(x)}$であるから，写像
    \[\xymatrix@R-2pc{
        \varphi:G/\Stab_G(x)\ar[r]&Gx\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        g\Stab_G(x)\ar@{|->}[r]&gx
    }\]
    が全単射であることを示せば良い．
    \item $S_3$は生成元$\Brace{\tau:=(1\;2),\sigma:=(1\;2\;3)}$と関係式$\Brace{\sigma^3=\tau^2=\tau\sigma\tau\sigma=e}$によって定まる群であるから，
    $\Brace{(a,b)\in S^4\times S^4\mid a^3=b^2=baba=e}$の元の個数を数えれば良い．
    $a$は長さ３の巡回置換，$b$は長さ２の巡回置換（互換）しかあり得ない．$baba=e$を満たすためには，$b$が動かす２つの要素がいずれも$a$に含まれていなければならない．そのようなものは，39個．
    \item \begin{description}
        \item[$p=q$のとき] $\Z/p^2\Z\times\Z/p\Z$の部分群は，位数$p^3$のものが１つ，$p^2$のものが$\brac{(1,-)}\;(-=0,1,\cdots,p-1)$という形の$p$個と$p\Z/p^2\Z\times\Z/p\Z$，位数$p$のものが$\brac{(0,1)},\brac{(p,-)}$という形の$p+1$個，位数$1$のものが1個で合計$2p+4$個．
        \item[$p\ne q$のとき] $\Z/p^2\Z\times\Z/q\Z$の部分群は，巡回群であることに注意すると単元生成される部分群に注目すればよく，位数$p^2q$のものが１つ，$p^2$のものが$\brac{(1,0)}$の１つ，$pq$のものが$\brac{(p,1)}$の１つ，$p$のものが１つ，$q$のものが１つ，$1$のものが１つなので合計$6$個．
    \end{description}
    \item 成り立つ．有限Abel群の構造定理より，同型$f:M\iso\Z/p_1^{m_1}\Z\times\cdots\times\Z/p_r^{m_r}\Z$が存在するが，これが$f(N)=\Z/p_1^{m_1}\Z\times\cdots\times\Z/p_s^{m_s}\Z$を満たすように取ることができることを示す．
    $N$の位数は$p_1^{m_1}\cdots p_s^{m_s}$であるが，$f(N)$は上述の形を満たさないとする．
    すると，ある$1\le i\le s$が存在して，位数$p_i^{m_i}$の元$(0,\cdots,0,1,0,\cdots,0)$は$N$に含まれない．これに対応する元$\o{(0,\cdots,0,1,0,\cdots)}\in M/N$の位数は$p_i$の倍数である．これは矛盾．このとき，同じ同型は$N\times M/N\simeq M$を引き起こす．
    \item $\Im f=\{0,2,4,6\}$より，$\Im f\simeq\Z/4\Z$．
    $\Ker f=\brac{(1,3)}$という巡回群であるから，有限巡回群の基本定理より，$\Ker f\simeq\Z/8\Z$．
    \item 
    $\C[X]$が単項イデアル整域であることとイデアルの対応より，$\C[X]$のイデアルで$(X^3+X^2)$を含むものを考えれば良い．$\C[X]^\times=\C^\times$が単元で，単元同士で写り合う同伴元は同じイデアルを生成することと同値であることに注意すると，
    $(X^3+\al X^2+\beta X+\gamma)\;(\al,\beta,\gamma\in\C, \al\ne 1)$となる．
    $\C[X]$は特に一意分解整域で，素元と既約元は一致するから，素イデアルは既約元が生成するイデアルである．$\C[X]$の既約元は一次式に限る．
    また，一次式による$\C[X]$の商は$\C$に同型だから，極大でもある．
    \item 
    $\begin{pmatrix}a&b\\c&d\end{pmatrix}\in I$ならば，各
    \[\begin{pmatrix}a&0\\0&0\end{pmatrix},\begin{pmatrix}0&b\\0&0\end{pmatrix},\begin{pmatrix}0&0\\c&0\end{pmatrix},\begin{pmatrix}0&0\\0&d\end{pmatrix}\]
    も$I$に含まれ，また，$(00;10)$を左からかけることと$(01;00)$を右からかけることとその両方を考えることより，$\begin{pmatrix}a&0\\0&0\end{pmatrix}\in I$ならば$\begin{pmatrix}0&a\\0&0\end{pmatrix},\begin{pmatrix}0&0\\a&0\end{pmatrix},\begin{pmatrix}0&0\\0&a\end{pmatrix}\in I$より，
    $(10;00),(20;00),(30;00)$のうちいくつかが生成する両側イデアルを考えれば十分．
    $(10;00),(30;00)$は$M_2(\Z/4\Z)$を生成し，$(20;00)$は$M_2(2\Z/4\Z)$を生成する．２元生成されるイデアルは全て$M_2(\Z/4\Z)$．
    \item $\bF_7/(X^3-1)$は，$1,X$が生成し，関係式$X^3=1$が定める環である．$1$の行き先は$1$だから，あとは$X$の行き先を定めれば良い．よって，$\Brace{a\in\bF_7/(X^4-X^2)\mid a^3=1}$の元の個数を求めれば良い．中国剰余定理より$\bF_7[X]/(X^4-X^2)\simeq\bF_7[X]/(X^2)\times\bF_7\times\bF_7$である．
    $\bF_7$の元で位数が$3$の約数であるのは，$1^3=1,2^3=1,4^3=1$．$\bF_7[X]/(X^2)$は，
    $1,2,4$に加えて，$(X^2+a)\;(a=1,2,4)$の６つが存在する．
    実際，$(X^2+aX+b)^3=(X^2)+3ab^2X+b^3$より，$a=0,b=1,2,4$が必要．
    以上より，$3^2\cdot 6=54$個．
    \item $\Z[X]_{X^2-1}=\{(X^2-1)^m\in\Z[X]\mid m\in\N\}^{-1}\Z[X]$である．
    $\Z[X]$は整域で，$0\notin \{(X^2-1)^m\in\Z[X]\mid m\in\N\}^{-1}$より，\[\frac{f(X)}{(X^2-1)^m}\frac{g(X)}{(X^2-1)^n}=1\Leftrightarrow f(X)g(X)=(X+1)^{m+n}(X-1)^{m+n}\quad(m,n\in\N).\]
    $\Z[X]$は一意分解整域だから，$f\in(\Z[X]_{X^2-1})^\times\Leftrightarrow f\in\Brace{a(X+1)^i(X-1)^j\in\Z[X]_{X^2-1}\mid a\in\Z^\times,0\le i,j\le n+m}$．
    ここで，
    \[\xymatrix@R-2pc{
        \varphi:\Z/2\Z\times\Z\times\Z\ar[r]&\Z[X]_{X^2-1}\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        (a,i,j)\ar@{|->}[r]&(-1)^a(X+1)^i(X-1)^j
    }\]
    と定めると，これが群準同型写像であることを示す．
    まず，写像として全単射である．そして，指数法則より$\varphi(a+b,i+i',j+j')=\varphi(a,i,j)\cdot\varphi(b,i',j')$．
    \item まず(6)からのインスピレーションで$\R\times\R$などが思いつくが，これは整域ではない．$\Z\times\Z$も整域にはならない．
    \item $6\Z$を含むイデアルは$2\Z,3\Z$の二つであるが，肝心の$\Z/6\Z$は整域ではない．
    $0\notin S$のとき，整域の局所化は整域であることを使う．$(\Z\setminus 2\Z\cap \Z\setminus 3\Z)^{-1}\Z$は極大イデアルを２つもつ．単項イデアル整域の局所化は再び単項イデアル整域であることに注意すると，$(2/1),(3/1)$は極大イデアルであり，これ以外の素イデアルは存在しないことから極大イデアルは以上の２つである．
\end{enumerate}

問題２
\begin{enumerate}
    \item $[(1,1,0,\sigma),(0,0,0,\tau)]=(1,0,1,\sigma^2)\in[G,G]$や$[(1,1,0,\sigma),(0,0,0,\sigma)]=(1,0,1,e)$などの観察と対称性より，
    \[\underbrace{\{(0,0,0),(1,1,0),(1,0,1),(0,1,1)\}}_{=:B}\rtimes A_3\subset[G,G].\]
    $B\rtimes A_3$は位数$12$の正規部分群である．
    これは，この群$G$における共役変換は，
    \begin{align*}
        (a,b,c)f(1,1,0)\sigma^if^{-1}(a,b,c)&=(a,b,c)\cdot f\sigma^if^{-1}\cdot f\sigma^{2i}(1,1,0)\cdot(a,b,c)\\
        &=f\sigma^if^{-1}\cdot f\sigma^if^{-1}(a,b,c)\cdot f\sigma^{2i}(1,1,0)\cdot(a,b,c)
    \end{align*}
    となり，第一引数については任意の$(\Z/3\Z)^3$の元自身とその置換とを足す操作となるが，これは$1$の個数の偶奇を変えない操作であることがわかる．また第二引数についても，
    $A_3$が$S_3$の正規部分群であることから，$B\rtimes A_3$は確かに正規である．
    すると，$G/B\rtimes A_3$の位数は$4$であるが，位数$4$の群はAbel群である．よって，
    $[G,G]\subset B\rtimes A_3$もわかる．よって，$[G,G]=B\rtimes A_3$．

    $G/[G,G]$は$\Brace{(0,0,0),(1,1,0)}\rtimes\{e,\tau\}$と表せて，この群の任意の元の位数は$2$であるから，$G/[G,G]\simeq\Z/2\Z\times\Z/2\Z$．
    \item $\abs{G}=48$であるから，$G$の$p$-Sylow部分群の位数は$16$．Sylowの定理より，$p$-Sylow部分群の個数は$1$または$3$である．
    いま，$(\Z/3\Z)^2\times\{e,(1,2)\},(\Z/3\Z)^2\times\{e,(1,3)\},(\Z/3\Z)^2\times\{e,(2,3)\}$は部分群を定め，いずれも位数は$16$であるから，これらが$p$-Sylow部分群である．
    \item $B\times S_3$が定める部分群が条件を満たす．これは正規部分群$B$をもち，最初の２成分への射影によって$B\simeq\Z/2\Z$である．
    また，$(B\times S_3)/B\simeq S_3$である．
\end{enumerate}

\begin{remarks}[半直積の計算]
    $G\rtimes H$は，任意の元を$G$の元と$H$の元の積に分解し，交換法則を見つける方向で対処すると計算がしやすい．
    そして交換子部分群の計算が一番難しい．生成元に注目することと，正規部分群になることと，割ったら可換になることを使って決定していく．
    そして半直積と交換子には綺麗な関係がある．$gh=[g,h](hg)$となる．
\end{remarks}

問題３：局所化$A_{\o{X}}$は一意分解整域であるが，本人$A$は一意分解整域ではない整域$A$．
\begin{enumerate}
    \item $\C[X,Y,Z]$は一意分解整域で，素元と既約元は一致するから，$Z^2-XY$が既約であることを示せば良い．
    $Z^2-XY\in(\C[X,Y])[Z]$についてEisensteinの既約判定法より，素イデアル$(X)$が存在して$-XY\in(X),-XY\notin (X^2)$を満たすから，これは$(\C[X,Y])[Z]$の既約元，したがって$\C[X,Y,Z]$の既約元である．
    \item $A_{\o{X}}\simeq\C[X,Y,Z]_X/(Z^2-XY)_X\simeq(\C[X,Z]_X)[Y]/(X^{-1}Z^2-Y)$．
    ここで，評価写像$\ev_{Z^2/X}:(\C[X,Y]_X)[Y]\to\C[X,Z]_X$を考えると，$\Ker\ev_{Z^2/X}=(Z^2-XY)_X$．準同型定理より，$(\C[X,Z]_X)[Y]/(X^{-1}Z^2-Y)\simeq\C[X,Z]_X\simeq(\C[X]_X)[Z]$．
    $\C[X]$は一意分解整域だから$\C[X]_X$も一意分解整域．よって，$A_{\o{X}}\simeq(\C[X]_X)[Z]$も一意分解整域である．

    これより，$(A_{\o{X}})^\times=\o{\C[X]_X\setminus\{0\}}$．$\o{X}^{-1}\notin A$なので，$(A_{\o{X}})^\times\cap A=\o{\C[X]\setminus\{0\}}$．
    $A$は$\o{X}$の逆元を持たないことは，$\C[X,Y,Z]$に引き戻して考えると$Z^2-XY$が既約元であることからわかる．
    \item $\o{Z}\in A_{\o{X}}$は，一変数多項式環の元と同一視できるので，既約元である．
    $\o{Z}=fg\;(f,g\in A)$と表せると仮定する．このとき，$f\in (A_{\o{X}})^\times\cap A$または$g\in (A_{\o{X}})^\times\cap A$である．
    $f\in\o{\C[X]\setminus\{0\}}$として一般性を失わない．しかし，$(X)$の元は可逆でないから，$Z=fg$に矛盾するため，$f\in\C^\times$．特に，$f\in A^\times$．
    
    $A/(\o{Z})$が整域でないことを示せば良い．$\o{XY}=\o{Z}^2\in A$であるが，$X,Y\ne 0$かつ$XY=0\in A/(\o{Z})$．よって，$A/(\o{Z})$は整域ではない．
\end{enumerate}

\section{群の演習問題}

\begin{enumerate}
    \item $\R$のaffine変換群は群になる．
    \item Möbius群の確認．
    \item 右の単位元と右の逆元の存在と結合律を仮定する$gg'=e,ge=g$だけで，$g$の右単位元$g'$の右単位元を$g''$とすると，
    \[g'g=g'g(g'g'')=g'g''=e\]
    より，$g=g''$を得る．したがって，右逆元と左逆元は一致．すると，$eg=gg'g=ge=g$より左単位元と右単位元も一致する．
    \item $G$に無限位数の群があるとき，部分群の特徴付け$SS\subset S$は必要十分ではない．
    \item \ref{lemma-5}
    \item $\R$を群と呼ぶときは加法群だから，自明でない有限部分群はない．なるほど！半直積だ．行列の群も半直積に分解できれば，交換条件も整理され，随分簡単になるのではないか？
    \item (7)
    \item やはり群の決定は位数から攻めるんだな．
    \item (9)
    \item $\SL_2(\Z)$は$(11;01),(01;-10)$の二元で生成される．証明は極めて組み合わせ論的．
\end{enumerate}

\subsection{準同型の決定}

\begin{proposition}
    群準同型$f:G\to H$の，$g\in G$の値$f(g)\in H$の位数は$g$の位数の約数である．
\end{proposition}

\begin{thebibliography}{9}
    \bibitem{Reinhard Diestel}
    Reinhard Diestel "Graph Theory" 5th ed. (2016).
    \bibitem{Godsil}
    Chris Godsil and Gordon Royle (2001), Algebraic Graph Theory, Springer.
    \bibitem{Barr & Wells}
    Michael "Toposes, Triples and Theories" (Springer, 1983).
\end{thebibliography}

\end{document}