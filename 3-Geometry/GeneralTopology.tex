\documentclass[uplatex,dvipdfmx]{jsreport}
\title{General Topology}
\author{司馬博文}
\date{\today}
\pagestyle{headings} \setcounter{secnumdepth}{4}
\input{/Users/Hirofumi Shiba/NatureOfStatistics/preamble_no_fonts.tex}
%\input{/Users/hirofumi.shiba48/NatureOfStatistics/preamble_no_fonts.tex}
\usepackage[math]{anttor}
\begin{document}
\tableofcontents

\chapter{集合と写像}

\begin{notation}\mbox{}
    \begin{enumerate}
        \item 位相空間論では集合の概念については次の３点のみを使用し，その定義については抽象化してinformalに言及する．
        \begin{enumerate}[(1)]
            \item 像写像は合併は保つが，共通部分は不完全にしか保たない（命題\ref{prop-functoriality-of-image-and-inverse-image-mappings}）．
            \item 逆像写像は合併も共通部分も保つ（命題\ref{prop-functoriality-of-image-and-inverse-image-mappings}）．
            \item de Morganの法則（命題\ref{prop-de-Morgan's-law}）．
        \end{enumerate}
        \item 集合$X$に対し，その有限部分集合全体からなる集合を
        \[ F(X):=\{A\in P(X)\mid|A|<\infty\} \]
        と置く．
    \end{enumerate}
\end{notation}

\section{写像の定める関手}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    位相では，集合$f:X\to Y$の定める対応$f^*:P(X)\to P(Y)$が肝要になる．
    この関手の性質を調べる．
    $P(X)$には，完備Boole代数である側面と，完備束である側面とがある．
\end{tcolorbox}

\subsection{随伴性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $f^*,f_*$は互いに随伴をなす（$f_*$が左随伴：$f_*\dashv f^*$）．これを用いて$P(X)$と$P(Y)$を往来して調べることが数学の基礎の最も基本的な手法となる．
    Lawvereによると，論理とは，2つの互いに随伴な射の組である．
\end{tcolorbox}

\begin{proposition}[adjunction]\label{prop-adjunction}
    $f:X\to Y$を写像，$A\subset X,B\subset Y$とする．
    \begin{enumerate}
        \item $f(A)\subset B\Leftrightarrow A\subset f^{-1}(B)$．
        \item \begin{enumerate}[(a)]
            \item $A\subset f^{-1}(f(A))$．
            \item $f(f^{-1}(B))\subset B$．
        \end{enumerate}
        \item $f$が単射のとき(a)は等号成立．また，(a)が任意の$A\in P(X)$について成り立つならば$f$は単射．
        \item $f$が全射のとき(b)は等号成立．特に，$f(f^{-1}(B))=f(X)\cap B$．
    \end{enumerate}
\end{proposition}
\begin{proof}
    どちらも，$x\in A\Rightarrow f(x)\in B$という論理式の表現である．
\end{proof}

\begin{remarks}[随伴の向きについて]
    なお，向きは，包含写像$i:f(A)\to B$の向きで左右が決まっている．
    これは内積空間での関係$\langle Ax,y\rangle=\langle x,By\rangle$から来たものである．
    あえて書くなら，$\bracket{f(A),B}=\bracket{A,f^{-1}(B)}$である．ただし$\bracket{S,T}$とは，$S\subset T$とした．
\end{remarks}

\subsection{像の関手性の破れ}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    非対称性が破れる理由は，終域に「制限」をかけられないことが１つある．
    これは$f(f^{-1}(B))=f(X)\cap B$なる消息からもわかる(projection formula)という．
    これは相対位相のようなものを考える必然性を生み出す．
\end{tcolorbox}

\begin{problem}[像の値域]
    $f:X\to Y$を写像とする．
    \begin{enumerate}
        \item $\Im f_*=P(\Im f)$．
        \item $\forall_{S\subset X,T\subset Y}\;f(S)\cap T=f(S\cap f^{-1}(T))$．
    \end{enumerate}
\end{problem}
\begin{proof}
    略．
\end{proof}

\begin{proposition}[像は和のみを保つ]\label{prop-image-preserve-unions}
    $f:X\to Y$を写像，$\{S_i\}_{i\in I}\subset P(X)$を族とする．像$f_*:P(X)\to P(Y)$は次を満たす：
    \begin{enumerate}
        \item $f_*(\cup_{i\in I}S_i)=\bigcup_{i\in I}f_*(S_i)$．
        \item $f_*(\cap_{i\in I}S_i)\subset\bigcap_{i\in I}f_*(S_i)$．
    \end{enumerate}
    $I\ne\emptyset$かつ$f$が単射のとき，(2)の等号は成立する．
    また，任意の$\{S_i\}_{i\in I}\subset P(X)$について(2)の等号が成立するならば，$f$は単射である．
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item a
        \item $\forall_{i\in I}\;\cap_{i\in I}S_i\subset S_i$だから，$\forall_{i\in I}\;f_*(\cap_{i\in I}S_i)\subset f_*(S_i)$．
    \end{enumerate}
\end{proof}

\subsection{逆像の関手性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $f^*$は完備Boole代数$P(X)$の射として完成されている．
\end{tcolorbox}

\begin{proposition}[順序の保存]
    $f:X\to Y$を写像とする．$f_*:P(X)\to P(Y),f^*:P(Y)\to P(X)$はいずれも関手である．
    \begin{enumerate}
        \item $\forall_{A,A'\subset X}\;A'\subset A\Rightarrow f_*(A')\subset f_*(A)$．
        \item $\forall_{B,B'\subset Y}\;B'\subset B\Rightarrow f^*(B')\subset f^*(B)$．
    \end{enumerate}
\end{proposition}

\begin{proposition}[逆像は和と積を保つ]
    $f:X\to Y$を写像，$\{T_i\}_{i\in I}\subset P(Y)$を族とする．像$f^*:P(Y)\to P(X)$は次を満たす：
    \begin{enumerate}
        \item $f^*(\cup_{i\in I}T_i)=\bigcup_{i\in I}f^*(T_i)$．
        \item  $f^*(\cap_{i\in I}T_i)=\bigcap_{i\in I}f^*(T_i)$．
    \end{enumerate}
\end{proposition}

\begin{proposition}[逆像は補集合を保つ]
    $f:X\to Y$を写像，$B\subset Y$を部分集合とする．
    この時，$f^{-1}(Y\setminus B)=X\setminus f^{-1}(B)$．
\end{proposition}

\subsection{可逆性の特徴付け}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $P(X)$はBoole代数であるだけでなく，順序による圏とみなせる．
    このときの米田の補題が効いている．
    これが束の構造である．
\end{tcolorbox}

\begin{proposition}[可逆射の普遍性による特徴付け：集合を，他の集合への写像についての述語で特徴付けること]
    $f:X\to Y$を写像とする．次の２条件は同値である．
    \begin{enumerate}
        \item $f$は可逆である．
        \item 任意の集合$Z$に対して，写像$f^*:\Map(Y,Z)\to\Map(X,Z)$は可逆である．
    \end{enumerate}
\end{proposition}
\begin{proof}
    略．
\end{proof}

\begin{remarks}
    圏$P(X)$での米田の補題は，$(A=B)\Leftrightarrow(\forall_{T\in P(X)}\;A\le T\Leftrightarrow B\le T)$という主張になる．
    この完備性を利用したのが「上限」の概念であり，この完備性を利用して有理数を完備化する手法がDedekindの切断でもある．
\end{remarks}

\subsection{全射・単射性の特徴付け}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    ここは線形代数の理論の力を借りる．$P(X)$を特性関数のなす線型空間と同一視し，$f^*,f_*$をその間の線型写像とみる．
\end{tcolorbox}

\begin{proposition}[全射・単射の特徴付け]\label{prop-dual-maps}
    $f:X\to Y$を写像，$f^*,f_*$を関手とする．
    \begin{enumerate}
        \item $f$が単射であることと，$f_*$が単射であることと，$f^*$が全射であることは同値である．
        \item $f$が全射であることと，$f_*$が全射であることと，$f^*$が単射であることは同値である．
    \end{enumerate}
\end{proposition}
\begin{proof}
    まず，$f^*$について示す．$f_*$についても同様．
    集合$S$に対して，全単射
    \[\xymatrix@R-2pc{
        \paren{\bF_2^{\oplus S}}^\vee\ar[r]&P(S)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        g\ar@{|->}[r]&\{s\in S\mid g([s])=1\}
    }\]
    が存在することに着目する．ただし，$(-)^\vee$は$\bF_2$-線型空間の双対を表す．

    写像$f:A\to B$は$\bF_2$-線型写像$\varphi_f:\bF_2^{\oplus A}\to\bF_2^{\oplus B}$を誘導し，
    $f$の単射性・全射性は$\varphi_f$の単射性・全射性と同値である．
    また，双対写像$\varphi_f:\paren{\bF_2^{\oplus B}}^\vee\to\paren{\bF_2^{\oplus A}}^\vee$は上記の全単射により$f^*:P(B)\to P(A)$に対応する．
    よって主張は次の補題から従う．
\end{proof}

\begin{lemma}
    $k$を体とする．$\varphi:V\to W$を$k$-線型空間の間の線型写像とし，$\varphi^*:W^\vee\to V^\vee$をその双対写像とする．
    この時，
    \begin{enumerate}
        \item $\varphi$が単射であることは，$\varphi^*$が全射であることと同値である．
        \item $\varphi$が全射であることは，$\varphi^*$が単射であることと同値である．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $0\to\Ker\varphi\to V\to W\to\Coker\varphi\to 0$は完全列である．
        \item $k$は$k$加群として入射的．即ち，関手$\Hom(-,k)$は完全となる．
        \item $0\to(\Coker\varphi)^\vee\to W^\vee\to V^\vee\to(\Ker\varphi)^\vee\to 0$は完全列である．
    \end{enumerate}
\end{proof}

\subsection{2つの関手の関係}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $f$が全射または単射のとき，$f^*,f_*$は互いに部分的に逆になる．
\end{tcolorbox}

\begin{proposition}[全射の双対写像]\label{prop-dual-of-epi}\mbox{}
    \begin{enumerate}
        \item $f$が全射の時，定理\ref{thm-epi}より，split epiだから，右逆射(section) $f^{-1}:Y\to X$が存在して，\[f\circ f^{-1}=\id_Y\Rightarrow (f^{-1})^*\circ f^*=\id^*_Y=\id_{P(Y)}.\]よって，$(f^{-1})^*$は$f^*$の左逆射(retraction)であるという意味で$(f^*)^{-1}$とも表し得る．
        \item $f$が全射の時，同じくsplit monoだから，あるいは命題\ref{prop-functoriality-of-image-and-inverse-image-mappings}.3より，任意の部分集合$B\subset Y$について$f(f^{-1}(B))=\id_Y(B)=B=B\cap f(X)$．従って，$f_*\circ f^*=\id_{P(Y)}$である．
        \item 以上のことを象徴的に表せば，\[((f^*)^{-1}=(f^{-1})^*=)f^{*-1}=f_*.\]
    \end{enumerate}
\end{proposition}

\begin{proposition}[単射の双対写像]\label{prop-dual-of-mono}\mbox{}
    \begin{enumerate}
        \item $f$が単射の時，定理\ref{thm-mono}より，split monoだから，左逆射(retraction) $f^{-1}:Y\to X$が存在して，\[f^{-1}\circ f=\id_X\Rightarrow f^*\circ (f^{-1})^*=\id^*_X=\id_{P(X)}.\]よって，$(f^{-1})^*$は$f^*$の右逆射(section)であるという意味で$(f^*)^{-1}$とも表し得る．
        \item $f$が単射の時，同じくsplit monoだから，任意の部分集合$A\subset X$について$f^{-1}(f(A))=\id_X(A)=A$．従って，$f^*\circ f_*=\id_{P(X)}$である．
        \item 以上のことを象徴的に表せば，\[((f^*)^{-1}=(f^{-1})^*=)f^{*-1}=f_*.\]
    \end{enumerate}
\end{proposition}


\subsection{双対性概観}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $2$への線型写像を通じて，集合論と線形代数との双対理論が相即相入する．
\end{tcolorbox}

\begin{tcolorbox}[breakable,coltitle=white,fonttitle=\bfseries\sffamily,
    title=双対写像への全射と単射の持ち越し]
    前の節の逆像写像についての内容を一般化する．
    定理\ref{thm-mono},\ref{thm-epi}より，次のHom関手について，
    \begin{align*}
        fが単射(左簡約可能)&\Leftrightarrow f_*が単射(左簡約可能),&fが全射(右簡約可能)&\Leftrightarrow f^*が単射\\
        &\Leftrightarrow f^*が全射,&&\Leftrightarrow f_*が全射
    \end{align*}
    は，１行目がすぐに判り\footnote{\url{https://ncatlab.org/nlab/show/monomorphism}での特徴付け４つのうちの１つに含まれている}，２行目は双対原理から来る．
    $f^*$が$C$でmonic / epicであることと，$f^*$が$C^{op}$でepic / monicであることが同値なのである．$C^{op}$での$f^*$とは，postcomposition $f_*$に他ならない．
    よって，このことは単射／全射を，monic / epicに変えても一般の圏にて成り立つ．
    \[\xymatrix@R-2pc{
        f_*:\Map(Z,X)\ar[r]&\Map(Z,Y)&f^*:\Map(Y,Z)\ar[r]&\Map(X,Z)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        g\ar@{|->}[r]&f\circ g&g\ar@{|->}[r]&g\circ f
    }\]
\end{tcolorbox}

\begin{theorem}
    $f:X\to Y$を写像とする．$Z$を任意の集合として，$f^*:\Map(Y,Z)\to\Map(X,Z)$を反変Hom関手，$f_*:\Map(Z,X)\to\Map(Z,Y)$を共変Hom関手とする．
    \begin{enumerate}
        \item $f:X\to Y$が単射である$\quad\Leftrightarrow\quad f^*$が全射である．
        \item $f:X\to Y$が全射である$\quad\Leftrightarrow\quad f^*$が単射である．
        \item $f:X\to Y$が単射である$\quad\Leftrightarrow\quad f_*$が単射である．
        \item $f:X\to Y$が全射である$\quad\Leftrightarrow\quad f_*$が全射である．
    \end{enumerate}
\end{theorem}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{align*}
            fが単射&\quad\Leftrightarrow\quad fが左簡約可能&(定理\ref{thm-mono})\\
            &\quad\Leftrightarrow\quad f^*が右簡約可能&(後述)\\
            &\quad\Leftrightarrow\quad f^*が全射&(定理\ref{thm-epi})
        \end{align*}
        であるが，$\Rightarrow$は，$r\circ f=\id_X$を満たす$f$のretraction $r$に対して，$f^*\circ r^*=\id_{\Map(X,Z)}$を満たす$r^*:\Map(X,Z)\to\Map(Y,Z)$が見つかる．
        $\Leftarrow$は，$Z=X$とし，$f^*\circ r=\id_{P(X)}$を満たす$r:\Map(X,X)\to\Map(Y,X)$に対して，$r(\id_X)$が$f$のretractionとなる．実際，$f(r(\id_X))=\id_X$より，$r(\id_X)\circ f=\id_X$を得る．
        \item すでに述べた．
        \item すでに述べた．
        \item 
    \end{enumerate}
\end{proof}
\begin{remarks}
    おそらくこういうことであろう．しかし，epimorphismの定義は，任意の対象$Z$と平行な射の組$g_1,g_2:Y\to Z$について，$(g_1\circ f=g_2\circ f)\Rightarrow(g_1=g_2)$であり，これはhom-functor $\Hom(-,Z)$が単射であることの定義に他ならない．
    Sets上では単射とepimorphismが同値なので，上の定理が成り立つ．

\end{remarks}

$2$の役割を入れ替えることによる双対が起こる．
de Morgan dualityが開集合の閉集合の双対を引き起こしていて，
第\ref{sec-duality-of-opens-and-closed}節の主眼である．
これと，反対圏が生み出す双対とどのような関係があるのだろうか？

\section{普遍構成}

\subsection{和と積}

\begin{proposition}[積の普遍性]
    $(X_i)_{i\in I}$を集合族，$X:=\prod_{i\in I}X_i$とする．任意の集合$T\in\Set$と写像の族$(f_i:T\to X_i)_{i\in I}$に対して，ある$f:T\to X$がただ一つ存在して，次を満たす：$\forall_{i\in I}\;f_i=\pr_i\circ f$．
\end{proposition}

\subsection{等化子}

\begin{proposition}[等化子の普遍性：単射と一般の写像]
    $i:X\to Y$を単射，$T$を勝手な集合，$f:T\to Y$を写像とする．次の２つの条件は同値である．
    \begin{enumerate}
        \item $f(T)\subset i(X)$である．
        \item 下の図式を可換にする写像$g:T\to X$が一意的に存在する．
        \[\xymatrix{
            X\;\ar@{^{(}->}[r]^-i&Y\\
            T\ar@{.>}[u]^-g\ar[ur]_-f
        }\]
    \end{enumerate}
\end{proposition}
\begin{remarks}
    $f(T)\supsetneq i(X)$の時，$g$をどう取っても$f(T)\setminus i(X)\ne\varnothing$となってしまうため，写像として一致し得ない．
\end{remarks}

\subsection{余等化子}

\begin{proposition}[全射と一般の写像]\label{prop-induced-mapping}
    $X,Y,Z$を集合，$p:X\to Y$を全射，$f:X\to Z$を写像とする．
    \begin{enumerate}
        \item 次の条件(1)と(2)は同値である．
        \begin{enumerate}[(1)]
            \item $f=g\circ p$を満たす写像$g:Y\to Z$が存在する．\begin{center}\begin{tikzcd}
                X \ar[r, twoheadrightarrow, "p"] \ar[dr, "f"'] & Y \ar[d, dashed, "g"]\\
                & Z
            \end{tikzcd}\end{center}
            \item 全射$p$が定める同値関係$R_p$は，写像$f$が定める同値関係$R_f$よりも細かい：$C_{R_p}\subset C_{R_f}$．
        \end{enumerate}
        \item いま，$R_p$が$R_f$よりも細かいとする．この時，次の２つの条件は同値である．
        \begin{enumerate}[(1)]
            \item $f=g\circ p$を満たすこの$g:Y\to Z$は単射である．
            \item $R_p$と$R_f$は同値である．
        \end{enumerate}
    \end{enumerate}
\end{proposition}
\begin{proof}
    \begin{description}
        \item[1. ] $(1)\Rightarrow (2)$は\[ \forall x,x'\in X ,\; p(x)=p(x')\Rightarrow f(x)=f(x') \]を示せば良い．いま，実際$p(x)=p(x')$を満たす$x,x'\in X$について，$q(p(x))=q(p(x'))$であるから，$f(x)=f(x')$が従う．

        次に$(2)\Rightarrow (1)$を考える．写像$g$を構成するために，写像
        \begin{center}\begin{tikzcd}
            (p,f):X \ar[r] \ar[d, phantom, "\rotatebox{90}{$\in$}"] & Y\times Z \ar[d, phantom, "\rotatebox{90}{$\in$}"] \\
            x \ar[r, mapsto] & (p(x),f(x))
        \end{tikzcd}\end{center}
        を考える．この値域$(p,f)(X)=\{ (p(x),f(x))\mid x\in X \}=:\Gamma_g$は(A)写像のグラフとなっており，そして(B)このグラフが定める写像$(Y,Z,\Gamma_g)=:g$が求める唯一つの写像であることを示す．
    
        (B)については，全ての$x\in X$について，$g$の定め方より$g(p(x))=f(x)$が成り立つから，確かにこれは$f=g\circ p$を満たす写像である．
    
        (A) $\Gamma_g$が写像のグラフとなっていることの証明を，$\mathrm{pr}_1:Y\times Z\to Y$を第一射影として，$\mathrm{pr}_1|_{\Gamma_g}$が全単射であることを示すことによって行う．
        $\mathrm{pr}_1|_{\Gamma_g}\circ (p,f)=id_Y\circ p=p$より，$p$は全射であるから$\mathrm{pr}_1|_{\Gamma_g}$も全射である．また，$(y,z),(y',z')\in\Gamma_g$について$\mathrm{pr}_1(y,z)=\mathrm{pr}_1(y',z')$即ち$y=y'$即ち
        $\exists x,x'\in X \,\mathrm{s.t.}\, p(x)=p(x')$ならば，$R_p\subset R_f$より，$f(x)=f(x')$即ち$z=z'$より，$\mathrm{pr}_1|_{\Gamma_g}$は単射でもある．
        \item[2. ] $(2)\Rightarrow(1)$． $R_p=R_f$の時，$X/R_p=X/R_f$であるから，$p,f$の標準分解は，可逆写像$\tilde{p}:X/R_p\to Y$と単射$\overline{f}:X/R_p\to Z$を定める．
        \begin{center}\begin{tikzcd}
            X \ar[r, "p"] \ar[d, "q"'] \ar[dr, "f"' near end, "\circlearrowright"' near start] & Y \ar[d, "g"] \\
            X/R_p \ar[ur, "\tilde{p}" near end, "\circlearrowright"' near start] \ar[r, "\overline{f}"'] \ar[d, dashed, "\tilde{f}"] & Z \\
            f(X) \ar[ur, dashed, "i"']
        \end{tikzcd}\end{center}
        この図式は結局全体として可換であり（$f=g\circ p$かつ$f=\overline{f}\circ q$より，$\overline{f}\circ q=g\circ p$を得る．これと$p=\tilde{p}\circ q$より），$\overline{f}\circ\tilde{p}^{-1}=g$となる．従って$g$は全射である．
    
        $(1)\Rightarrow(2)$．$g$が単射ならば，$g(y)=g(y')\Rightarrow y=y'$より，
        \begin{eqnarray*}
            p(x)=p(x') &\Leftrightarrow& g(p(x))=g(p(x')) \\
            &\Leftrightarrow& f(x)=f(x')
        \end{eqnarray*}
        より，$R_f=R_p$である．
    \end{description}
\end{proof}

\subsection{商集合の普遍性}

\begin{corollary}[商集合の普遍性]
    $R$を集合$X$上の同値関係とし，$q:X\to X/R$を商写像とする．
    \begin{enumerate}
        \item 写像$f:X\to Y$について，次の２条件は同値である．
        \begin{enumerate}[(1)]
            \item 次の図式を可換にする写像$g:X/R\to Y$が存在する．これは$f$によって引き起こされた写像である．\begin{center}\begin{tikzcd}
                X \ar[r, "q"] \ar[dr, "f"'] & X/R \ar[d, "g"] \\
                & Y
            \end{tikzcd}\end{center}
            \item $R$は，$f$が定める同値関係$R_f$より細かい．
        \end{enumerate}
        \item $R'$を$Y$の同値関係とし，$q':Y\to Y/R'$を商写像とする．写像$f:X\to Y$に対して，次の２条件は同値である．
        \begin{enumerate}[(1)]
            \item 写像$g:X/R\to Y/R'$で，次の図式を可換にするものが存在する．
            \begin{center}\begin{tikzcd}
                X \ar[r, "f"] \ar[d, "q'"'] & Y \ar[d, "q'"] \\
                X/R \ar[r, "g"'] & Y/R'
            \end{tikzcd}\end{center}
            \item $C\subset X\times X$を$R$のグラフとし，$C'$を$R'$のグラフとすると，$C\subset (f\times f)^{-1}(C')$である．
        \end{enumerate}
    \end{enumerate}
\end{corollary}
\begin{proof}
    1. 全射$p$について命題\ref{prop-induced-mapping}を適用して得る主張である．なお，$q$が定める同値関係$R_q$とは$R$に他ならない．
    
    2. 全射$q'\circ f$について命題\ref{prop-induced-mapping}を適用して得る主張である．
\end{proof}

\subsection{貼り合わせ}

\begin{theorem}
    $X$を集合，$(X_i)_{i\in I}$を被覆とする．
    ある集合$Y$への写像の族$(f_i:X_i\to Y)_{i\in I}$について，次の2条件は同値．
    \begin{enumerate}
        \item ある$f:X\to Y$が存在して，$\forall_{i\in I}\;f|_{X_i}=f_i$．
        \item $\forall_{i,j\in I}\;f_i|_{X_i\cap X_j}=f_J|_{X_i\cap X_j}$．
    \end{enumerate}
    このとき，$f$は一意的に存在する．
\end{theorem}

\section{写像の標準分解}

\subsection{標準分解}

\begin{proposition}[canonical decomposition]
    $f:X\to Y$を写像とする．
    \begin{enumerate}
        \item 次の図式を可換にする写像$\overline{f}$が唯一つ存在する．この分解$f=i\circ\overline{f}\circ q$を\textbf{$f$の標準分解}という．\begin{center}\begin{tikzcd}
            X \ar[r, "f"] \ar[d, "q"'] & Y\\
            X/R_f \ar[r, dotted, "\overline{f}"] & f(X)\ar[u, "i"']
        \end{tikzcd}\end{center}
        \item このとき，写像$\overline{f}$は可逆である．この$\overline{f}$を\textbf{$f$によって引き起こされる可逆写像}と呼ぶ．
        \item $f$が定める同値関係$R_f$についての商集合$X/R_f$を，\textbf{$f$の余像}と呼ぶ．
    \end{enumerate}
\end{proposition}

\subsection{単射と全射の特徴付け}

\begin{proposition}[全射と単射の特徴付け]
    次の３条件は同値である．
    \begin{enumerate}
        \item $f$は単射である．
        \item $f$が定める同値関係$R_f$は相等関係と同値である．
        \item $f$が定める写像$X\to f(X)$は可逆である．
    \end{enumerate}
    次の３条件は同値である．
    \begin{enumerate}
        \item $f$は全射である．
        \item $f(X)=Y$である．
        \item $X$の同値関係$R$と商集合からの可逆写像$\overline{f}:X/R\to Y$で，$q:X\to X/R$を商写像とすると，$f=\overline{f}\circ q$を満たすものが存在する．
    \end{enumerate}
\end{proposition}

\subsection{単射と全射の十分条件}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
単射は左$q$退化の事象，全射は右$i$退化の事象だと知っていれば，次は明らかに思えてくる．
\end{tcolorbox}

\begin{lemma}[単射は左$q$退化の事象，全射は右$i$退化の事象]
    $f:X\to Y, g:Y\to Z$を写像とする．
    次の条件について，1$\Rightarrow$2$\Rightarrow$3が成り立つ．
    \begin{enumerate}
        \item $f$と$g$は単射である．
        \item $g\circ f$は単射である．
        \item $f$は単射である．
    \end{enumerate}
    次の条件について，1$\Rightarrow$2$\Rightarrow$3が成り立つ．
    \begin{enumerate}
        \item $f$と$g$は全射である．
        \item $g\circ f$は全射である．
        \item $g$は全射である．
    \end{enumerate}
\end{lemma}

\begin{proposition}
    写像$f:X\to Y,g:Y\to Z$について，次の２条件は同値である．
    \begin{enumerate}
        \item $f\circ g$は可逆である．
        \item $g$が単射で$f$が全射である．
    \end{enumerate}
\end{proposition}

\begin{tbox}{red}{モノ射とエピ射まとめ}
    \begin{theorem}[mono]\label{thm-mono}
        以下は全て写像$f:X\to Y$が単射であることの同値な定義である．
        \begin{enumerate}
            \item ［像／逆像の言葉］$\forall x\in X f^{-1}(f(x))=\{x\}$．
            \item ［その論理的変形・大域化］$\forall A\subset X f^{-1}(f(A))=A$（雪江群論）．
            \item ［左一意性］$f$が定める同値関係$R_f$は相等関係と同値である．（関係が一致するとはグラフが一致することと定義した）．
            \item ［標準分解の言葉］$f$が定める写像$X\to f(X)$は可逆になる．
            \item ［左簡約可能：monic］$g\circ f=\id_X$を満たす写像$g:Y\to X$が存在する．または，$X=\emptyset$である．
            \item ［関手性］任意の$A_1,A_2\subset X$に対して，$f_*(A_1\cap A_2)=f_*(A_1)\cap f_*(A_2)$\ref{prop-image-preserve-unions}．
            \item ［像関手の左簡約可能性］任意の${A\subset X}$に対して，$f^{-1}(f(A))=A$\ref{prop-adjunction}．
        \end{enumerate}
    \end{theorem}
    \begin{theorem}[epi (AC)]\label{thm-epi}
        以下は全て写像$f:X\to Y$が全射であることの同値な定義である．
        \begin{enumerate}
            \item ［逆像の言葉］$\forall y\in Y f^{-1}(y)\ne\emptyset$．
            \item ［右全域性］$f(X)=Y$．
            \item ［標準分解の言葉］$f=\overline{f}\circ q$となる可逆写像$\overline{f}$が存在する．
            \item ［右簡約可能：epic］$f\circ g=\id_Y$を満たす写像$g:Y\to X$が存在する．
        \end{enumerate}
    \end{theorem}
\end{tbox}

\section{実数の位相}

\subsection{点列の収束}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    Dedekindの構成により，$P(\R)$上に$\inf,\sup:P(\R)\to\o{\R}$が定まる．
    ここから，まず点列の収束が定義できる．
    すると，距離空間の点列の収束も定義できたことになる！
\end{tcolorbox}

\begin{definition}
    数列$\{x_n\}\subset\R$が$a\in\R$に収束するとは，
    \[\inf_{m\ge0}\paren{\sup_{n\ge m}\abs{x_n-a}}=0\]
    を満たすことをいう．
    これを用いて，$\R^n$上の収束は，距離$d:\R^n\times\R^n\to\R_+$を用いて定義できる．
\end{definition}

\begin{proposition}[点列の収束の位相的特徴付け]\label{prop-characterization-of-convergence-in-metric-spaces}
    $(x_m)\in{}^{<\omega}\mathbb{R}^n, a\in\mathbb{R}^n$とする．次の３条件は同値である．
    \begin{enumerate}
        \item $\lim_{m\to\infty}x_m=a$．すなわち，$\lim_{m\to\infty}d(x_m,a)=0$．
        \item $\forall r\in\mathbb{R}_{>0}\;\exists l\in\mathbb{N}\;\forall m\in\mathbb{N}_{\ge n}\; d(x_m,a)<r$．
        \item $a$を元として含む任意の開集合$U\subset\mathbb{R}^n$について，$\{m\in\mathbb{N}\mid x_m\notin U\}$は有限集合である．
    \end{enumerate}
    条件3.を「十分大きな$n$について$x_m\in U (m\ge n)$である，ということがある．
\end{proposition}

\subsection{連続写像}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $\R$の位相が構成できたならば，任意の距離空間上において，次のような方法で写像の連続性が定義できる．
\end{tcolorbox}

\begin{definition}
    開集合$U\subset \R^n$について，
    \begin{enumerate}
        \item $f:U\setminus\{a\}\to\R^m$を写像とする．$b=\lim_{x\to a}f(x)$とは，次のことをいう：
        \[ \inf_{r>0}\left(\sup_{x\in U,\\0<d(x,a)<r}d(f(x),b)\right)=0. \]
        \item 写像$f:U\to\R^m$が$a\in U$で\textbf{連続}であるとは，$f(a)=\lim_{x\to a}f(x)$であることをいう．
        \item $f:U\to\R^m$が\textbf{連続写像}であるとは，全ての$x\in U$において$f$が連続であることをいう．
    \end{enumerate}
\end{definition}

\begin{proposition}\mbox{}
    \begin{enumerate}
        \item 加法$+:\R^2\to\R$と乗法$\cdot:\R^2\to\R$と逆元${}^{-1}:\R\setminus\{0\}\to\R$は連続である．
        \item 射影$\pr_i:\R^m\to\R\;(i\in[m])$は連続である．次の２条件は同値である．
        \begin{enumerate}[(1)]
            \item 写像$f:U\to\R^m$は$a$で連続である．
            \item $f_i:=\pr_i\circ f:U\to\R\;(i\in[m])$はそれぞれ$a$で連続である．
        \end{enumerate}
    \end{enumerate}
\end{proposition}

\begin{proposition}[連続写像の開集合による特徴付け]\label{prop-characterization-of-continuous-map-in-metric-spaces}
    $f:U\to\R^m$を開集合上の写像とする．
    \begin{enumerate}
        \item $a\in U$に対し，次の３条件は同値である．
        \begin{enumerate}[(1)]
            \item 写像$f:U\to\R^m$は$a$で連続である．
            \item $\forall q>0,\;\exists r>0,\; \forall x\in U,\; d(x,a)<r\Rightarrow d(f(x),d(a))<q$．
            \item $f(a)\in V$を満たす任意の開集合$V\subset\R^m$に対し，$a\in W\subset f^{-1}(V)$を満たす開集合$W\subset\R^n$が存在する．
        \end{enumerate}
        \item  次の２条件は同値である．
        \begin{enumerate}[(1)]
            \item $f:U\to\R^m$は連続である．
            \item 任意の開集合$V\subset\R^m$について，逆像$f^{-1}(V)\subset U$は$\R^n$の開集合である．
        \end{enumerate}
    \end{enumerate}
\end{proposition}

\begin{proposition}[連続写像の点列による特徴付け]
    $\R^n$-開集合上の写像$f:U\to\R^m$と$a\in U$に対し，次の２条件は同値．
    \begin{enumerate}
        \item $f:U\to\R^m$は$a$で連続である．
        \item $U$の点列$(x_k)$が$a$に収束するならば，$\R^m$の点列$(f(x_k))$は$f(a)$に収束する．
    \end{enumerate}
\end{proposition}

\subsection{付値}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    絶対値の概念を，ノルムに一般化するのではなく，一般の体に一般化する道もある．
\end{tcolorbox}

\begin{definition}[valuation]
    体$K$上の写像$v:K\to\R$が\textbf{付値}であるとは，次の3条件を満たすことをいう：
    \begin{enumerate}
        \item $v\ge0$かつ$v^{-1}(0)=\{0\}$．
        \item 積の分解：$\forall_{x,y\in K}\;v(xy)=v(x)v(y)$．
        \item 三角不等式：$\forall_{x,y\in K}\;v(x+y)\le v(x)+v(y)$．
    \end{enumerate}
    また，$v_p(x+y)\le\max\Brace{v_p(x),v_p(y)}$なる関係が成り立つ付値を\textbf{非Archimedes的付値}という．
\end{definition}

<<<<<<< HEAD
\begin{example}[$p$-adic valuation]
    $p$を素数とする．
    \begin{enumerate}
        \item $x\ne0$が整数のとき，$e\in\N$と$p$と互いに素な整数$r$を用いて$x=\pm p^er$と表せる．$e=:e_p(x)$を\textbf{$p$-指数}という．
        \item $x\ne0$が一般の有理数であるとき，$\exists_{r,s\in\Z\setminus\{0\}}\;x=r/s$．このとき，$e_p(x):=e_p(r)-e_p(s)$とおく．
        \item 最後に，$x\in\Q\setminus\{0\}$に対して，$v_p(x):=p^{-e_p(x)}$とする．
    \end{enumerate}
    このとき，$v_p(x+y)\le\max\Brace{v_p(x),v_p(y)}$が成り立ち，付値となる．
    これを\textbf{$p$進付値}という．
    $\Q$の絶対値による付値を\textbf{無限付値}または\textbf{Archimedes的付値}という．
\end{example}

\begin{theorem}[付値が定める距離空間]
    
\end{theorem}
=======
\subsection{上・下半連続性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    すでにFatouの補題のような消息が現れている．
\end{tcolorbox}

\begin{definition}[upper semicontinuous, right continuous]
    $X$を位相空間とする．
    \begin{enumerate}
        \item 実数値関数$f:X\to\R$が\textbf{上半連続}であるとは，$\R$の位相$\{(-\infty,t)\mid t\in\R\}\cup\{\R,\emptyset\}$について連続であることをいう．
        \item 実数上の関数$f:\R\to X$が\textbf{右連続}であるとは，$\Brace{[s,t)\mid s,t\in\R}$が生成する$\R$の位相について連続であることをいう．
    \end{enumerate}
\end{definition}
\begin{remark}
    上半連続性の定義は，$f^{-1}((-\infty,t))=\Brace{x\in X\mid f(x)<t}$が開であること．
    右連続性の定義は$\Brace{[s,t)\mid s,t\in\R}$は，$s$に右から近づく点列を収束と判定するためである．
\end{remark}

\begin{proposition}[特性関数の連続性]
    $A\subset X$について，
    \begin{enumerate}
        \item $A$が開であることと，$1_A$が下半連続であることとは同値．
        \item $A$が閉であることと，$1_A$が上半連続であることとは同値．
        \item $A$が開かつ閉であることと，$1_A$が連続であることとは同値．
    \end{enumerate}
    ただし，$2$には離散位相を入れた．
\end{proposition}

\begin{proposition}[上半連続性の特徴付け]
    関数$f:X\to\R$について，次の2条件は同値：
    \begin{enumerate}
        \item $f$は上半連続である．
        \item $\forall_{a\in X}\;\forall_{r>0}\;\exists_{U\in\O(a)}\;U\subset\Brace{x\in X\mid f(x)<f(a)+r}$．
        \item $X$の収束ネット$(x_\lambda)$について，$\limsup_\lambda f(x_\lambda)\le f(\lim x_\lambda)$．
    \end{enumerate}
    $X$は$C(X;[0,1])$によって分離されるとき（例えば正規空間のとき），次も同値：
    \begin{enumerate}\setcounter{enumi}{2}
        \item $f$はある連続関数の族の下限である．
    \end{enumerate}
\end{proposition}

\begin{proposition}[上半連続性の保存]
    $(f_i:X\to\R)_{i\in I}$は上半連続な関数の族とする．
    $f:X\to\R$が$f(x):=\inf_{i\in I}f_i(x)$によって定まるならば，$f$も上半連続である．
\end{proposition}

\subsection{下半連続関数の空間}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
    title=]
    $X$上の下半連続な関数全体の集合を$C^{1/2}(X)$とする．
    すると，frameの構造が受け継がれ，$\Op(X)$を関数空間として実現できる．
\end{tcolorbox}

\begin{proposition}\mbox{}
    \begin{enumerate}
        \item $\paren{C^{1/2}(X),\bigvee,\land}$はframeである．
        \item $C^{1/2}(X)$は和と積について閉じている．
        \item $C^{1/2}(X)$は一様収束位相について閉じている．
    \end{enumerate}
\end{proposition}
>>>>>>> bb958d977a3986d4a39a829ff1e363d7d84da837

\section{次元論}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    現代では殆ど廃れた問題意識であるが，コンパクト集合を考えるにあたって，開被覆がどれだけ自然な発想であるかがわかる．
\end{tcolorbox}

\begin{history}
    Cantorの1870年以降の論文で，初めて$\R^n$の任意の集合の位相が考えられた．
    そこで，内点，集積点，境界点，開・閉集合などのEuclid空間的な概念はすべてCantorが与えた．
    Cantor (1878)は線分から正方形への全単射を構成し，Peano (1890)はそれが連続に取れることがわかった．
    そこで，位相不変量としての次元の概念の精緻化が要請された．
    次の定義のような次元の概念が位相不変量であることを示すためにBrouwerが用いた手法は，代数的位相幾何学において主流となった．

    一方でFr\`{e}chetは，関数空間においても類似の位相的問題を考える仮定で，距離空間の概念を定義した(1905)．
    そしてその様子から，「近傍」なる概念の持つべき性質を４公理にまとめあげて「位相空間」（今日のHausdorff空間に当たる）と呼んだのはHausdorff (1914)である．
    こうして，位相幾何学の議論の対象は真に広がった．

    位相空間の公理は，Kuratowski (1933)が「閉包の公理」を提案し，Bourbakiが開集合族，またはフィルターによるものがある．
    
\end{history}

\begin{definition}[Poincar\`{e} 1912, Brouwer 1913, Lebesgue 1921]
    コンパクト部分集合$K\subset\R^n$の\textbf{次元}とは，
    次の条件を満たす自然数$m$のうち最小のものをいう：
    \begin{quote}
        任意の$\ep>0$に対して，$K$の各点が$m+1$回以上は覆われないような，直径が$\ep$を超えない開集合の族が取れる．
    \end{quote}
\end{definition}

\chapter{位相空間とその射}

\begin{quotation}
    また位相空間は普遍構成ができる．
\end{quotation}

\section{開集合系による定義}

\subsection{公理と特徴付け}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    開集合系による定義では，開集合の全体$\Op(X)$が持つ$P(X)$の部分代数としての性質に注目する．
    特に束の言葉を利用して，枠と呼ばれる．
\end{tcolorbox}

\begin{definition}[frame, filter]
    $\O\subset P(X)$が
    \begin{enumerate}
        \item \textbf{枠}であるとは，次の3条件を満たすことをいう：
        \begin{enumerate}[(a)]
            \item $\bigcup$について閉じている．
            \item $\cap$について閉じている．
            \item 2つが両立する：任意の族$\{Y_i\}_{i\in I}\subset\O$について，$X\cap\paren{\bigcup_{i\in I}Y_i}=\bigcup_{i\in I}X\cap Y_i$．
        \end{enumerate}
        \item \textbf{フィルター}であるとは，次の3条件を満たすことをいう：
        \begin{enumerate}[(a)]
            \item 非空：$X\in\O$．
            \item 上方閉：$\forall_{A\in\O}\;\forall_{B\in P(X)}\;A\le B\Rightarrow B\in\O$．
            \item 下方有向：$\forall_{A,B\in\O}\;\exists_{C\in\O}\;C\le A\land C\le B$．
        \end{enumerate}
    \end{enumerate}
\end{definition}

\begin{definition}[topology, topological space]
    集合$X$と次の条件を満たす$\Op(X)\subset P(X)$との組$(X,\Op(X))$を\textbf{位相空間}という：
    \begin{enumerate}
        \item $(U_i)_{i\in I}$が$\O$の元の族ならば，$\cup_{i\in I}U_i\in\O$．
        \item $(U_i)_{i\in I}$が$\O$の元の\textbf{有限}族ならば，$\cap_{i\in I}U_i\in\O$．
    \end{enumerate}
    $\O_X:=\Op(X),\O(x):=\Brace{U\in\O_X\mid x\in U}$と表す．
    (2)の有限条件を落としても成り立つとき，$\O$を\textbf{Alexandroff位相}という．
\end{definition}
\begin{remarks}
    $\Op(X)$や，$\O(x)\;(x\in X)$や，$X$のコンパクト集合の全体はフィルターをなす．
\end{remarks}

\begin{proposition}[開集合の公理の特徴付け]\label{prop-characterization-of-open-sets}
    $X$を集合とし，$\O\subset P(X)$を集合とする．
    \begin{enumerate}
        \item 次の条件は同値である．\begin{description}
            \item[(1)] $(U_i)_{i\in I}$が$\O$の元の族ならば，$\cup_{i\in I}U_i\in\O$．
            \item[(1')] $X$の部分集合$U$であって，次を満たすものは全て$\O$の元である：\[\forall x\in U,\; \exists V\in\O,\;x\in V\subset U.\]
        \end{description}
        \item 次の条件は同値である．\begin{description}
            \item[(2)] $(U_i)_{i\in I}$が$\O$の元の\textbf{有限}族ならば，$\cap_{i\in I}U_i\in\O$．
            \item[(2')] $X\in\O$である．かつ，$U,V\in\O\Rightarrow U\cap V\in\O$である．
        \end{description}
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(1')] (1')の論理式は，\textbf{$U$内部の開集合全体の集合$\U_U:=\{V\in\O\mid V\subset U\}$の和が$U$自身になる$\cup_{V\in\U_U}V=U$という条件}を表しており，(1')全体ではこれを満たすならば$U\in\O$という主張と同値である．従って，$\U_U$は$\O$の開集合の族だから，(1)$\Rightarrow$(1')．
        \item[(1')$\Rightarrow$(1)] $\O$の族$(U_i)_{i\in I}$を取る．$\cup_{i\in I}U_i=:U$と置くと，任意の元$x\in U$に対して$i\in I$が存在して$x\in U_i\subset U$が成り立つから，$U\in\O$．
        \item[(2)$\Rightarrow$(2')] $I=\emptyset$とすれば，$(U_i)_{i\in I}=X\in\O$．$I=2$とすれば，$U,V\in\O\Rightarrow U\cap V\in\O$．
        \item[(2')$\Rightarrow$(2)] $I$の濃度についての数学的帰納法より．
    \end{description}
\end{proof}

\subsection{射の性質}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    $f^*$は枠の射であるから，これによって位相を引き戻せる．
    一方で，終位相は$f_*(\O_X)$のような代数的な表現を必ずしも持たない．
    $f$が全単射であることが十分条件で，$f$が全射であることが必要条件である．
\end{tcolorbox}

\begin{proposition}[$f^*$は枠の射である]\label{prop-pullback-and-image-topology}
    $f:X\to Y$を写像とする．
    \begin{enumerate}
        \item $\O$が$Y$の位相ならば，引き戻し$f^*\O:=\{f^{-1}(U)\mid U\in\O\}=f^*(\O)$は$X$の位相になる．
        \item $\O$が$X$の位相ならば，像位相$\O':=\{V\in P(Y)\mid  f^{-1}(V)\in\O\}=(f^*)^{-1}(\O)$は$Y$の位相である．
    \end{enumerate}
\end{proposition}
\begin{proof}
    関手$f^*$が任意の$\cap,\cup$演算を保つこと
    （命題\ref{prop-functoriality-of-image-and-inverse-image-mappings}）により成り立つ性質である．
    \begin{enumerate}
        \item 「像空間」$f^*\O\subset P(X)$の任意の合併は，$\O\subset P(Y)$の族$(U_i)_{i\in I}\;(U_i\subset Y)$（これは再び$\O$の元）を用いて$\cup_{i\in I}f^{-1}(U_i)$と表せるから，\[\cup_{i\in I}f^{-1}(U_i)=f^{-1}(\cup_{i\in I}U_i)\in f^*\O.\]同様に，$|J|<\infty$として，\[\cap_{i\in J}f^{-1}(U_i)=f^{-1}(\cap_{i\in J}U_i)\in f^*\O.\]
        \item 「逆像空間」$\O'=f^{*-1}(\O)\subset P(Y)$の任意の合併$\cup_{i\in I}V_i$は，$V_i\in\O\subset P(X)$であって$\cup_{i\in I}f^{-1}(V_i)\in \O$従って$f^{-1}(\cup_{i\in I}V_i)\in\O$が成り立つから，$\cup_{i\in I}V_i\in\O'=f^{*-1}(\O)$が従う．有限共通部分についても同様だから，$\O'=f^{*-1}(\O)$は任意の合併と任意の有限共通部分について閉じている．
    \end{enumerate}
\end{proof}

\begin{definition}[initial topology, relative topology / subspace topology, final topology]
    $f:X\to Y$を写像とする．
    \begin{enumerate}
        \item $X$の位相$f^*\O_Y$を\textbf{$\O_Y$の$f$による引き戻し}または\textbf{始位相}という．
        \item 部分空間$A\subset X$上の，$X$の位相$\O_X$の包含写像$i:A\to X$による引き戻し$i^*\O_X$のことを，$A$の\textbf{相対位相}という．この時，$\O_A=i^*\O_X=\{U\cap A\mid U\in\O_X\}$となる．
        \item $Y$の位相$f^{*-1}(\O_X):=\Brace{V\in P(Y)\mid f^{-1}(V)\in\O_X}$を$f$による\textbf{像位相}または\textbf{終位相}という．
    \end{enumerate}
\end{definition}

\begin{lemma}[押し出しが像位相になるとき]
    $f:X\to Y$を写像とする．
    \begin{enumerate}
        \item $f$が全単射でない場合は，$f_*(\O_X)\subsetneq (f^*)^{-1}(\O_X)$となることも，$(f^*)^{-1}(\O_X)\supsetneq f_*(\O_X)$となることもある．
        \item 一般には$f^*\circ f_*=\id_{P(X)},f_*\circ f^*=\id_{P(Y)}$は成り立たない．
        \item $f$が全単射の時，$f^*$も全単射で，$(f^*)^{-1}=(f^{-1})^*=f_*$である．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $f_*(\O_X)\subsetneq (f^*)^{-1}(\O_X)$は$f$が全射でないときに起こる．$a\in Y\setminus f(X)$を取る．$U\in f_*(\O_X)$とすると，$U\cup\{a\}$は$(f^*)^{-1}(\O_X)$の元であるが，像にはなり得ないので$f_*(\O_X)$の元ではない．
        これを単純化すると次の例のようになる．$1:\S\to 2$を定値写像とする．$f_*(\Op(\S))=\Op(\S)$となるが，$(f^*)^{-1}(\S)=P(2)$となるので後者は離散位相を定める．

        一方，$(f^*)^{-1}(\O_X)\supsetneq f_*(\O_X)$は$f$が単射でないがために起こる．
        恒等写像$\id_2$と$2\mapsto 1$の和写像$3\to 2$は全射だが単射ではない．$3$の位相$\Op(3)=\{0,3,\{1\}\}$を考えると，$f_*(\Op(3))=\Op(\S)$となるが，$(f^*)^{-1}(\Op(3))=\{0,2\}$となり，後者は密着位相を定める．
        \item 1の例を引き合いに出せば，そこ$\O_X\in P(X)$において恒等性は崩れる．
        \item 命題\ref{prop-dual-of-mono}，\ref{prop-dual-of-epi}より．
    \end{enumerate}
\end{proof}
\begin{remarks}
    命題\ref{prop-functoriality-of-image-and-inverse-image-mappings}を見るとおり，一般の$f$について$A\subset f^{-1}(f(A)),f(f^{-1}(B))\subset B$が成り立つ．
    前者は非単射性から生じ，後者は非全射性から生じる．反例構成ではこれしか使っていない．
\end{remarks}

\begin{proposition}
    写像$f:X\to Y$と$X$の位相$\O$に対して，$f_*\O:=\{f(U)\in P(Y)\mid U\in\O\}$と定める．
    \begin{enumerate}
        \item $f$が全射でなければ，$f_*\O$は$Y$の位相になり得ない．
        \item $f:X\to Y$が全射であっても，$f_*\O$は$Y$の位相であるとは限らない．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $f$が全射でない限り$Y\in f_*\O$を満たさないので．
        \item 集合演算の$f(\cap_{i\in I}U_i)\subset \cap_{i\in I}f(U_i)$（命題\ref{prop-functoriality-of-image-and-inverse-image-mappings}）をhackする．$f:4\to 3$を，$\Op(4)=\{0,4,\{0,1\},\{2,3\}\}$とし，$f(0)=0,f(1)=f(2)=1,f(3)=2$とすると，$f_*(\Op(4))=\{0,3,\{0,1\},\{1,2\}\}$より，これは位相にはならない．
        この原理は，$f(\{0,1\}\cap\{2,3\})=f(\emptyset)=\emptyset\ne\{1\}=\{0,1\}\cap\{1,2\}=f(\{0,1\})\cap f(\{2,3\})$ということである．
    \end{enumerate}
\end{proof}

\subsection{位相の生成}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
    title=]
    位相の全体も有界束をなし，最大元が余離散位相$P(X)$，最小元が離散位相$\{\emptyset,X\}$となる．
    このうち，両端に位置する病的な位相を脱落させていくのが分離公理である．
\end{tcolorbox}

\begin{example}[trait / Sierpi\'{n}ski space, cofinite topology]\mbox{}
    \begin{enumerate}
        \item $\bS:=(2,\{\emptyset,\{1\},2\})$を\textbf{線}または\textbf{Sierpi\'{n}ski空間}という．
        \item $\O=\Brace{X\setminus S\in P(X)\mid \abs{S}<\infty}\cup\{\emptyset\}$を\textbf{余有限位相}という．$T_1$位相のうち最も粗いものとして特徴付けられる．
    \end{enumerate}
\end{example}

\begin{proposition}[位相の完備束]
    $(\tau_j)_{j\in J}$を$X$上の位相の族とする．
    包含関係$\subset$に関する上限$\lor\tau_j$と下限$\land\tau_j$が存在する．
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $\land\tau_j:=\Brace{A\in P(X)\mid \forall_{j\in J}\;A\in\tau_j}$と定めると，これは位相である．
        \item $T$を$X$上の位相であって任意の$\tau_j$より強いものとすると，$\CoDisc(X)\in T$より，$T\ne\emptyset$．これについて，$\lor\tau_j:=\land_{\tau\in T}\tau$と定めれば良い．
    \end{enumerate}
\end{proof}

\begin{proposition}[生成される位相の具体的構成]
    $\U\subset P(X)$とする．
    \[\O_\U:=\left\{U\in P(X)\;\middle|\;\begin{array}{l}x\in Uならば，\U の元の有限族(U_i)_{i\in n}で\\x\in\cap_{i\in n}U_i\subset Uを満たすものが存在する\end{array}\right\}.\]
    とすると，これは$\U\subset\O_\U$を満たす位相となり，$\U$を含む位相のうち最も小さい
\end{proposition}

\subsection{準基の性質}

\begin{proposition}
    $\U\subset\O$を準基とする：$\O_\U=\O$．
    このとき，任意の位相空間$(T,\O_T)$からの任意の写像$f:T\to X$について，次の2条件は同値．
    \begin{enumerate}
        \item $f$は連続．
        \item $f^*(\U)\subset\O_T$．
    \end{enumerate}
\end{proposition}

\begin{example}[実数の位相]\label{exp-subbasis-of-R}
    無限半開区間
    $\Brace{(-\infty,t)\mid t\in\R}\cup\Brace{(t,\infty)\mid t\in\R}$は$\R$の準基である．
\end{example}

\section{位相空間の射}

\subsection{連続写像の特徴付け}

\begin{proposition}
    $f:X\to Y$を写像とする．
    \begin{enumerate}
        \item 次の同値な2条件を満たすとき，$f$は連続であるという：
        \begin{enumerate}[(a)]
            \item $f^*(\O_Y)\subset\O_X$．
            \item $\O_Y\subset f_*(\O_X)$．
        \end{enumerate}
        \item 次の2条件は同値．
        \begin{enumerate}[(a)]
            \item $f$は連続．
            \item 任意の点$x\in X$に対して，$\forall_{V\in\O(f(x))}\;\exists_{U\in\O(x)}\;U\subset f^{-1}(V)$．
        \end{enumerate}
    \end{enumerate}
\end{proposition}

\begin{theorem}[圏論的特徴付け]
    写像$f:X\to Y$について，次の3条件は同値．
    \begin{enumerate}
        \item $f$は連続である．
        \item $\forall_{g\in C(Y;\bS)}\;g\circ f\in C(X;\bS)$．
        \item $\forall_{Z\in\Top}\;\forall_{g\in C(Y;Z)}\;g\circ f\in C(X;Z)$．
    \end{enumerate}
\end{theorem}

\begin{proposition}[閉集合と閉包による特徴付け]
    写像$f:X\to Y$について，次の3条件は同値．
    \begin{enumerate}
        \item $f$は連続である．
        \item 任意の閉集合$B\subset Y$に対して，$f^{-1}(B)$は閉．
        \item $\forall_{A\in P(X)}\;f(\o{A})\subset\o{f(A)}$．
    \end{enumerate}
\end{proposition}

\subsection{位相同型の特徴付け}

\begin{proposition}
    $f:X\to Y$を連続写像とする．次の4条件は同値．
    \begin{enumerate}
        \item $f$は位相同型である．
        \item $f$が全単射であり，位相を引き戻す：$f^*(\O_Y)=\O_X$．
        \item $f$は全単射な開写像である．
        \item 任意の$T\in\Top$について，$f_*:C(T;X)\to C(T;Y)$は全単射を定める．
    \end{enumerate}
\end{proposition}

\subsection{埋め込み}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    Topの切断を埋め込みという．
    単に連続な単射が，切断であるとは限らない．
\end{tcolorbox}

\begin{definition}[imbedding, retraction]
    $f:X\to Y$を連続写像とする．
    \begin{enumerate}
        \item $f$が単射かつ$\O_X=f^*(\O_Y)$を満たすとき，これを\textbf{埋め込み}という．このとき，$f:X\to f(X)$は位相同型である．
        \item $f$の左逆射$r\circ f=\id_X$を(連続な)\textbf{レトラクション}という．
    \end{enumerate}
\end{definition}

\begin{proposition}[埋め込みであることの十分条件]
    連続写像$f:X\to Y$について，
    \begin{enumerate}
        \item レトラクション$r:Y\to X$を持つならば，埋め込みである．
        \item 単射な開写像ならば，開な埋め込みである．
    \end{enumerate}
\end{proposition}

\section{同値な公理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
    title=]
    いずれの命題も，開集合の公理と同値になる．
\end{tcolorbox}

\subsection{閉包の定義}

\begin{definition}
    $X$を位相空間，$x\in X,A\subset X$とする．
    \begin{enumerate}
        \item $\{x\}\in\O(x)$のとき，\textbf{孤立点}という．
        \item $\forall_{U\in\O(x)}\;U\cap A\ne\emptyset$のとき，\textbf{触点}という．
        \item $A$の触点全体の集合を\textbf{閉包}$\o{A}$という．
        \item $\o{A}=X$のとき，\textbf{$X$上稠密}であるという．
    \end{enumerate}
\end{definition}

\begin{proposition}[開核，閉包，稠密性の特徴付け]
    $A\subset X$とする．
    \begin{enumerate}
        \item $A^\circ$は$A$に含まれる開集合のうち最大のものである．
        \item $\o{A}$は$A$を含む閉集合のうち最小のものである．
        \item $A$が$X$上稠密であることと，$\forall_{U\in\O_X}\;U\ne\emptyset\Rightarrow A\cap U\ne\emptyset$．
    \end{enumerate}
\end{proposition}

\subsection{基底の定義}

\begin{definition}
    $\U\subset\O_X$について，
    \begin{enumerate}
        \item $\U$が$\O$の\textbf{基底}であるとは，次を満たすことをいう：$\forall_{U\in\O_X}\;\forall_{x\in U}\;\exists_{V\in\U}\;x\in V\subset U$．
        \item $\U$が$\O(x)$の\textbf{基本系}であるとは，$\U\subset\O(x)$であって，次を満たすことをいう：$\forall_{U\in\O(x)}\;\exists_{V\subset\U}\;V\subset U$．
    \end{enumerate}
\end{definition}

\subsection{閉包の公理}

\begin{proposition}
    $A,B\subset X$とする．次の4条件が成り立つ：
    \begin{enumerate}
        \item $A\subset\o{A}$．
        \item $\o{\emptyset}=\emptyset$．
        \item 冪等：$\oo{A}=\o{A}$．
        \item $\o{A\cup B}=\o{A}\cup\o{B}$．
    \end{enumerate}
\end{proposition}

\subsection{近傍系の公理}

\begin{proposition}
    $x\in X$について，次の5条件が成り立つ．
    \begin{enumerate}
        \item $X\in\O(x)$．
        \item $\forall_{V\in\O(x)}\;\forall_{W\in P(X)}\;V\subset W\Rightarrow W\in\O(x)$．
        \item $\forall_{V,W\in\O(x)}\;V\cap W\in\O(x)$．
        \item $\forall_{V\in\O(x)}\;x\in V$．
        \item $\forall_{V\in\O(x)}\;\exists_{W\in\O(x)}\;\forall_{y\in W}\;V\in\O(y)$．
    \end{enumerate}
    前の3条件は，$\O(x)$がフィルターであることを主張している．
\end{proposition}

\subsection{基底の公理}

\begin{proposition}
    $\U\subset\O_X$を基底とする．次の2条件が成り立つ．
    \begin{enumerate}
        \item $\forall_{U,V\in\U}\;\forall_{x\in U\cap V}\;\exists_{W\in\U}\;x\in W\subset U\cap V$．
        \item $\forall_{x\in X}\;\exists_{U\in\U}\;x\in U$．
    \end{enumerate}
\end{proposition}

\section{積空間と始位相}

\section{商空間と像位相}

\section{ネット}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    点列の収束を，開近傍のフィルター$\O(x)$について，$\forall_{U\in\O(x)}\;x_n\in U\;\fe$と特徴付けられることに注目すると，
    一般の上に有向な集合からの写像について，収束の概念を定義できる．
\end{tcolorbox}

\subsection{ネットの収束}

\begin{definition}[direction, directed set, net / generalized sequences]
    $(D,\le)$を前順序集合とする．すなわち，$\le$は反射的で，推移的である．
    \begin{enumerate}
        \item 前順序$\le$が任意の2元について上界を持つとき，\textbf{方向}であるという．
        \item 組$(D,\le)$を\textbf{有向集合}という．
        \item 有向集合$D$からの写像$i:D\to X$を\textbf{$X$上のネット}または\textbf{有向系}という．ネットも$(x_n)_{n\in D}$と表し，$x_n=i(n)$とする．
    \end{enumerate}
\end{definition}

\begin{definition}[eventuality filter / cofinitely often]
        $\nu:D\to X$を集合$X$上のネットとする．\textbf{ネット$\nu$が定めるフィルター}$F_\nu$とは，
        \[F_\nu:=\Brace{A\in P(X)\mid \exists_{i\in D}\;\forall_{j\ge i}\;\nu_j\in A}\]
        のことである．この条件を$\nu$は$A$に\textbf{終局}するという．
        $D=\N$のとき，$\nu\in A\;\fe$と同値．
\end{definition}

\begin{definition}[convergence of net, limit point, cluster / accumulation point, universal]
    $X$を位相空間，$F$を$S$上のフィルターとする．
    \begin{enumerate}
        \item ネット$n:D\to X$が$x\in X$に\textbf{収束}するとは，任意の$x$の開近傍（従って近傍）$A\in\O(x)$に，$n$が終局する$A\in F_n$ことをいう．このとき，$x$を\textbf{極限点}という．$X$がHausdorffのとき，一意に定まる．
        \item ネット$n:D\to X$が$x\in X$に\textbf{集積}するとは，任意の$x$の開近傍（従って近傍）$A\in\O(x)$に，$n$が無限回入ることをいう：$\forall_{i\in D}\;\exists_{j\ge i}\;n_j\in A$．このとき，$x$を集積点という．実は，任意の集積点は必ず部分ネットの極限点になる．
        \footnote{これは英語でclusterと\url{https://ncatlab.org/nlab/show/filter}に乗っているが，filterについてはclusterとaccumulateは同じ定義になるのだろうか？}
        \item ネット$n:D\to X$が\textbf{普遍的}であるとは，任意の集積点が極限点であることをいう．同値だが，任意の$Y\in P(X)$について，$Y\in F_\nu\lor X\setminus Y\in F_\nu$が成り立つ．
    \end{enumerate}
\end{definition}

\subsection{部分ネット}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    ネットについては，任意の空間のコンパクト集合が「ネットコンパクト」になる．
\end{tcolorbox}

\begin{definition}[Kelley 1955]\label{def-subnet-Kelley}
    $(y_\beta)_{\beta\in B}$が$(x_\al)_{\al\in A}$の部分ネットであるとは，次の２条件を満たす写像$f:B\to A$が存在することをいう：
    \begin{enumerate}
        \item $\forall_{\beta\in B}\;x_{f(\beta)}=y_\beta$．
        \item strongly cofinal：$\forall_{\alpha\in A}\;\exists_{\beta\in B}\;\forall_{\beta_1\ge\beta}\;f(\beta_1)\ge\alpha$．
    \end{enumerate}
\end{definition}

\begin{remark}
    WillardもKelley \ref{def-subnet-Kelley}も，（ネット$n:D\to X$同様）$f$に単射性を要求していない点に注意．したがって，$A=\N$としても，通常の部分列の定義よりは一般的である．
\end{remark}

\begin{lemma}[集積点の特徴付け]
    $\B\subset P(X)$は任意合併について閉じているとする．ネット$(x_\lambda)_{\lambda\in\Lambda}$について，次の２条件は同値．
    \begin{enumerate}
        \item 任意の$B\in\B$に集積する．
        \item 部分ネット$(x_{h(\mu)})_{\mu\in M}$が存在して，任意の$B\in\B$に終局する．
    \end{enumerate}
\end{lemma}

\begin{corollary}
    位相空間$X$上のネットの任意の集積点$x$について，ある部分ネットが存在して$x$に終局する．
\end{corollary}

\begin{theorem}[existence of universal nets (AC)]
    任意のネットは，部分ネットとして普遍ネットを持つ．
\end{theorem}

\begin{proposition}[(AC)]
    任意の位相空間$Y\subset X$と点$x\in X$について，次の２条件は同値．
    \begin{enumerate}
        \item $x\in\o{Y}$．
        \item $x$に収束する$Y$のネットが存在する．
    \end{enumerate}
\end{proposition}



\chapter{距離空間}

\begin{quotation}
    抽象位相空間論を展開したが，元々位相空間論の端緒は，Fr\`{e}chetが距離空間の概念を定義してCantorの概念を一般化したことに始まる．
    その際のモチベーションは関数空間であった．
    そこで，関数空間の例を意識しながら，距離空間の扱い方を考える．
    \begin{enumerate}
        \item 距離空間のコンパクト性は，点列コンパクト性によって特徴付けられ，そのときに完備性の概念が見つかる．
        \item 可分位相空間の距離化可能性は，第２可算性と正規性によって特徴付けられる．このときに，可算性・可分性が問題になるのである．
    \end{enumerate}
\end{quotation}

\section{写像の極限}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    極限とは連続延長可能性である．
    これによって，コンパクト性が特徴付けることができる．
    ネットはその特別で理解しやすい例であり，また距離空間におけるコンパクト性は点列で十分である．
\end{tcolorbox}

\subsection{集積点の定義}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    任意の集積点は触点である．
    集積点は，触点の中でも特に，近傍によって$A$の他の点と分離不可能な点をいう．
\end{tcolorbox}

\begin{definition}[accumulation point]\label{def-accumulation-point}
    $X$を位相空間とし，$A\subset X,x\in X$とする．
    \begin{enumerate}
        \item $x$が$A$の\textbf{集積点}であるとは，$x$が$A\cup\{x\}$の孤立点でないことをいう：$\forall_{U\in\O(x)}\;(U\setminus x)\cap S\ne\emptyset$．$x\in X\setminus A$のとき，$x$が境界点であることに同値．
        \item 写像$f:A\to Y$の延長$\o{f}:A\cup\{a\}\to Y$が$a$で連続であるとき，$f(a)$を\textbf{極限}であるといい，$f(a)=\lim_{x\to a}f(x)$と表す．
    \end{enumerate}
\end{definition}
\begin{remarks}[触点との違い]
    $A$の触点の集合$\o{A}$は，$A$と$A$の集積点との合併になる．
    そして，性質$x\in\o{A\setminus\{x\}}$は$x$が集積点であることを特徴づける．
\end{remarks}
\begin{remark}[まさかこんな捉え方があるとは]\mbox{}
    \begin{enumerate}
        \item 集積点は「その点の任意の近傍が$A$と共通部分を持ってしまう」という意味で，
        「$A$上の点で任意精度で近似可能」な点である．\textbf{$A$とは近傍によっては分離不可能な点}である．
        これは開閉の概念以前に定義可能な概念であり，また極限の概念の一般化でもあり，
        $x\in X\setminus A$の時は，$x$が$A$の集積点であることと$x\in\overline{A}\setminus A$であることとは同値である．
        これによって，閉集合を集積点の言葉によって特徴付けることができる．
        $A$の内点が集積点であるかどうかはまた別の議論である．境界点の方が収束の議論がしやすいのは不思議である．
        \item 極限とは，\textbf{連続性を保った延長}と定義できる．Topでの順極限ということか？
    \end{enumerate}
\end{remark}

\begin{lemma}[集積点の特徴付け]\mbox{}
    \begin{enumerate}
        \item $x$は$A$の集積点である（$x\in X$が部分空間$A\cup\{x\}$の孤立点ではない）．
        \item $x$の任意の開近傍$U(x)$について，$U(x)\cap A\ne\emptyset$．
        \item $x\in\overline{A\setminus\{x\}}$．
    \end{enumerate}
\end{lemma}

\subsection{極限の一意性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    点列だけでなく，一般の写像の極限に関して，Hausdorff空間上では一意になる．
\end{tcolorbox}

\begin{proposition}[Hausdorff空間では極限は一意的]\label{prop-uniqueness-of-limit-in-Hausdorff-space}
    $X,Y$を位相空間とし，$A$を$X$の部分集合，$a\in X\setminus A$を$A$の集積点とする．
    \begin{enumerate}
        \item (収束の特徴付け) 写像$f:A\to Y$と$b\in Y$に対し，次の２条件は同値．
        \begin{enumerate}[(1)]
            \item $x\in A$が$a$に近づく時，$f(x)$は$b$に収束する．
            \item $b$の任意の開近傍$V$に対し，$a\in X$の開近傍$U$で，$f(U\cap A)\subset V$を満たすものが存在する．
        \end{enumerate}
        \item $Y$をハウスドルフ空間とし，$f:A\to Y$を写像とする．$x\in A$が$a$に限りなく近づく時$f(x)$が$b,c\in Y$の両方に収束するならば，$b=c$．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $f$の延長$\widetilde{f}:\widetilde{A}:=A\sqcup\{a\}\to Y$を$\widetilde{f}(a)=b$で定めると，(1)は，$\widetilde{f}$が$a\in\widetilde{A}$にて連続であることと同値だから，任意の$b$の開近傍$V$に対して，$a\in\widetilde{A}$の開近傍$U$であって
        \[U\subset\widetilde{f}^{-1}(V)\Leftrightarrow \widetilde{f}(U)\subset V\]
        を満たすものが存在するということと同値である．
        これは，写像$f$が$f(U\setminus\{a\})\subset V$であることに同値．
        \item 
        写像を$\widetilde{f}(a)=b$としても，$\widetilde{f}(a)=c$としても$x=a\in\widetilde{A}$にて連続であるということである．
        この下で$b\ne c$と仮定して矛盾を導く．
        $Y$はHausdorffだから，$V\cap W=\emptyset$を満たす$b,c$の開近傍$V,W$が存在する．
        すると，1より，$f(U\cap A)\subset V$かつ$f(U\cap A)\subset W$を満たす$a$の開近傍$U$が存在する．
        このとき，$f(U\cap A)\subset V\cap W=\emptyset$より，$U\cap A=\emptyset$である．
        $U$は$a$の開近傍であったから，この条件を満たす$U$が存在することは，$a$が$A$の集積点であることに矛盾する．
    \end{enumerate}
\end{proof}

\subsection{超フィルターによるコンパクト性の特徴付け}

\begin{theorem}
    $\F\subset P(X)$が\textbf{超フィルター}であるとは，次の同値な条件を満たすもののことをいう：
    \begin{enumerate}
        \item 真のフィルターのうち，極大なものである．
        \item 真のフィルターであって，次を満たす：$\forall_{B\in\F}\;A\cap B\ne\emptyset\Rightarrow A\in\F$．
        \item $A\in\F\Leftrightarrow\forall_{B_1,\cdots,B_n\in\F}\;A\cap B_1\cap\cdots\cap B_n\ne\emptyset$．
    \end{enumerate}
\end{theorem}

\begin{notation}
    集合$A$に対して$\widetilde{A}:=A\sqcup\{\infty\}$とし，
    \[ S_A:=\left\{\O\in P(P(\widetilde{A}))\;\middle|\; \begin{array}{l}
        \O は\widetilde{A}の位相であり，\\\infty はAの集積点である
    \end{array}\right\} \]
    と置く．$\infty$が$A$の集積点であるとは，$A$が$\widetilde{A}$で稠密であることと同値．
\end{notation}

\begin{lemma}
    $S_A$は包含関係に関して帰納的半順序集合である．
\end{lemma}

\begin{proposition}[$S_A$を使った位相空間のコンパクト性の判定]\label{prop-characterization-compact-space-in-terms-of-filters}
    位相空間$X$について，次の３条件は同値である．
    \begin{enumerate}
        \item $X$はコンパクト空間である．
        \item $A$を任意の集合とし，$\O$を$S_A$の任意の元とする．$\widetilde{A}$を$\O$によって位相空間と考え，$A$をその部分空間と考える．任意の写像$f:A\to X$に対し，$f$のグラフ$\Gamma_f=\{(a,f(a))\mid a\in A\}$の積位相に関する閉包$\overline{\Gamma_f}\subset\widetilde{A}\times X$と$\{\infty\}\times X$の共通部分は空ではない．
        \item $A$を任意の集合とし，$\O$を$S_A$の任意の極大元とする．$\widetilde{A}$を$\O$によって位相空間と考える．任意の写像$f:A\to X$に対し，$f$の延長である連続写像$g:\widetilde{A}\to X$が存在する．（即ち，$f(a)$の$a\to\infty$の極限が存在する）
    \end{enumerate}
\end{proposition}

\subsection{Tychonoffの定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white, breakable ,colbacktitle=ForestGreen!40!white, coltitle=black,fonttitle=\bfseries\sffamily
    ,title=Tychonoffの定理]
    Alexandroffのコンパクト化のように，filterの言葉をハードに使う．
    20世紀の香りがする．
    こうして，選択公理とZornの補題と同値な命題を，Topの中にも翻訳できたことになる．
\end{tcolorbox}

\begin{remark}
    Tychonoffの定理（定理\ref{thm-Tychonoff}）の証明には選択公理とZornの補題を使うが，選択公理はTychonoffの定理から導ける．この３つは同値な命題である．
\end{remark}

\begin{theorem}[Tychonoff]
    $(X_i)_{i\in I}$をコンパクト空間の族とする．この時，積空間$\prod_{i\in I}X_i$はコンパクトである．
\end{theorem}

\section{点列の収束によるコンパクト距離空間の特徴付け}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=完備性の発見]
    写像$\N\to X$が収束することは，ネットとして収束すること（任意の開近傍に終局すること）に同値．
    これにより，写像の連続性から，閉包・コンパクト性を調べることができる．
    このとき，距離空間において，完備性という点列に関する性質が見つかる．
\end{tcolorbox}

\subsection{収束の特徴付け}

\begin{definition}
    位相空間$X$の点列$(x_n)$が$a\in X$に収束するとは，$\forall_{U\in\O(a)}\;x_n\in U\;\fe$が成り立つことをいう．
\end{definition}

\begin{proposition}[収束の特徴付け]\label{prop-characterization-of-convergence-in-terms-of-continuousness}
    $X$を位相空間とし，$(x_n)$を$X$の点列，$a\in X$とする．
    \begin{enumerate}
        \item $\widetilde{\N}=\N\coprod\{\infty\}$を離散空間$\N$の一点コンパクト化とする．写像$\tilde{x}:\widetilde{\N}\to X$を\[\tilde{x}(n)=\begin{cases}
            x_n,&n\in\N,\\a,&n=\infty,
        \end{cases}\]と定める．次の２条件は同値．
        \begin{enumerate}[(1)]
            \item 点列$(x_n)$は$a$に収束する．
            \item 写像$\tilde{x}:\widetilde{\N}\to X$は連続．
        \end{enumerate}
        \item $X$が距離空間ならば，次の条件とも同値である．
        \begin{enumerate}[(1)]\setcounter{enumii}{2}
            \item $\lim_{n\to\infty}d(x_n,a)=0$である．
        \end{enumerate}
        \item $X$が距離空間であるとする．$(x_n)$が収束するならば，$(x_n)$は有界である．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 各$n\in\N\widetilde{\N}$は孤立点だから，$\tilde{x}|_{\N}$は連続．従って，(2)は$\tilde{x}$が$\tilde{x}(\infty)=a$にて連続であることに同値．
        いま，一般に$X$の部分集合$a\in U$に対し，$\infty\in V\subset\tilde{x}^{-1}(U)$を満たす$\infty$の開近傍$V\subset\widetilde{\N}$即ち余有限集合$V$が存在するとは，$\tilde{x}^{-1}(U)\subset\widetilde{\N}$自体も余有限であることに同値．これは(1)の定義である．
        \item 命題\ref{prop-characterization-of-convergence-in-metric-spaces}と同様．
        \item $(x_n)$が収束するならば，これが定める写像$\tilde{x}:\widetilde{\N}\to X$は連続である．よって，像$\tilde{x}(\widetilde{\N})$はコンパクトである．距離空間のコンパクト集合は有界である（系\ref{cor-compact-sets-in-metric-space-is-bounded}）．従ってその部分集合$\{x_n\}_{n\in\N}\subset\tilde{x}(\widetilde{\N})$も有界である．
    \end{enumerate}
\end{proof}

\subsection{写像の連続性の特徴付け}

\begin{corollary}[連続性の極限の言葉による特徴付け]\label{cor-characterization-of-continuousness-in-terms-of-limits}
    $X,Y$を位相空間とし，$f:X\to Y$を写像とする．
    \begin{enumerate}
        \item $f$が$a\in X$で連続ならば，$X$の任意の$a$に収束する点列に対して，$(f(x_n))$は$f(a)\in Y$に収束する．
        \item $X$が距離空間であるとき，逆も成り立つ．
    \end{enumerate}
\end{corollary}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 点列$(x_n)$が収束するので，点列$(x_n)$の定める写像$\tilde{x}:\widetilde{N}\to X$は連続である．従って，合成$f\circ\tilde{x}:\w{\N}\to Y$も連続であるから，特に$\infty$でも連続．よって，点列$(f(x_n))$は$f(a)\in Y$に収束する．
        \item 点列$x:\N\to X$の，$\w{\N}$への延長は，$\N$は$\w{\N}$の稠密な部分集合だから，$X$がHausdorffであるとき一意的である（系\ref{cor-Hausdorff空間への連続写像は，稠密な部分集合への制限で一意的に定まる}）．
    \end{enumerate}
\end{proof}

\subsection{閉包の点列による特徴付け}

\begin{corollary}[点列による閉包の特徴付け]\label{cor-characterization-of-closure-in-terms-of-limits}
    $X$を位相空間とし，$A$を$X$の部分集合とする．
    \[ B=\{a\in X\mid aに収束するAの点列(x_n)が存在する\} \]
    と定める．
    \begin{enumerate}
        \item $\overline{A}\supset B$．
        \item (AC) $X$が距離空間ならば，$\overline{A}=B$．
    \end{enumerate}
\end{corollary}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item $A$の点列$(x_n)$が存在して$a\in X$に収束するならば，$a\in\overline{A}$であることを示せば良い．
        収束列$(x_n)$が定める連続写像$\tilde{x}:\w{\N}\to X$は，命題\ref{prop-continuous-map-and-closure}(3)より，$\tilde{x}(\w{\N})\subset\o{A}$を満たすので，$\x(\infty)=a\in\o{A}$を満たす．
        \item 
        $\o{A}\subset B$を示す．$a\in\o{A}$を任意にとり，これに収束する$X$の点列を構成すれば良い．
        いま，$a\in\o{A}$より，$a$の任意の近傍は$A$と共通部分を持つ（定義\ref{def-closure}）．
        特に，任意の$n\ge 1$に対して，$U_{\frac{1}{n}}(a)\cap A\ne\emptyset$である．
        従って，選択公理を認めれば，点列$(x_n)\in\prod_{n\ge 1}(U_{\frac{1}{n}}(a)\cap A)$が取れる．
        これについて，$\lim_{n\to\infty}d(x,a)=0$より，$a=\lim_{n\to\infty}x_n\in B$である（定義\ref{def-convergence}）．
    \end{enumerate}
\end{proof}

\subsection{コンパクト距離空間の点列による特徴付け}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    点列コンパクトと同値であることを示すには，完備性の概念が効いてくる．
\end{tcolorbox}

\begin{lemma}[部分列が収束することの特徴付け]\label{lemma-部分列が収束することの特徴付け}
    $X$を距離空間とする．$X$の点列$(x_n)$と$X$の点$a$について，次の３条件は同値である．
    \begin{enumerate}
        \item $(x_n)$の部分列$(x_{n_m})$で，$a$に収束するものが存在する．
        \item $A=\{(x_n,n)\mid n\in\N\}\subset X\times\widetilde{\N}$とし，$\overline{A}$を積位相に関する閉包とすると，$(a,\infty)\in\overline{A}$である．
        \item 任意の自然数$m$に対し，$\inf_{n\ge m}d(x_n,a)=0$である．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] 
        部分列$(x_{m_n})$が$a$に収束するならば，$\w{\N}$の点列である$(m_n)_{n\in\N}$は$\infty$に収束するから，
        $A$の点列$(x_{m_n},m_n)$は$(a,\infty)\in X\times\w{\N}$に収束する．
        連続写像$\w{\N}\to X$と$\w{\N}\to\w{\N}$との積も連続であるためである．
        よって，系\ref{cor-characterization-of-closure-in-terms-of-limits}より，$(a,\infty)\in\o{A}$である．
        \item[(2)$\Rightarrow$(3)]
        $(a,\infty)\in\o{A}$とする．任意の自然数$m$に対して，$\inf_{n\ge m}d(x_n,a)=0$を示す．
        任意の実数$r>0$に対して，$(0\le)\inf_{n\ge m}d(x_n,a)<r$を導く．
        いま，任意の実数$r>0$に対して，それぞれは$a\in X,\infty\in\w{\N}$の開近傍なので，$U_r(a)\times\w{\N}_{\ge m}$は$(a,\infty)\in X\times\w{\N}$の開近傍である（積位相の基底\ref{prop-characterization-product-topology}）．
        よって，$(a,\infty)\in\o{A}$は閉包の点なので，$A\cap(U_r(a)\times\w{\N}_{\ge m})=\{(x_n,n)\mid d(x_n,a)<r,n\ge m\}$は空でない．
        従って，$d(x_n,a)<r$を満たす自然数$n\ge m$が存在して，$\inf_{n\ge m}d(x_n,a)<r$を満たす．
        \item[(3)$\Rightarrow$(1)]
        次のように帰納的に構成した部分列$(x_{m_n})$は，$\lim_{n\to\infty}d(x_{m_n},a)=0$より，$a$に収束する．
        \begin{enumerate}
            \item $m_0:=0$．
            \item $n\ge 1$について，$\inf_{m\ge m_{n-1}+1}d(x_m,a)=0$が成り立つから，特に$d(x_m,a)<\frac{1}{n}$を満たす自然数$m>m_{n-1}$が存在する．そのような$m$のうち最小のものを$m_n:=m$とする．
        \end{enumerate}
    \end{description}
\end{proof}

\begin{proposition}[コンパクト距離空間は点列コンパクトである]\mbox{}\label{prop-Bolzano-Weierstrass}
    \begin{enumerate}
        \item $X$がコンパクト距離空間ならば，$X$は点列コンパクトである．
        \item (Bolzano-Weierstrass) $(x_n)$を$\R^m$の有界な点列とすると，収束する部分列$(x_{m_n})$が存在する．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 任意に$X$の点列$(x_n)$をとり，この収束する部分列が存在することを示せば良い．
        $A:=\{(x_n,n)\mid n\in\N\}\subset X\times\w{\N}$の閉包を$\o{A}$とし，$\exists a\in X,\;(a,\infty)\in\o{A}$を示せれば，補題\ref{lemma-部分列が収束することの特徴付け}より収束する部分列が存在する．
        いま，$X$はcompactだから，特徴付け\ref{prop-characterization-of-compactness-in-terms-of-projection}より，射影$\pr_2;X\times\w{\N}\to\w{\N}$は閉写像である．
        よって，$\pr_2(\o{A})\subset\w{\N}=\o{\pr_2(A)}$（命題\ref{prop-continuous-map-and-closure}）は，$\N\subset\pr_2(A)\subset\pr_2(\o{A})$を満たす閉集合だから，$\pr_2(\o{A})=\w{\N}$である．即ち，$\exists a\in X,\;(a,\infty)\in\o{A}$．
        \item 
        $(x_n)$が$\R^m$の有界な点列ならば，実数$M>0$であって，$\{x_n\}\subset[-M,M]^m$を満たすものが存在する．命題\ref{prop-compact-sets-in-R^n}より，有界閉集合$[-M,M]^m$はコンパクトだから，1.より，$(x_n)$には収束する部分列が存在する．
    \end{enumerate}
\end{proof}

\begin{theorem}[AC]\label{thm-characterization-of-compact-metric-space}
    距離空間$X$について，次の３条件は同値である．
    \begin{enumerate}
        \item $X$はコンパクト．
        \item $X$は点列コンパクト．
        \item $X$は完備かつ全有界．
    \end{enumerate}
\end{theorem}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] 
        命題\ref{prop-Bolzano-Weierstrass}.1．
        \item[(2)$\Rightarrow$(3),AC] \mbox{}\\
        \begin{description}
            \item[完備性について] 
            Cauchy列$(x_n)$を任意に取る．$X$は点列コンパクトなので，収束する部分列$(x_{m_n})$が存在する．補題\ref{lemma-Cauchy-sequence}より，Cauchy列$(x_n)$は部分列の収束先$\lim_{n\to\infty}x_{m_n}$に収束する．
            \item[全有界性について] 
            対偶命題：$X$が全有界でないならば，点列コンパクトでないことを示す．即ち，実数$r>0$であって，任意の有限部分集合$A\subset X$に対して，$X\supsetneq\cup_{a\in A}U_r(a)$が成り立つものが存在すると仮定する．
            これに対して次のように$X$の点列$(x_n)$を帰納的に定める：
            \begin{enumerate}
                \item $x_0\in X\ne\emptyset$を任意に取る．
                \item $x_0,\cdots,x_n\in X$に対して，$x_{n+1}\in X\setminus(U_r(x_0)\cup\cdots\cup U_r(x_n))\ne\emptyset$と取る．
            \end{enumerate}
        すると，この点列は$d(x_m,x_n)\ge r\;(0\le m<n)$を満たすので，収束する部分列を持たない．
        \end{description}
        \item[(3)$\Rightarrow$(1),AC] $X$を全有界かつ完備とし，ここからコンパクト性を示す．
        \begin{description}
            \item[コンパクト空間$A$の構成] 
            $X$は全有界で$\frac{1}{2^n}>0\;(n\in\N)$だから，任意の$n\in\N$に対して，$\forall x\in X\;\exists a\in A_n,\; d(x,a)<\frac{1}{2^n}$を満たす離散有限集合$A_n$が存在する（$X=\cup_{a\in A_n}U_{\frac{1}{2^n}}(a)$を満たす$A_n$が存在するため）．
            選択公理より，これらからなる，$X$の離散有限集合の列$(A_n)$が取れる．
            これらの無限積空間$A:=\prod_{n\in\N}A_n$はTychonoffの定理\ref{thm-Tychonoff}より，compactである．
            \item[コンパクト部分空間$C$の構成]
            $A$の部分空間$C$を
            \[C:=\left\{(a_n)\in A\;\middle|\;\forall n\in\N,\;d(a_n,a_{n+1})\le\frac{3}{2^{n+1}}\right\}\]
            で定める．するとこの$C$は
            \[C=\bigcap_{n\in\N}\left\{(a_m)\in A\;\middle|\;\forall n\in\N,\;d(a_n,a_{n+1})\le\frac{3}{2^{n+1}}\right\}=\bigcap_{n\in\N}(\pr_n\times\pr_{n+1})^{-1}\paren{\left[0,\frac{3}{2^{n+1}}\right]}\]
            をみたし，任意の$n\in\N$について射影の積$\pr_n\times\pr_{n+1}:A\to A_n\times A_{n+1}$は連続だから，$C$はコンパクト空間$A$の閉部分空間である．
            従って$C$もコンパクトである（系\ref{cor-union-intersection-of-compact-sets-is-compact}）．
            \item[全射$l:C\to X$の構成]
            $(a_n)\in C$は
            \begin{align*}
                \forall n\le m\qquad d(a_n,a_m)&\le d(a_n,a_{n+1})+\cdots+d(a_{m-1},a_m)\\
                &\le \frac{3}{2^{n+1}}+\cdots+\frac{3}{2^m}\le\frac{3}{2^n}
            \end{align*}
            より，$X$のCauchy列である．$X$は完備だから，極限$\lim_{n\to\infty}a_n\in X$が存在し，写像
            \[\xymatrix@R-2pc{
                l:C\ar[r]&X\\
                \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
                (a_n)\ar@{|->}[r]&\lim_{n\to\infty}a_n
            }\]
            が定まる．この$l$が全射であることを示す．

            任意の$x\in X$に対して，$l^{-1}(x)$の元を構成する．
            点列$a=(a_n)\in A$であって，$d(a_n,x)<\frac{1}{2^n}\;(n\in\N)$を満たすものが存在するように，空間$A$を定義したのであった．選択公理より，このような$a\in A$が取れる．
            ここでこの点列は，
            \[\forall n\in\N,\quad d(a_n,a_{n+1})\le d(a_n,x)+d(a_{n+1},x)<\frac{1}{2^n}+\frac{1}{2^{n+1}}=\frac{3}{2^{n+1}}\]
            を満たすから，$a\in C$でもある．この点列は$\lim_{n\to\infty}a_n=x$より，$l(a)=x$を満たす．
            \item[$l$は連続である]
            任意に点$a=(a_n)\in C$を取り，任意の$r>0$について，逆像$l^{-1}(U_r(l(a)))$に含まれる$a\in C$の開近傍の基本系の元（即ち基底）を構成すれば良い（命題\ref{prop-continuousness-in-terms-of-basis}）．\footnote{$l$の終域の基底は開球で，始域の基底は}

            任意の$n\in\N$について$d(a_n,l(a))\le\frac{3}{2^n}$である．
            よって任意の実数$r>0$に対して，$m$を$\frac{6}{2^n}<r$を満たす最小の自然数$n$とすれば，
            $a=(a_n),b=(b_n)\in C$が$a_m=b_m$をみたすならば，$d(l(a),l(b))\le d(a_m,l(a))+d(b_m,l(b))\le\frac{6}{2^m}<r$である．
            従って，$\pr^{-1}_m(\pr_m(a))\subset l^{-1}(U_r(l(a)))$である．
            よって，全射$l:C\to X$は連続である．\footnote{???}
            $C$はコンパクトだから，\ref{cor-image-of-compact-set-is-compact}より，$X$もコンパクトである．
        \end{description}
    \end{description}
\end{proof}

\section{完備距離空間}

\subsection{閉集合との関係}

\begin{proposition}[距離空間内の閉集合]\label{prop-complete-sets-in-metric-space}
    $X$を距離空間，$A$を部分空間とする．次の２条件を考える．
    \begin{enumerate}
        \item $A$は完備．
        \item $A$は$X$の閉集合．
    \end{enumerate}
    1$\Rightarrow$2である．$X$が完備ならば逆も成り立つ．
\end{proposition}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2),AC] $A\supset\o{A}$を示せば良い．任意に$a\in\o{A}$を取る．系\ref{cor-characterization-of-closure-in-terms-of-limits}.2(AC)より，
        $a$に収束する$A$の点列$(x_n)$が存在する．収束する列$(x_n)$はCauchy列で（補題\ref{lemma-Cauchy-sequence}.1），$A$は完備だから，$(x_n)$は収束する．系\ref{cor-characterization-of-closure-in-terms-of-limits}.2より，それは$a$で，よって$a\in A$．
        \item[(2)$\Rightarrow$(1)]
        $(x_n)$を$A$のCauchy列とし，これが収束することを示せば良い．$X$が完備ならば，極限を持つ：$\lim_{n\to\infty}x_n=:a\in X$．系\ref{cor-characterization-of-closure-in-terms-of-limits}より，$a\in\o{A}=A$．従って，$A$は完備．
    \end{description}
\end{proof}

\subsection{完備化}

\begin{definition}[completion]
    $X$を距離空間，$Y$を完備距離空間とする．
    $f:X\to Y$が等長写像であり，像$f(X)$が$Y$で稠密である時，$Y$は$f$に関して$X$の\textbf{完備化}であるという．
\end{definition}

\begin{proposition}
    $X$を距離空間とする．$x\in X$に対し，$d(x,-):X\to\R$を$y\mapsto d(x,y)$と定める．
    \[\xymatrix@R-2pc{
        D_X:X\ar[r]&\Map(X,\R)\\
        \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
        x\ar@{|->}[r]&d(x,-)
    }\]
    $a\in X$とする．
    \begin{enumerate}
        \item $x\in X$ならば，$D_X(x)-D_X(a)\in B(X)$である．$x\in X$を$D_X(x)-D_X(a)\in B(X)$に写す写像$i:X\to B(X)$は等長写像である．
        \item 等長写像$i:X\to B(X)$の像の閉包$\overline{i(X)}$が$X$の完備化である．
        \item (一意性) $Y$を距離空間，$f:X\to Y$を等長写像とし，$Y$は$f$に関して$X$の完備化であるとする．$y\in Y$に対し，
        \[\xymatrix@R-2pc{
            \widetilde{D}_X(y):X\ar[r]&\R&\tilde{i}:Y\ar[r]&B(X)\\
            \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
            x\ar@{|->}[r]&d(y,f(x))&y\ar@{|->}[r]&\widetilde{D}_X(y)-D_X(a)
        }\]
        と定めると，写像$\tilde{i}$は可逆な等長写像$Y\to\overline{i(X)}$を定め，$\tilde{i}\circ f=i$である．
        \[\xymatrix{
            X\ar[r]^-f\ar[d]_-i&Y\ar[dl]^-{\o{i}}\\
            B(X)
        }\]
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{enumerate}[(a)]
            \item 命題\ref{prop-characterization-of-closure-in-terms-of-metric-function}より，
            \[\abs{D_X(x)(y)-D_X(x)(z)}=\abs{d(x,y)-d(x,z)}\le d(y,z)\]
            より，$y\to x$の極限を考えると，$D_X(x)\in C(X)$である．
            \item 再び命題\ref{prop-characterization-of-closure-in-terms-of-metric-function}より，
            \[\forall z\in X,\;\abs{D_X(x)(z)-D_X(y)(z)}=\abs{d(x,z)-d(y,z)}\le d(x,y)\]
            より，さらに踏み込んで$D_X(x)-D_X(y)\in B(X)$である．
            \item 
            いま，
            \[\|D_X(x)-D_X(y)\|_\infty=\sup_{z\in X}\abs{d(x,z)-d(y,z)}\le d(x,y)\]
            であるが，$z=y$とすると，$\abs{d(x,y)-d(y,y)}=d(x,y)$なので，$d(i(x),i(y))=\|D_X(x)-D_X(y)\|_\infty=d(x,y)$より，$i$は等長写像である．
        \end{enumerate}
        \item 
        $\o{i(X)}\subset B(X)$は完備距離空間$B(X)$の部分閉集合だから，命題\ref{prop-complete-sets-in-metric-space}より完備である．
        $i$は等長写像で，$i(X)$は$\o{i(X)}$上で稠密に決まっているので，$\o{i(X)}$は$X$の完備化である．
        \item 

    \end{enumerate}
\end{proof}

\subsection{不動点定理}

\begin{definition}[contracting mapping]
    $X$を距離空間とし，$f:X\to X$を写像とする．
    Lipschitz定数$r\in(0,1)$を持つLipschitz連続関数$f$を\textbf{縮小写像}という：$\exists_{r\in(0,1)}\forall_{x,y\in X}\;d(f(x),f(y))\le r\cdot d(x,y)$．
\end{definition}

\begin{proposition}[完備距離空間の縮小写像には不動点が存在する]
    $X$を距離空間とし，$f:X\to X$を縮小写像とする．
    \begin{enumerate}
        \item $f(a)=a$を満たす$a\in X$は，存在すればただ一つである．
        \item $X$が完備であり空でなければ，$f(a)=a$を満たす$a\in X$が存在する．
    \end{enumerate}
\end{proposition}
\begin{proof}
    $f$は縮小写像だから，条件を満たす$r\in(0,1)$が存在する．
    \begin{enumerate}
        \item $a,b\in X$が$f(a)=a,f(b)=b$を満たすとする．$d(a,b)\le rd(a,b)$より，$r\in(0,1)$だから，$d(a,b)=0\Leftrightarrow a=b$．
        \item 任意に$x\in X\ne\emptyset$を取り，$X$の点列をこれから$(x_n:=f^n(x))$と定める．
        すると，
        \begin{align*}
            \forall m\in\N,\;\forall n\ge m,\quad d(x_n,x_m)&\le \sum^{n-1}_{i=m}d(x_{i+1},x_i)\\
            &\le \sum^{m-1}_{i=m}r^id(x_1,x_0)\\
            &=\frac{r^m-r^n}{1-r}d(x_1,x_0)\\
            &\le \frac{r^m}{1-r}d(x_1,x_0)\xrightarrow{m\to\infty}0.
        \end{align*}
        より，これはCauchy列である．$X$は完備だから，極限$\lim_{n\to\infty}x_n=:a\in X$が存在する．これについて，$f(a)=\lim_{n\to\infty}f(x_n)=\lim_{x\to\infty}x_{n+1}=a$である．
    \end{enumerate}
\end{proof}

\subsection{可算共通部分}

\begin{proposition}[AC, 完備距離異空間の稠密開集合の可算共通部分は稠密]
    $X$を完備距離空間とする．$(U_n)_{n\in\N}$が$X$の稠密な開集合の列ならば，共通部分$\cap_{n=0}^\infty U_n$も稠密である．
\end{proposition}

\begin{corollary}[Baire, AC]
    $X$を空でない完備距離空間とし，$(A_n)_{n\in\N}$を$X$の閉集合の列とする．$X=\cup_{n=0}^\infty A_n$ならば，内部$A^\circ_n$が空でない$n$が存在する．
\end{corollary}

\subsection{Baire空間}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
    title=]
        ３つのBanach空間上の作用素の基本結果は，全てBaireの範疇定理の上に拠って立つ．
        これは，完備距離空間の稠密開集合の可算交叉は再び稠密である（くらいに「濃い」）ことを主張している．
\end{tcolorbox}

\begin{definition}[Baire space, nowhere dense]\mbox{}
    \begin{enumerate}
        \item 閉包が内点を持たない集合を\textbf{疎集合}という．集合が疎であることと，その補集合が稠密であることは同値．
        \item 可算個の疎集合の合併として表せる集合を\textbf{第一類}という．
        \item そうでない集合，すなわち，任意の稠密開集合の可算共通部分は稠密であるような位相空間を\textbf{第二類}または\textbf{Baire空間}という．
    \end{enumerate}
\end{definition}
\begin{proof}
    任意の半径$r>0$の閉球$B_0$を取り，これと$\cap_{n=1}^\infty A_n$との共通部分が空でないことを示せば，$\cap_{n=1}^\infty A_n$の稠密性が示せる．

    いま，$A_1\cap B_0^\circ$は空でない開集合だから，ある半径$2^{-1}r$より小さい閉球$B_1$が取れる．
    これを繰り返すことで，$B_n\subset A_n\cap B^\circ_{n-1},r(B_n)<2^{-n}r$を満たす閉球の列$(B_n)$が取れる．
    $X$は完備だから，$\exists_{x\in X}\;\{x\}=\cap_{n=1}^\infty B_n\subset B_0\cap\paren{\cap_{n=1}^\infty A_n}$が成り立ち，共通部分が空でないことがわかった．
\end{proof}

\begin{proposition}[Baire category theorem 1]
    任意の完備距離空間$X$はBaire空間である．
    
    すなわち，$(A_n)$を$X$の稠密開集合の列とすると，この共通部分$\cap_{n\in\N}A_n$は$X$で稠密である．
    また双対命題は，閉集合列を用いて$X=\cup_{n=1}^\infty F_n$と表せたとき，少なくとも一つの$F_n$は疎でない（内点を持つ）．
\end{proposition}
\begin{remark}
    実はZFの下で従属選択公理と呼ばれる弱い選択公理と同値になる．
\end{remark}

\begin{proposition}[BCT2]
    任意の局所コンパクトハウスドルフ空間はBaire空間である．
\end{proposition}
\begin{remarks}
    こちらは函数解析学では使わないが，任意の有限次元多様体がBaire空間であることがわかる．多様体がパラコンパクトでない場合でも成り立つ．
    なお，局所コンパクトでない完備距離空間も，距離化可能でない局所コンパクトハウスドルフ空間も存在することに注意．
\end{remarks}

\section{距離化可能性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    一般の距離空間が距離化可能であるための条件は，可算性で捉えられる．
\end{tcolorbox}

\subsection{可算性・可分性}

\begin{definition}[first-countable, second-countable, separable, $\sigma$-compact]
    位相空間$X$について，
    \begin{enumerate}
        \item 任意の点$x\in X$の近傍系$\O(x)$が可算な基本形を持つとき，\textbf{第１可算}であるという．
        \item 開集合系$\O_X$が可算な基底$\U$を持つとき，$X$は\textbf{第２可算}であるという．これは可算な準基を持てば十分．
        \item 稠密な可算部分集合が存在する時，\textbf{可分}であるという．
        \item $X$は局所コンパクトであるとする．
        $X$のコンパクト集合の列$(A_n)_{n\in\N}$で，$X=\cup_{n\in\N}A_n$を満たすものが存在する時，$X$は\textbf{$\sigma$-コンパクト}であるという．
    \end{enumerate}
\end{definition}

\begin{proposition}
    位相空間$X$について，
    \begin{enumerate}
        \item 第２可算ならば第１可算である．
        \item 第２可算ならば可分である．
    \end{enumerate}
\end{proposition}

\subsection{距離空間の可算・可分性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    距離空間では可分性の概念が十分強く，第２可算性と同値になる．
\end{tcolorbox}

\begin{proposition}[距離空間では全有界なら可分]\label{prop-sep-metric-space}
    距離空間$X$について，
    \begin{enumerate}
        \item $X$は第１可算である．
        \item 稠密な部分集合$A$に対して，次のようにして開集合の基底が構成できる：$\U_A=\{U_{1/n}(a)\mid a\in A,n\in\N,n>0\}$は$X$の開集合系の基底である．
        \item (AC) $X$が全有界ならば，$X$は可分である．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 命題\ref{prop-open-balls-is-basis}と実数のArchimedes性より，任意の$x\in X$に対し，$\{U_{\frac{1}{n}}(a)\}_{n\in\N_{>0}}$は開近傍の基本系であり，可算である．
        \item $X$の開集合$U$とその点$x\in U$を任意に取り，この間に挟まる$\U_A$の元を構成すれば良い．
        開球は基底だから，$U_r(x)\subset U$を満たす実数$r>0$が存在し，実数のArchimedes性より，$n\ge\frac{2}{r}$を満たす$n\in\N$も存在する．$A$は稠密だから，この$n$に対しても$U_{1/n}(x)\cap A\ne\emptyset$で，$a\in U_{1/n}(x)\cap A$が取れる．
        $\frac{1}{n}+d(x,a)<\frac{2}{n}\le r$が成り立つから，$x\in U_{1/n}(a)\subset U_r(x)\subset U$が成り立つ．
        \item 
        任意の自然数$n\ge 1$に対して，$\forall x\in X,\;\exists a\in A_n,\;d(x,a)\le 1/n$を満たす有限集合$A_n\subset X$が存在するから，選択公理より列$(A_n)$を得る．$A=\cup_{n\in\N}A_n$とするとこれは可算集合であり，$X$上稠密である．
    \end{enumerate}
\end{proof}

\begin{corollary}\label{cor-separability-and-second-countability}
    $X$を距離空間とすると，次の２条件は同値．
    \begin{enumerate}
        \item $X$は可分である．
        \item $X$は第２可算である．
    \end{enumerate}
\end{corollary}
\begin{proof}\mbox{}
    \begin{description}
        \item[(1)$\Rightarrow$(2)] $X$の稠密な可算部分集合を$A$とする．命題\ref{prop-sep-metric-space}の通りに$\U_A$を定めると，これは可算である．
        \item[(2)$\Rightarrow$(1),AC] 命題\ref{prop-sep-general-space}.3より．
    \end{description}
\end{proof}

\subsection{Frechet空間$\R^\infty$の距離付け可能性}

\begin{proposition}[モデル空間での例]\mbox{}
    \begin{enumerate}
        \item 積空間$\R^\N$は距離付け可能である．
        \item 積空間$\R^\N$は可分であり，第２可算である．
    \end{enumerate}
\end{proposition}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item \begin{description}
            \item[証明方針] $\R$は空でない開区間と同相だから，積空間$A:=\prod_{n\in\N}\paren{0,\frac{1}{n}}$が距離付け可能であることを示せば良い．
            また$l^\infty\subset\subset\R^\N$は距離空間だから（例\ref{exp-uniform-norm}），包含写像\[\xymatrix@R-2pc{
                i:A\ar[r]&l^\infty\\
                \rotatebox[origin=c]{90}{$\in$}&\rotatebox[origin=c]{90}{$\in$}\\
                (a_n)\ar@{|->}[r]&a:\N\to\R
            }\]
            が埋め込みであること：$i^*(\O_{l^\infty})=\O_A$，即ち$l^\infty$空間の部分空間であることを示せば良い．
            \item[証明] \begin{align*}
                \forall r>0,\;\forall a\in A,\quad i^{-1}(U_r(a))&=U_r(a)\cap A\\
                &=\prod_{n\le 1/r}U_r(a_n)\times\prod_{n>1/r}\paren{0,\frac{1}{n}}
            \end{align*}
            は族の積位相の特徴付けより開集合系の基底である．基底と基底が通じ合っているため，$i^*$が任意の合併を保つことより（命題\ref{prop-functoriality-of-image-and-inverse-image-mappings}），
            $i^*(\O_{l^\infty})=\O_A$である．
        \end{description}
        \item 
        $\R^\N$の可算部分集合
        \[\Q^{(\N)}:=\left\{x=(x_n)\in\R^\N\;\middle|\;x_n\ne 0を満たすnは高々有限個\right\}\]
        が稠密であるため．系\ref{cor-separability-and-second-countability}より．
    \end{enumerate}
\end{proof}

\subsection{一般の距離付け可能性}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    第２可算な正規空間が距離付け可能で，可分距離空間を定める．これは埋め込み$X\to\R^\infty$が構成できることによる．
    さらに，コンパクト距離空間は$[0,1]^\infty$の閉部分空間に埋め込める．
\end{tcolorbox}

\begin{theorem}[Urysohnの距離付け定理]
    位相空間$X$について，次の３条件は同値である．
    \begin{enumerate}
        \item $X$は可分かつ距離付け可能．
        \item $X$は第２可算かつ正規．
        \item 埋め込み$X\to\R^\N$が存在する．
    \end{enumerate}
\end{theorem}

\begin{corollary}[AC, コンパクト距離空間は閉区間の可算積の閉部分空間と同相である]
    位相空間$X$について，次の３条件は同値である．
    \begin{enumerate}
        \item $X$はコンパクトかつ距離付け可能である．
        \item $X$は第２可算かつコンパクト・ハウスドルフである．
        \item 閉埋め込み$X\to[0,1]^\N$が存在する．
    \end{enumerate}
\end{corollary}


\chapter{位相的構造}

\section{Hausdorff空間}

\section{正規空間}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    Hahn-Banachの定理のように，$C(X;[0,1])$が$X$上に分離族を定める空間の一つの十分条件が正規性である．
    第２可算な正規空間が距離付け可能で，可分距離空間を定める．
\end{tcolorbox}

\begin{lemma}[Urysohn's lemma]\label{lemma-Urysohn's-lemma}
    $X$を正規空間とする．$A$を$X$の閉集合，$U$を$X$の開集合で，$A\subset U$を満たすものとする．
    \begin{enumerate}
        \item $X$の閉集合$B$と，$X$の開集合$V$で，$A\subset V\subset B\subset U$を満たすものが存在する．
        \item (Urysohn's lemma) 連続関数$f:X\to[0,1]$で，$A\subset f^{-1}(0)\subset f^{-1}([0,1)\subset U$を満たすものが存在する．
    \end{enumerate}
\end{lemma}
\begin{proof}\mbox{}
    \begin{enumerate}
        \item 正規性の特徴付け\ref{prop-characterizatioin-of-normality}より．
        \item 
    \end{enumerate}
\end{proof}

\subsection{正規空間上の有界連続関数}

\begin{theorem}[Tietzeの延長定理 (AC)]
    $X$を正規空間，$A\subset X$を閉とする．
    \begin{enumerate}
        \item 制限$F_A:C_b(X)\to C_b(A)$は全射であり，特に任意の$g\in C_b(A)$に対して$f\in F_A^{-1}(g)$は$\norm{f}_\infty=\norm{g}_\infty$に選べる．
        \item 制限$C(X)\to C(A)$も全射である．
    \end{enumerate}
\end{theorem}

\begin{corollary}[有界連続関数の空間が可分になる条件 (AC)]
    $X$を正規空間とする．次の2条件は同値：
    \begin{enumerate}
        \item $X$はコンパクトかつ距離付け可能である．
        \item $C_b(X)$は一様位相について可分である．
    \end{enumerate}
\end{corollary}

\section{局所コンパクト空間}

\subsection{$\sigma$-コンパクト性}

\begin{lemma}
    $X$を局所コンパクト空間，
    $\U$を$\O_X$の基底とする．
    $\U':=\Brace{U\in\U\mid U\text{は相対コンパクト}}$も$\O_X$の基底である．
\end{lemma}

\begin{proposition}
    $X$を局所コンパクト空間，$Y=X\cup\{b\}$を一点コンパクト化とする．
    次の2条件は同値．
    \begin{enumerate}
        \item $X$は$\sigma$-コンパクトである．
        \item $\O(b)$に，可算な基本系が存在する．
    \end{enumerate}
\end{proposition}

\subsection{距離付け可能性}

\begin{theorem}
    次の5条件は同値：
    \begin{enumerate}
        \item $X$は第２可算である．
        \item $X$は可分かつ距離付け可能．
        \item $X$は$\sigma$-コンパクトかつ距離付け可能．
        \item $X$は$\sigma$-コンパクトかつ，任意の$x\in X$について第２可算な開近傍$U\in\O(x)$が存在する．
        \item $X$の一点コンパクト化が第２可算である．
        \item 
    \end{enumerate}
\end{theorem}

\chapter{写像空間}

\section{陰関数定理}

\begin{tcolorbox}[colframe=ForestGreen, colback=ForestGreen!10!white,breakable,colbacktitle=ForestGreen!40!white,coltitle=black,fonttitle=\bfseries\sffamily,
title=]
    写像空間の縮小写像の不動点として，陰関数や常微分方程式の解が得られる．
\end{tcolorbox}

\begin{quotation}
    一般的な位相空間論を準備し，距離空間での例を見て，さらにこれを特徴づける位相的構造を見てきた．
    これで，位相空間論の発展を促した源流である，関数空間に取り組める．
\end{quotation}

\chapter{参考文献}

\begin{thebibliography}{99}
    \bibitem{斎藤}
    斎藤毅『集合と位相』（東京大学出版会．2016）
    \bibitem{彌永}
    彌永昌吉・彌永健一『集合と位相II』（岩波講座 基礎数学9，1977）．
    \bibitem{森田}
    森田紀一『位相空間論』（
    \bibitem{Johnstone}
        Peter Johnstone - The point of pointless topology (83)
    \bibitem{Johnstone2}
        Peter Johnstone, Stone Spaces, Cambridge Studies in Advanced Mathematics 3, Cambridge University Press 1982. xxi+370 pp. MR85f:54002, reprinted 1986.
    \bibitem{nLab}
        \url{https://ncatlab.org/nlab/show/Introduction+to+Topology}
    \bibitem{Vickers}
        Steven Vickers, Topology via Logic, Cambridge University Press (1989)
    \bibitem{Hausdorff}
    F. Hausdorff, Grundzüge der Mengenlehre, Veit \& Co., Leipzig, 1914.
    \bibitem{Bourbaki}
    Nicolas Bourbaki 位相I
    \bibitem{Analysis Now}
    Analysis Now
\end{thebibliography}

\end{document}